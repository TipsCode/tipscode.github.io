<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Created with Nullstack - https://nullstack.app" />
    <title>React: Guia completo para testa suas aplicações - TipsCode</title>
    <meta property="og:image" content="https://tipscode.com.br/thumbnail-article/react-guia-completo-teste.png">
    <meta property="og:description" content="Neste artigo, apresentarei uma ferramenta de teste do React chamada Jest, juntamente com a popular biblioteca Enzyme, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme.">
    <meta name="description" content="Neste artigo, apresentarei uma ferramenta de teste do React chamada Jest, juntamente com a popular biblioteca Enzyme, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme.">
    <meta property="og:title" content="React: Guia completo para testa suas aplicações - TipsCode">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="TipsCode">
    <meta property="og:url" content="https://tipscode.com.br/react-guia-completo-para-testes">
    <link rel="canonical" href="https://tipscode.com.br/react-guia-completo-para-testes">
    <meta property="og:locale" content="pt-BR">
    <link rel="shortcut icon" href="/favicon-96x96.png" type="image/png">
    <link rel="icon" href="/favicon-96x96.png" type="image/png">
    <link rel="manifest" href="/manifest.json" integrity="">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="TipsCode">
    <meta name="apple-mobile-web-app-title" content="TipsCode">
    
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/nullstack/56c9477b3abd9a34a8a6fa956066208c9033ed3e/client.css" integrity="" crossorigin="anonymous">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">
    <meta name="msapplication-TileColor" content="#D22365">
    <link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  </head>
  <body>
    <div id="application"><main class="bg-tips-light"><div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120538403-3"></script><script async src="https://www.googletagmanager.com/gtag/js?id=AW-641358523"></script><!----></div><!-- --><!----><!----><!----><!----><!----><!----><!----><header class="fixed w-full bg-white top-0 left-0 z-50 h-20"><div class="max-w-screen-xl mx-auto px-4 flex justify-between items-center flex-wrap py-4"><div class="w-full sm:w-auto justify-between sm:justify-self-start sm:px-0 items-center flex"><a href="/"><img src="/tipscode-logo-1.svg" alt="TipsCode" width="155" height="44"/></a><span class="flex items-center sm:hidden"><svg height="20" class="text-tips-gray-dark text-opacity-60" viewBox="0 0 512 512"><!----><!----><rect x="10" y="10" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="411.5957" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="210.7979" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect></svg></span></div><nav class="flex items-center flex-wrap sm:px-0 mt-2 sm:mt-0 z-50 bg-white hidden sm:flex"><a href="/" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Home <!--#--></a><a href="/artigos" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Blog <!--#--></a><a href="/ebook-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> E-book Gratuito <!--#--></a><a href="/mini-curso-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Mini-Curso Gratuito <!--#--></a><a href="/curso-react-pro" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Curso ReactJS PRO <!--#--></a></nav><div class="flex w-full sm:w-auto mt-4 sm:mt-0 hidden sm:flex"><a href="/curso-fullstack-turbo" class="bg-tips-blue text-white px-3 py-2 border border-tips-blue rounded hover:bg-white hover:text-tips-blue w-full sm:w-auto">Full-Stack Turbo<!--#--></a></div></div></header><div class="h-20"></div><div class="max-w-screen-xl mx-auto sm:m-auto sm:text-justify px-4 py-16"><article><h1 class="font-bold text-4xl text-left sm:text-left"> <!--#-->React: Guia completo para testa suas aplicações<!--#--> <!--#--></h1><figure class="mt-10"><img width="1242" src="/thumbnail-article/react-guia-completo-teste.png"/><ficaption><!----></ficaption></figure><div class="mt-10 prose max-w-none"><p>Neste artigo, apresentarei uma ferramenta de teste do React chamada <strong><em>Jest</em></strong>, juntamente com a popular biblioteca <em><strong>Enzyme</strong></em>, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo: execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme.</p>
<h2>Introdução</h2>
<p><img src="/uploads/2020/07/man-pointing-on-laptop-screen-3981798-1024x682.jpg" alt="react"></p>
<p>Figura 01: Teste com React</p>
<p>Teste é uma revisão linha por linha de como seu código será executado. Um conjunto de testes para uma aplicação compreende vários bits de código para verificar se aplicação está sendo executado com êxito e sem erros. Os testes também são úteis quando são feitas atualizações no código. Após atualizar um trecho de código, você pode executar um teste para garantir que a atualização não quebre a funcionalidade já existente.</p>
<h3>Por que Testa?</h3>
<p>É bom entender por que estamos fazendo algo antes de fazê-lo. Então, por que testar e qual é o seu propósito?</p>
<p>O primeiro objetivo do teste é impedir a regressão. Regressão é o reaparecimento de um bug que havia sido corrigido anteriormente. Faz com que um recurso pare de funcionar como pretendido após a ocorrência de um determinado evento;</p>
<p>O teste garante a funcionalidade de componentes complexos e aplicativos modulares;</p>
<p>Os testes são necessários para o desempenho efetivo de um aplicativo ou produto de software.</p>
<p>O teste torna um aplicativo mais robusto e menos propenso a erros. É uma maneira de verificar se o seu código faz o que você quer que ele faça e se o seu aplicativo funciona conforme o planejado para seus usuários.</p>
<p>Vamos examinar os tipos de teste e o que eles fazem.</p>
<h3>TESTE DE UNIDADE</h3>
<p>Nesse tipo de teste, unidades ou componentes individuais do software são testados. Uma unidade pode ser uma função, método, procedimento, módulo ou objeto individual. Um teste de unidade isola uma seção do código e verifica sua exatidão, a fim de validar que cada unidade do código do software tenha o desempenho esperado.</p>
<p>No teste de unidade, procedimentos ou funções individuais são testados para garantir que eles estejam funcionando corretamente e todos os componentes são testados individualmente. Por exemplo, testar uma função ou se uma instrução ou loop em um programa está funcionando corretamente se enquadra no escopo do teste de unidade.</p>
<h3>Teste de Componentes</h3>
<p>O teste de componente verifica a funcionalidade de uma parte individual de um aplicativo. Os testes são realizados em cada componente isoladamente de outros componentes. Geralmente, os aplicativos React são compostos de vários componentes; portanto, o teste de componentes lida com o teste desses componentes individualmente.</p>
<p>Por exemplo, considere um site que tenha páginas da web diferentes com muitos componentes. Cada componente terá seus próprios subcomponentes. Testar cada módulo sem considerar a integração com outros componentes é chamado de teste de componente.</p>
<p>Testes como este no React requerem ferramentas mais sofisticadas. Portanto, precisaríamos de ferramentas Jest e, às vezes, mais sofisticadas, como Enzyme, que discutiremos brevemente mais adiante.</p>
<h3>Teste Instantâneo</h3>
<p>Um teste de captura instantânea garante que a interface do usuário (UI) de um aplicativo Web não seja alterada inesperadamente. Ele captura o código de um componente em um momento no tempo, para que possamos comparar o componente em um estado com qualquer outro estado possível.</p>
<p>Aprenderemos sobre o teste de instantâneo em uma seção posterior.</p>
<h3>Vantagens e Desvantagens</h3>
<p>O teste é excelente e deve ser feito, mas possui vantagens e desvantagens.</p>
<h4>Vantagens</h4>
<ul>
<li>Impede regressão inesperada;</li>
<li>Ele permite que o desenvolvedor se concentre na tarefa atual, em vez de se preocupar com o passado;</li>
<li>Ele permite a construção modular de um aplicativo que seria complexo demais para ser construído;</li>
<li>Reduz a necessidade de verificação manual.</li>
</ul>
<h4>Desvantagens</h4>
<ul>
<li>Você precisa escrever mais código, além de depurar e manter;</li>
<li>Falhas de teste não críticas podem fazer com que o aplicativo seja rejeitado em termos de integração contínua.</li>
</ul>
<h2>Introdução Ao Jest</h2>
<p><img src="/uploads/2020/07/jest-1.png" alt="React"></p>
<p>Figura 02: Jest - React</p>
<p>O <a href="https://jestjs.io/en/" target="_blank" rel="noopener">Jest</a> é uma estrutura de teste de JavaScript deliciosa, com foco na simplicidade. Pode ser instalado com <a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a> ou fio. O Jest se encaixa em uma categoria mais ampla de utilitários, conhecidos como corredores de teste . Funciona muito bem para aplicativos React, mas também funciona bem fora dos aplicativos React.</p>
<p>A <a href="https://enzymejs.github.io/enzyme/" target="_blank" rel="noopener">enzima</a> é uma biblioteca usada para testar os aplicativos <a href="/react-hooks-guia-completo-passo-a-passo/">React</a>. Ele foi projetado para testar componentes e possibilita escrever asserções que simulam ações que confirmam se a interface do usuário está funcionando corretamente.</p>
<p>Jest e Enzyme se complementam tão bem que, neste artigo, usaremos os dois.</p>
<h3>Processo de Execução de um Teste com o Jest</h3>
<p>Nesta seção, estaremos instalando o Jest e escrevendo testes. Se você é novo no React, recomendo usar o <a href="https://create-react-app.dev/" target="_blank" rel="noopener">Create React App</a>, pois ele está pronto para uso e é enviado com o Jest.</p>
<pre><code>npm init react<span class="token operator">-</span>app my<span class="token operator">-</span>app
</code></pre>
<p>Precisamos instalar o Enzyme **** e enzyme-adapter-react-16com react-test-renderer(o número deve ser baseado na versão do React que você está usando).</p>
<pre><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev enzyme enzyme<span class="token operator">-</span>adapter<span class="token operator">-</span>react<span class="token operator">-</span><span class="token number">16</span> react<span class="token operator">-</span>test<span class="token operator">-</span>renderer
</code></pre>
<p>Agora que criamos nosso projeto com Jest e Enzyme, precisamos criar um setupTest.jsarquivo na srcpasta do projeto. O arquivo deve ficar assim:</p>
<pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> configure <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"enzyme"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Adapter <span class="token keyword">from</span> <span class="token string">"enzyme-adapter-react-16"</span><span class="token punctuation">;</span>
<span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> adapter<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Isso importa a enzima e configura o adaptador para executar nossos testes.</p>
<p>Antes de continuar, vamos aprender algumas noções básicas. Algumas coisas importantes são muito usadas neste artigo e você precisará entendê-las.</p>
<p>itou test Você passaria uma função para esse método e o executor de testes executaria essa função como um bloco de testes;</p>
<p>describe Este método opcional é para agrupar qualquer número de itou testinstruções;</p>
<p>expect Essa é a condição que o teste precisa passar. Ele compara o parâmetro recebido com o correspondente. Também oferece acesso a vários matchers que permitem validar coisas diferentes. Você pode ler mais sobre isso na documentação .</p>
<p>mount Esse método renderiza o DOM completo, incluindo os componentes filhos do componente pai, nos quais estamos executando os testes;</p>
<p>shallow Isso renderiza apenas os componentes individuais que estamos testando. Não processa componentes filho. Isso nos permite testar componentes isoladamente.</p>
<h3>Criando Arquivo de Teste</h3>
<p>Como o Jest sabe o que é um arquivo de teste e o que não é? A primeira regra é que qualquer arquivo encontrado em qualquer diretório com o nome __test__seja considerado um teste. Se você colocar um arquivo JavaScript em uma dessas pastas, o Jest tentará executá-lo quando você ligar para o Jest, para o bem ou para o mal. A segunda regra é que o Jest reconhecerá qualquer arquivo com o sufixo .spec.jsou .test.js. Ele pesquisará os nomes de todas as pastas e todos os arquivos em todo o seu repositório.</p>
<p>Vamos criar nosso primeiro teste, para um miniaplicativo React criado para este tutorial. Você pode cloná-lo no <a href="https://github.com/daacode/react-jest" target="_blank" rel="noopener">GitHub</a> . Execute npm installpara instalar todos os pacotes e, em seguida, npm startinicie o aplicativo. Verifique o README.mdarquivo para obter mais informações.</p>
<p>Vamos abrir App.test.jspara escrever nosso primeiro teste. Primeiro, verifique se nosso componente de aplicativo é renderizado corretamente e se especificamos uma saída:</p>
<pre><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders without crashing"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders Account header"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> welcome <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Display Active Users Account Details<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>welcome<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>No teste acima, o primeiro teste, with shallow, verifica se nosso componente de aplicativo é renderizado corretamente sem travar. Lembre-se de que o shallowmétodo renderiza apenas um único componente, sem componentes filhos.</p>
<p>O segundo teste verifica se especificamos uma h1saída de tag &quot;Exibir conta de usuário ativo&quot; em nosso componente de aplicativo, com um correspondente Jest de toEqual.</p>
<p>Agora, execute o teste:</p>
<pre><code>npm run test 
<span class="token comment">/* OR */</span>
npm test
</code></pre>
<p>A saída no seu terminal deve ser assim:</p>
<pre><code> <span class="token constant">PASS</span>  src<span class="token operator">/</span>App<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js
  √ renders without <span class="token function">crashing</span> <span class="token punctuation">(</span><span class="token number">34</span>ms<span class="token punctuation">)</span>
  √ renders Account <span class="token function">header</span> <span class="token punctuation">(</span><span class="token number">13</span>ms<span class="token punctuation">)</span>

Test Suites<span class="token operator">:</span> <span class="token number">1</span> passed<span class="token punctuation">,</span> <span class="token number">1</span> total
Tests<span class="token operator">:</span>       <span class="token number">2</span> passed<span class="token punctuation">,</span> <span class="token number">2</span> total
Snapshots<span class="token operator">:</span>   <span class="token number">0</span> total
Time<span class="token operator">:</span>        <span class="token number">11.239</span>s<span class="token punctuation">,</span> estimated <span class="token number">16</span>s
Ran all test suites related to changed files<span class="token punctuation">.</span>

Watch Usage<span class="token operator">:</span> Press w to show more<span class="token punctuation">.</span>
</code></pre>
<p>Como você pode ver, nosso teste passou. Isso mostra que temos um conjunto de testes nomeado App.test.js, com dois testes bem-sucedidos quando o Jest foi executado. Falaremos sobre o teste de instantâneo mais tarde, e você também verá um exemplo de falha no teste.</p>
<h4>Ignorando Ou Isolando Um Teste</h4>
<p>Ignorar ou isolar um teste significa que, quando o Jest é executado, um teste marcado específico não é executado.</p>
<pre><code>it<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">"renders without crashing"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders Account header"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Display Active Users Account Details<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Nosso primeiro teste será ignorado porque usamos o skipmétodo para isolar o teste. Portanto, ele não será executado ou fará alterações em nosso teste quando o Jest for executado. Somente o segundo será executado. Você também pode usar it.only().</p>
<p>É um pouco frustrante fazer alterações em um arquivo de teste e depois executar manualmente npm testnovamente. O Jest possui um bom recurso chamado modo de observação, que observa alterações no arquivo e executa testes de acordo. Para executar o Jest no modo de exibição, você pode executar npm test -- --watchou jest --watch. Eu também recomendaria deixar o Jest em execução na janela do terminal pelo restante deste tutorial.</p>
<h4>Funções Mock</h4>
<p>Um mock é uma duplicata convincente de um objeto ou módulo sem qualquer funcionamento interno real. Pode ter um pouquinho de funcionalidade, mas comparado à coisa real, é uma farsa. Pode ser criado automaticamente pelo Jest ou manualmente.</p>
<p>Por que devemos zombar? A zombaria reduz o número de dependências - ou seja, o número de arquivos relacionados que precisam ser carregados e analisados ​​quando um teste é executado. Portanto, o uso de muitas zombarias faz com que os testes sejam executados mais rapidamente.</p>
<p>As funções simuladas também são conhecidas como &quot;espiões&quot;, porque permitem espionar o comportamento de uma função chamada diretamente por algum outro código, em vez de apenas testar a saída.</p>
<p>Há duas maneiras de simular uma função: criando uma função de simulação para usá-la no código de teste ou escrevendo uma simulação manual para substituir uma dependência de módulo.</p>
<p>As zombarias manuais **** são usadas para remover a funcionalidade com dados simulados. Por exemplo, em vez de acessar um recurso remoto, como um site ou um banco de dados, convém criar uma simulação manual que permita usar dados falsos.</p>
<p>Usaremos uma função simulada na próxima seção.</p>
<h4>Testando Componentes do React</h4>
<p>A seção combinará todo o conhecimento que adquirimos até o momento para entender como testar os componentes do React. O teste envolve garantir que a saída de um componente não tenha sido alterada inesperadamente para outra coisa. Construir componentes da maneira correta é de longe a maneira mais eficaz de garantir testes bem-sucedidos.</p>
<p>Uma coisa que podemos fazer é testar os adereços dos componentes - especificamente, testar se os adereços de um componente estão sendo passados ​​para outro. O Jest e a API Enzyme nos permitem criar uma função simulada para simular se objetos estão sendo transmitidos entre componentes.</p>
<p>Temos que passar os props da conta de usuário do Appcomponente principal para o Accountcomponente. Precisamos fornecer detalhes da conta do usuário Accountpara renderizar a conta ativa dos usuários. É aqui que a zombaria é útil, permitindo testar nossos componentes com dados falsos.</p>
<p>Vamos criar um mock para os useradereços:</p>
<pre><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">"Adeneye David"</span><span class="token punctuation">,</span>
  email<span class="token operator">:</span> <span class="token string">"david@gmail.com"</span><span class="token punctuation">,</span>
  username<span class="token operator">:</span> <span class="token string">"Dave"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Criamos uma função de simulação manual em nosso arquivo de teste e a envolvemos nos componentes. Digamos que estamos testando um grande banco de dados de usuários. Não é aconselhável acessar o banco de dados diretamente de nosso arquivo de teste. Em vez disso, criamos uma função simulada, que nos permite usar dados falsos para testar nosso componente.</p>
<pre><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"accepts user account props"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span></span> <span class="token attr-name">user</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"contains users account email"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span></span> <span class="token attr-name">user</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">"david@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Temos dois testes acima e usamos uma describecamada que leva o componente a ser testado. Ao especificar os props e valores que esperamos que sejam aprovados no teste, podemos prosseguir.</p>
<p>No primeiro teste, verificamos se os objetos que passamos para o componente montado são iguais aos objetos simulados que criamos acima.</p>
<p>Para o segundo teste, passamos os acessórios do usuário para o Accountcomponente montado . Em seguida, verificamos se podemos encontrar o</p>
<p>elemento que corresponde ao que temos no Accountcomponente. Quando executamos o conjunto de testes, você verá que o teste é executado com êxito.</p>
<p>Também podemos testar o estado do nosso componente. Vamos verificar se o estado da mensagem de erro é igual a nulo:</p>
<pre><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders correctly with no error message"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Neste teste, verificamos se o estado do erro de nosso componente é igual a nulo, usando um toEqual()correspondente. Se houver uma mensagem de erro em nosso aplicativo, o teste falhará quando executado.</p>
<p>Na próxima seção, veremos como testar os componentes React com o teste de instantâneo, outra técnica incrível.</p>
<h4>Teste Rápido</h4>
<p>O teste de captura instantânea captura o código de um componente em um momento, a fim de compará-lo a um arquivo de referência instantâneo armazenado ao lado do teste. É usado para acompanhar as alterações na interface do usuário de um aplicativo.</p>
<p>A representação de código real de uma captura instantânea é um arquivo JSON, e esse JSON contém um registro da aparência do componente quando a captura instantânea foi feita. Durante um teste, o Jest compara o conteúdo desse arquivo JSON com a saída do componente durante o teste. Se combinarem, o teste passa; caso contrário, o teste falha.</p>
<p>Para converter um wrapper Enzyme em um formato compatível com o teste de captura instantânea Jest, precisamos instalar enzyme-to-json:</p>
<pre><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev enzyme<span class="token operator">-</span>to<span class="token operator">-</span>json
</code></pre>
<p>Vamos criar nosso teste de instantâneo. Quando o executamos pela primeira vez, o instantâneo do código desse componente será composto e salvo em uma nova __snapshots__pasta no srcdiretório</p>
<pre><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"renders correctly"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">toJson</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Quando o teste acima for executado com êxito, o componente atual da interface do usuário será comparado ao existente.</p>
<p>Agora, vamos executar o teste:</p>
<pre><code>npm run test
</code></pre>
<p>Quando o conjunto de testes for executado, um novo instantâneo será gerado e salvo na __snapshots__pasta. Quando executamos um teste posteriormente, o Jest verifica se os componentes correspondem ao instantâneo.</p>
<p>Conforme explicado na seção anterior, esse shallowmétodo do pacote Enzyme é usado para renderizar um único componente e nada mais. Não renderiza componentes filhos. Em vez disso, fornece uma boa maneira de isolar o código e obter melhores informações durante a depuração. Outro método, denominado mount, é usado para renderizar o DOM completo, incluindo os componentes filhos do componente pai, nos quais estamos executando os testes.</p>
<p>Também podemos atualizar nosso instantâneo. Vamos fazer algumas alterações em nosso componente para que nosso teste falhe, o que acontecerá porque o componente não corresponde mais ao que temos no arquivo de instantâneo. Para fazer isso, vamos alterar a<br>
tag em nosso componente de<br>
Loading…<br>
para Fetching Users…<br>
. Quando o teste for executado, é isso que obteremos no terminal:</p>
<pre><code> <span class="token constant">FAIL</span>  src<span class="token operator">/</span>App<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">js</span> <span class="token punctuation">(</span><span class="token number">30.696</span>s<span class="token punctuation">)</span>
  × renders <span class="token function">correctly</span> <span class="token punctuation">(</span><span class="token number">44</span>ms<span class="token punctuation">)</span>

  ● renders correctly

    <span class="token function">expect</span><span class="token punctuation">(</span>received<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    Snapshot name<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">renders correctly
1

    - Snapshot
    + Received

      
        
          Display Active Users Account Details
        
        
    - Loading...
    +     Fetching Users...
        
      

       7 | it("renders correctly", ()
=> {
       8 |   const wrapper = shallow();
    >  9 |   expect(toJson(wrapper)).toMatchSnapshot();
         |                           ^      10 | });
      11 |
      12 | /* it("renders without crashing", () => {

      at Object. (src/App.test.js:9:27)

 › 1 snapshot failed.
Snapshot Summary
 › 1 snapshot failed from 1 test suite. Inspect your code changes or press </span><span class="token template-punctuation string">`</span></span>u` to update them<span class="token punctuation">.</span>

Test Suites<span class="token operator">:</span> <span class="token number">1</span> failed<span class="token punctuation">,</span> <span class="token number">1</span> total
Tests<span class="token operator">:</span>       <span class="token number">1</span> failed<span class="token punctuation">,</span> <span class="token number">1</span> total
Snapshots<span class="token operator">:</span>   <span class="token number">1</span> failed<span class="token punctuation">,</span> <span class="token number">1</span> total
Time<span class="token operator">:</span>        <span class="token number">92.274</span>s
Ran all test suites related to changed files<span class="token punctuation">.</span>

Watch Usage<span class="token operator">:</span> Press w to show more<span class="token punctuation">.</span>
</code></pre>
<p>Se queremos que nosso teste seja aprovado, alteramos o teste para o estado anterior ou atualizamos o arquivo de captura instantânea. Na linha de comando, o Jest fornece instruções sobre como atualizar o instantâneo. Primeiro, pressione wna linha de comando para mostrar mais e, em seguida, pressione upara atualizar o instantâneo.</p>
<pre><code>› Press u to update failing snapshots<span class="token punctuation">.</span>
</code></pre>
<p>Quando pressionamos upara atualizar o instantâneo, o teste será aprovado.</p>
<h2>Conclusão</h2>
<p>Espero que você tenha gostado de trabalhar neste tutorial. Aprendemos algumas técnicas de teste Jest usando a biblioteca de testes Enzyme. Também apresentei o processo de execução de um teste, teste de componentes do React, zombaria e teste de instantâneo. Se você tiver alguma dúvida, deixe-a na seção de comentários abaixo e teremos prazer em responder a todas e solucionar quaisquer problemas com você.</p>
<h3>Recomendações</h3>
</div></article></div><sectino class="px-4 sm:max-w-screen-xl sm:mx-auto sm:items-center flex sm:justify-between mt-10"><div class="flex flex-wrap shadow rounded-lg w-full bg-gradient-to-r from-tips-blue to-purple-500 focus:from-pink-500 focus:to-yellow-500 p-8"><div class="flex flex-wrap flex-col sm:flex-row items-center"><figure class="w-full sm:w-1/2"><img src="/banner-img.png" alt="Estudante TipsCode" width="440" height="454"/></figure><div class="w-full md:w-1/2"><h2 class="text-tips-light text-lg md:text-3xl font-semibold mb-3 leading-relaxed traking-wide">Vagas abertas para o melhor curso de programção <!--#--><strong>Fullstack<!--#--></strong> do Brasil. Clique no botão abaixo para conhecer.<!--#--></h2><div class="mt-2"><a href="https://bit.ly/2YivXeS" class="inline-block text-center w-full sm:w-auto lg:mx-0 bg-tips-green text-white font-bold rounded mt-4 lg:mt-0 py-2 px-8 shadow focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out">Conhecer Treinamento<!--#--></a></div></div></div></div></sectino><footer class="flex flex-col items-center py-16 sm:flex-row sm:justify-around"><figure class="flex-col sm:flex sm:justify-start"><a href="/"><img src="./tipscode-logo-1.svg" class="m-auto sm:m-0 md:m-0 lg:m-0" alt="TipsCode" width="186" height="66" loading="lazy"/></a><p class="text-center sm:text-center w-full text-tips-dark text-opacity-80">Todos os direitos reservados - TipsCode<!--#--><strong class="text-center sm:text-left w-full block">CNPJ:41.562.138/0001-61<!--#--></strong></p></figure><div class="flex flex-wrap justify-center my-8 sm:my-0"><div><a href="https://nullstack.app" target="_blank" rel="noopener noreferrer" class="flex justify-center flex-wrap" title="Desenvolvido com Nullstack"><span class="w-full block text-center text-tips-dark text-opacity-80"> Desenvolvido com <!--#--></span><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 511.5039 113.7368"><title> Nullstack <!--#--></title><path d="M13.2736,39.964H28.7009v9.8922a20.3919,20.3919,0,0,1,7.743-8.479,21.2792,21.2792,0,0,1,11.2172-3.0031q7.36,0,11.3349,4.1218t3.9745,11.6588a48.9655,48.9655,0,0,1-1.06,8.8913l-8.3025,42.8665H36.3556L44.187,65.7546a31.2306,31.2306,0,0,0,.5888-5.5939q0-7.6542-6.3593-7.6547a10.7348,10.7348,0,0,0-8.4791,4.3278q-3.5922,4.328-5.0639,12.0415l-7.1248,37.0372H.4961Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M81.4691,107.62q-7.2426,0-11.2466-4.1807t-4.004-11.8943a46.3965,46.3965,0,0,1,1.001-8.6557L75.64,39.964H92.7746L85.0609,80.24a29.8175,29.8175,0,0,0-.5888,5.5938q0,7.6551,6.4771,7.6548A10.3547,10.3547,0,0,0,99.2811,89.19q3.4446-4.2978,4.9756-12.0709L111.44,39.964h17.1348l-12.7775,65.9485H100.37V96.138a18.7565,18.7565,0,0,1-7.4781,8.3908A21.4849,21.4849,0,0,1,81.4691,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M150.2958,113.7368q-11.4821,0-16.7815-3.3563t-5.2995-10.5989a43.049,43.049,0,0,1,1.1188-8.3613l11.9532-56.6451H123.2687l2.532-13.2486h35.2118L146.2918,92.4213q-.1767.825-.3238,1.7371a10.5763,10.5763,0,0,0-.1473,1.6781q0,4.6521,8.2436,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M181.897,92.21q-11.4822,0-16.7816-3.3563T159.816,78.255a43.0455,43.0455,0,0,1,1.1187-8.3613l11.9532-56.6451H154.87L157.4018,0h35.2118L177.8929,70.8947q-.1765.8248-.3238,1.737a10.5766,10.5766,0,0,0-.1472,1.6782q0,4.6519,8.2435,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M228.3106,107.62a72.47,72.47,0,0,1-23.6119-4.1218l3.003-15.0739q10.5988,6.7717,21.6688,6.7715,6.4176,0,10.0983-2.2965a7.1387,7.1387,0,0,0,3.68-6.3593,4.4873,4.4873,0,0,0-1.8253-3.8273q-2.3556-1.884-9.5979-3.9452l-5.1817-1.4132q-13.8969-3.8271-13.8963-16.9582a18.9819,18.9819,0,0,1,8.0375-16.0455q8.0374-5.976,22.4637-5.9766a60.6829,60.6829,0,0,1,10.1573.8538,63.0434,63.0434,0,0,1,10.5105,2.797L260.8727,56.981a33.7,33.7,0,0,0-19.3724-6.3q-5.9478,0-9.3623,2.09a6.2659,6.2659,0,0,0-3.4152,5.5056,5.102,5.102,0,0,0,2.2375,4.2984q2.4731,1.7082,9.6568,3.7685l4.3573,1.2365q7.4775,2.12,10.9816,6.271t3.5035,10.805q0,10.7172-8.2436,16.84T228.3106,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M297.9546,106.2069q-11.3055,0-16.6932-3.3857t-5.3878-10.57a47.7847,47.7847,0,0,1,1.06-8.3613l5.9472-30.6778H265.9813l2.532-13.2486h16.8993l3.5918-18.7247h17.2527L302.6063,39.964h22.5521l-2.532,13.2486h-22.552l-6.1827,31.6788A20.2915,20.2915,0,0,0,293.48,88.13a3.9534,3.9534,0,0,0,1.9431,3.68q1.9433,1.1482,6.2416,1.1482h13.2486l-2.532,13.2486Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M338.2138,107.62q-9.4224,0-14.6029-5.1228-5.1828-5.1228-5.1816-14.25,0-12.2469,9.3034-18.99t26.2617-6.7421h11.3643l.4711-2.8852a3.6427,3.6427,0,0,1,.1177-.7066v-1.001A5.6271,5.6271,0,0,0,362.974,52.8q-2.9748-1.7666-8.5086-1.7665a41.5275,41.5275,0,0,0-10.8933,1.59,85.9338,85.9338,0,0,0-13.3074,5.0639l2.7675-14.7206a74.3941,74.3941,0,0,1,24.6129-4.5929q12.07,0,18.6363,4.6518,6.5643,4.652,6.5655,13.72a36.323,36.323,0,0,1-.4711,5.5939q-.4716,3.003-1.1188,5.9471l-7.2425,37.626H358.47v-7.36A26.3115,26.3115,0,0,1,338.2138,107.62Zm7.1837-11.8354q6.476,0,11.2466-5.6822t6.3-15.3978h-6.6537q-19.9029,0-19.9023,12.13a8.3352,8.3352,0,0,0,9.009,8.95Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M415.1828,107.62q-13.72,0-21.1683-7.4192t-7.4486-21.4333a42.63,42.63,0,0,1,5.005-20.8444,36.7663,36.7663,0,0,1,13.9257-14.338,40.3978,40.3978,0,0,1,20.7562-5.2111A39.0215,39.0215,0,0,1,445.8607,43.32l-3.1208,15.78a22.7112,22.7112,0,0,0-16.075-6.7126,21.2393,21.2393,0,0,0-11.8059,3.2974A22.52,22.52,0,0,0,406.88,64.783a29.416,29.416,0,0,0-2.8853,13.278q0,8.0083,3.4741,11.7765T417.95,93.606q8.8324,0,19.3724-6.1238l-3.2974,16.2516A45.998,45.998,0,0,1,415.1828,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M458.1224,14.2911H475.375l-8.95,46.0463L490.2134,39.964H512L482.2643,64.5769l18.43,41.3356H482.382L469.31,75.058l-6.83,5.6527-4.8284,25.2018H440.3987Z" transform="translate(-0.4961)" fill="#2d3748"></path></svg></a></div></div><ul><li class="inline-block ml-4"><a href="https://web.facebook.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://github.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M16 21.9999V18.1299C16.0375 17.6531 15.9731 17.1737 15.811 16.7237C15.6489 16.2737 15.3929 15.8634 15.06 15.5199C18.2 15.1699 21.5 13.9799 21.5 8.51994C21.4997 7.12376 20.9627 5.78114 20 4.76994C20.4559 3.54844 20.4236 2.19829 19.91 0.999938C19.91 0.999938 18.73 0.649938 16 2.47994C13.708 1.85876 11.292 1.85876 9 2.47994C6.27 0.649938 5.09 0.999938 5.09 0.999938C4.57638 2.19829 4.54414 3.54844 5 4.76994C4.03013 5.78864 3.49252 7.1434 3.5 8.54994C3.5 13.9699 6.8 15.1599 9.94 15.5499C9.611 15.8899 9.35726 16.2953 9.19531 16.7399C9.03335 17.1844 8.96681 17.658 9 18.1299V21.9999M9 18.9999C4 20.4999 4 16.4999 2 15.9999L9 18.9999Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.youtube.com/tipscode" title="tipscode" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1792 5.51057 21.8386 5.15941C21.498 4.80824 21.0707 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.11996 4 3.39996 4.46C2.92921 4.59318 2.50194 4.84824 2.16131 5.19941C1.82068 5.55057 1.57875 5.98541 1.45996 6.46C1.14518 8.20556 0.991197 9.97631 0.999961 11.75C0.988741 13.537 1.14273 15.3213 1.45996 17.08C1.59092 17.5398 1.83827 17.9581 2.17811 18.2945C2.51794 18.6308 2.93878 18.8738 3.39996 19C5.11996 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0707 18.8668 21.498 18.6118 21.8386 18.2606C22.1792 17.9094 22.4212 17.4746 22.54 17C22.8523 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8572 8.1787 22.54 6.42V6.42Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 15.02L15.5 11.75L9.75 8.47998V15.02Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.instagram.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M17 2H7C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 22 7 22H17C19.7614 22 22 19.7614 22 17V7C22 4.23858 19.7614 2 17 2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 11.3698C16.1234 12.2021 15.9812 13.052 15.5937 13.7988C15.2062 14.5456 14.5931 15.1512 13.8416 15.5295C13.0901 15.9077 12.2384 16.0394 11.4077 15.9057C10.5771 15.7721 9.80971 15.3799 9.21479 14.785C8.61987 14.1901 8.22768 13.4227 8.09402 12.592C7.96035 11.7614 8.09202 10.9097 8.47028 10.1582C8.84854 9.40667 9.45414 8.79355 10.2009 8.40605C10.9477 8.01856 11.7977 7.8764 12.63 7.99981C13.4789 8.1257 14.2648 8.52128 14.8716 9.12812C15.4785 9.73496 15.8741 10.5209 16 11.3698Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.5 6.5H17.51" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://twitter.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M23 2.9998C22.0424 3.67528 20.9821 4.19191 19.86 4.5298C19.2577 3.83731 18.4573 3.34649 17.567 3.12373C16.6767 2.90096 15.7395 2.957 14.8821 3.28426C14.0247 3.61151 13.2884 4.1942 12.773 4.95352C12.2575 5.71283 11.9877 6.61214 12 7.5298V8.5298C10.2426 8.57537 8.50127 8.18561 6.93101 7.39525C5.36074 6.60488 4.01032 5.43844 3 3.9998C3 3.9998 -1 12.9998 8 16.9998C5.94053 18.3978 3.48716 19.0987 1 18.9998C10 23.9998 21 18.9998 21 7.4998C20.9991 7.22126 20.9723 6.9434 20.92 6.6698C21.9406 5.6633 22.6608 4.39251 23 2.9998V2.9998Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li></ul></footer><span href="/curso-react-pro"></span></main></div>
    <script async>
      window.page = {"image":"/thumbnail-article/react-guia-completo-teste.png","status":200,"locale":"pt-BR","title":"React: Guia completo para testa suas aplicações - TipsCode","description":"Neste artigo, apresentarei uma ferramenta de teste do React chamada Jest, juntamente com a popular biblioteca Enzyme, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme."};
      window.instances = {"application":{},"n-0-0-0-0":{},"n-0-0-0-1":{},"n-0-0-0-2":{},"n-0-0-9/react-guia-completo-para-testes":{"slug":"react-guia-completo-para-testes","content":"<p>Neste artigo, apresentarei uma ferramenta de teste do React chamada <strong><em>Jest<\/em><\/strong>, juntamente com a popular biblioteca <em><strong>Enzyme<\/strong><\/em>, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo: execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme.<\/p>\n<h2>Introdução<\/h2>\n<p><img src=\"/uploads/2020/07/man-pointing-on-laptop-screen-3981798-1024x682.jpg\" alt=\"react\"><\/p>\n<p>Figura 01: Teste com React<\/p>\n<p>Teste é uma revisão linha por linha de como seu código será executado. Um conjunto de testes para uma aplicação compreende vários bits de código para verificar se aplicação está sendo executado com êxito e sem erros. Os testes também são úteis quando são feitas atualizações no código. Após atualizar um trecho de código, você pode executar um teste para garantir que a atualização não quebre a funcionalidade já existente.<\/p>\n<h3>Por que Testa?<\/h3>\n<p>É bom entender por que estamos fazendo algo antes de fazê-lo. Então, por que testar e qual é o seu propósito?<\/p>\n<p>O primeiro objetivo do teste é impedir a regressão. Regressão é o reaparecimento de um bug que havia sido corrigido anteriormente. Faz com que um recurso pare de funcionar como pretendido após a ocorrência de um determinado evento;<\/p>\n<p>O teste garante a funcionalidade de componentes complexos e aplicativos modulares;<\/p>\n<p>Os testes são necessários para o desempenho efetivo de um aplicativo ou produto de software.<\/p>\n<p>O teste torna um aplicativo mais robusto e menos propenso a erros. É uma maneira de verificar se o seu código faz o que você quer que ele faça e se o seu aplicativo funciona conforme o planejado para seus usuários.<\/p>\n<p>Vamos examinar os tipos de teste e o que eles fazem.<\/p>\n<h3>TESTE DE UNIDADE<\/h3>\n<p>Nesse tipo de teste, unidades ou componentes individuais do software são testados. Uma unidade pode ser uma função, método, procedimento, módulo ou objeto individual. Um teste de unidade isola uma seção do código e verifica sua exatidão, a fim de validar que cada unidade do código do software tenha o desempenho esperado.<\/p>\n<p>No teste de unidade, procedimentos ou funções individuais são testados para garantir que eles estejam funcionando corretamente e todos os componentes são testados individualmente. Por exemplo, testar uma função ou se uma instrução ou loop em um programa está funcionando corretamente se enquadra no escopo do teste de unidade.<\/p>\n<h3>Teste de Componentes<\/h3>\n<p>O teste de componente verifica a funcionalidade de uma parte individual de um aplicativo. Os testes são realizados em cada componente isoladamente de outros componentes. Geralmente, os aplicativos React são compostos de vários componentes; portanto, o teste de componentes lida com o teste desses componentes individualmente.<\/p>\n<p>Por exemplo, considere um site que tenha páginas da web diferentes com muitos componentes. Cada componente terá seus próprios subcomponentes. Testar cada módulo sem considerar a integração com outros componentes é chamado de teste de componente.<\/p>\n<p>Testes como este no React requerem ferramentas mais sofisticadas. Portanto, precisaríamos de ferramentas Jest e, às vezes, mais sofisticadas, como Enzyme, que discutiremos brevemente mais adiante.<\/p>\n<h3>Teste Instantâneo<\/h3>\n<p>Um teste de captura instantânea garante que a interface do usuário (UI) de um aplicativo Web não seja alterada inesperadamente. Ele captura o código de um componente em um momento no tempo, para que possamos comparar o componente em um estado com qualquer outro estado possível.<\/p>\n<p>Aprenderemos sobre o teste de instantâneo em uma seção posterior.<\/p>\n<h3>Vantagens e Desvantagens<\/h3>\n<p>O teste é excelente e deve ser feito, mas possui vantagens e desvantagens.<\/p>\n<h4>Vantagens<\/h4>\n<ul>\n<li>Impede regressão inesperada;<\/li>\n<li>Ele permite que o desenvolvedor se concentre na tarefa atual, em vez de se preocupar com o passado;<\/li>\n<li>Ele permite a construção modular de um aplicativo que seria complexo demais para ser construído;<\/li>\n<li>Reduz a necessidade de verificação manual.<\/li>\n<\/ul>\n<h4>Desvantagens<\/h4>\n<ul>\n<li>Você precisa escrever mais código, além de depurar e manter;<\/li>\n<li>Falhas de teste não críticas podem fazer com que o aplicativo seja rejeitado em termos de integração contínua.<\/li>\n<\/ul>\n<h2>Introdução Ao Jest<\/h2>\n<p><img src=\"/uploads/2020/07/jest-1.png\" alt=\"React\"><\/p>\n<p>Figura 02: Jest - React<\/p>\n<p>O <a href=\"https://jestjs.io/en/\" target=\"_blank\" rel=\"noopener\">Jest<\/a> é uma estrutura de teste de JavaScript deliciosa, com foco na simplicidade. Pode ser instalado com <a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener\">npm<\/a> ou fio. O Jest se encaixa em uma categoria mais ampla de utilitários, conhecidos como corredores de teste . Funciona muito bem para aplicativos React, mas também funciona bem fora dos aplicativos React.<\/p>\n<p>A <a href=\"https://enzymejs.github.io/enzyme/\" target=\"_blank\" rel=\"noopener\">enzima<\/a> é uma biblioteca usada para testar os aplicativos <a href=\"/react-hooks-guia-completo-passo-a-passo/\">React<\/a>. Ele foi projetado para testar componentes e possibilita escrever asserções que simulam ações que confirmam se a interface do usuário está funcionando corretamente.<\/p>\n<p>Jest e Enzyme se complementam tão bem que, neste artigo, usaremos os dois.<\/p>\n<h3>Processo de Execução de um Teste com o Jest<\/h3>\n<p>Nesta seção, estaremos instalando o Jest e escrevendo testes. Se você é novo no React, recomendo usar o <a href=\"https://create-react-app.dev/\" target=\"_blank\" rel=\"noopener\">Create React App<\/a>, pois ele está pronto para uso e é enviado com o Jest.<\/p>\n<pre><code>npm init react<span class=\"token operator\">-<\/span>app my<span class=\"token operator\">-<\/span>app\n<\/code><\/pre>\n<p>Precisamos instalar o Enzyme **** e enzyme-adapter-react-16com react-test-renderer(o número deve ser baseado na versão do React que você está usando).<\/p>\n<pre><code>npm install <span class=\"token operator\">--<\/span>save<span class=\"token operator\">-<\/span>dev enzyme enzyme<span class=\"token operator\">-<\/span>adapter<span class=\"token operator\">-<\/span>react<span class=\"token operator\">-<\/span><span class=\"token number\">16<\/span> react<span class=\"token operator\">-<\/span>test<span class=\"token operator\">-<\/span>renderer\n<\/code><\/pre>\n<p>Agora que criamos nosso projeto com Jest e Enzyme, precisamos criar um setupTest.jsarquivo na srcpasta do projeto. O arquivo deve ficar assim:<\/p>\n<pre><code><span class=\"token keyword\">import<\/span> <span class=\"token punctuation\">{<\/span> configure <span class=\"token punctuation\">}<\/span> <span class=\"token keyword\">from<\/span> <span class=\"token string\">\"enzyme\"<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token keyword\">import<\/span> Adapter <span class=\"token keyword\">from<\/span> <span class=\"token string\">\"enzyme-adapter-react-16\"<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token function\">configure<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span> adapter<span class=\"token operator\">:<\/span> <span class=\"token keyword\">new<\/span> <span class=\"token class-name\">Adapter<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Isso importa a enzima e configura o adaptador para executar nossos testes.<\/p>\n<p>Antes de continuar, vamos aprender algumas noções básicas. Algumas coisas importantes são muito usadas neste artigo e você precisará entendê-las.<\/p>\n<p>itou test Você passaria uma função para esse método e o executor de testes executaria essa função como um bloco de testes;<\/p>\n<p>describe Este método opcional é para agrupar qualquer número de itou testinstruções;<\/p>\n<p>expect Essa é a condição que o teste precisa passar. Ele compara o parâmetro recebido com o correspondente. Também oferece acesso a vários matchers que permitem validar coisas diferentes. Você pode ler mais sobre isso na documentação .<\/p>\n<p>mount Esse método renderiza o DOM completo, incluindo os componentes filhos do componente pai, nos quais estamos executando os testes;<\/p>\n<p>shallow Isso renderiza apenas os componentes individuais que estamos testando. Não processa componentes filho. Isso nos permite testar componentes isoladamente.<\/p>\n<h3>Criando Arquivo de Teste<\/h3>\n<p>Como o Jest sabe o que é um arquivo de teste e o que não é? A primeira regra é que qualquer arquivo encontrado em qualquer diretório com o nome __test__seja considerado um teste. Se você colocar um arquivo JavaScript em uma dessas pastas, o Jest tentará executá-lo quando você ligar para o Jest, para o bem ou para o mal. A segunda regra é que o Jest reconhecerá qualquer arquivo com o sufixo .spec.jsou .test.js. Ele pesquisará os nomes de todas as pastas e todos os arquivos em todo o seu repositório.<\/p>\n<p>Vamos criar nosso primeiro teste, para um miniaplicativo React criado para este tutorial. Você pode cloná-lo no <a href=\"https://github.com/daacode/react-jest\" target=\"_blank\" rel=\"noopener\">GitHub<\/a> . Execute npm installpara instalar todos os pacotes e, em seguida, npm startinicie o aplicativo. Verifique o README.mdarquivo para obter mais informações.<\/p>\n<p>Vamos abrir App.test.jspara escrever nosso primeiro teste. Primeiro, verifique se nosso componente de aplicativo é renderizado corretamente e se especificamos uma saída:<\/p>\n<pre><code><span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders without crashing\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">shallow<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">App<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders Account header\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> wrapper <span class=\"token operator\">=<\/span> <span class=\"token function\">shallow<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">App<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> welcome <span class=\"token operator\">=<\/span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span>h1<\/span><span class=\"token punctuation\">><\/span><\/span>Display Active Users Account Details<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/<\/span>h1<\/span><span class=\"token punctuation\">><\/span><\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>wrapper<span class=\"token punctuation\">.<\/span><span class=\"token function\">contains<\/span><span class=\"token punctuation\">(<\/span>welcome<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toEqual<\/span><span class=\"token punctuation\">(<\/span><span class=\"token boolean\">true<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>No teste acima, o primeiro teste, with shallow, verifica se nosso componente de aplicativo é renderizado corretamente sem travar. Lembre-se de que o shallowmétodo renderiza apenas um único componente, sem componentes filhos.<\/p>\n<p>O segundo teste verifica se especificamos uma h1saída de tag &quot;Exibir conta de usuário ativo&quot; em nosso componente de aplicativo, com um correspondente Jest de toEqual.<\/p>\n<p>Agora, execute o teste:<\/p>\n<pre><code>npm run test \n<span class=\"token comment\">/* OR */<\/span>\nnpm test\n<\/code><\/pre>\n<p>A saída no seu terminal deve ser assim:<\/p>\n<pre><code> <span class=\"token constant\">PASS<\/span>  src<span class=\"token operator\">/<\/span>App<span class=\"token punctuation\">.<\/span>test<span class=\"token punctuation\">.<\/span>js\n  √ renders without <span class=\"token function\">crashing<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token number\">34<\/span>ms<span class=\"token punctuation\">)<\/span>\n  √ renders Account <span class=\"token function\">header<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token number\">13<\/span>ms<span class=\"token punctuation\">)<\/span>\n\nTest Suites<span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> passed<span class=\"token punctuation\">,<\/span> <span class=\"token number\">1<\/span> total\nTests<span class=\"token operator\">:<\/span>       <span class=\"token number\">2<\/span> passed<span class=\"token punctuation\">,<\/span> <span class=\"token number\">2<\/span> total\nSnapshots<span class=\"token operator\">:<\/span>   <span class=\"token number\">0<\/span> total\nTime<span class=\"token operator\">:<\/span>        <span class=\"token number\">11.239<\/span>s<span class=\"token punctuation\">,<\/span> estimated <span class=\"token number\">16<\/span>s\nRan all test suites related to changed files<span class=\"token punctuation\">.<\/span>\n\nWatch Usage<span class=\"token operator\">:<\/span> Press w to show more<span class=\"token punctuation\">.<\/span>\n<\/code><\/pre>\n<p>Como você pode ver, nosso teste passou. Isso mostra que temos um conjunto de testes nomeado App.test.js, com dois testes bem-sucedidos quando o Jest foi executado. Falaremos sobre o teste de instantâneo mais tarde, e você também verá um exemplo de falha no teste.<\/p>\n<h4>Ignorando Ou Isolando Um Teste<\/h4>\n<p>Ignorar ou isolar um teste significa que, quando o Jest é executado, um teste marcado específico não é executado.<\/p>\n<pre><code>it<span class=\"token punctuation\">.<\/span><span class=\"token function\">skip<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders without crashing\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">shallow<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">App<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders Account header\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> wrapper <span class=\"token operator\">=<\/span> <span class=\"token function\">shallow<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">App<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> header <span class=\"token operator\">=<\/span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span>h1<\/span><span class=\"token punctuation\">><\/span><\/span>Display Active Users Account Details<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/<\/span>h1<\/span><span class=\"token punctuation\">><\/span><\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>wrapper<span class=\"token punctuation\">.<\/span><span class=\"token function\">contains<\/span><span class=\"token punctuation\">(<\/span>header<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toEqual<\/span><span class=\"token punctuation\">(<\/span><span class=\"token boolean\">true<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Nosso primeiro teste será ignorado porque usamos o skipmétodo para isolar o teste. Portanto, ele não será executado ou fará alterações em nosso teste quando o Jest for executado. Somente o segundo será executado. Você também pode usar it.only().<\/p>\n<p>É um pouco frustrante fazer alterações em um arquivo de teste e depois executar manualmente npm testnovamente. O Jest possui um bom recurso chamado modo de observação, que observa alterações no arquivo e executa testes de acordo. Para executar o Jest no modo de exibição, você pode executar npm test -- --watchou jest --watch. Eu também recomendaria deixar o Jest em execução na janela do terminal pelo restante deste tutorial.<\/p>\n<h4>Funções Mock<\/h4>\n<p>Um mock é uma duplicata convincente de um objeto ou módulo sem qualquer funcionamento interno real. Pode ter um pouquinho de funcionalidade, mas comparado à coisa real, é uma farsa. Pode ser criado automaticamente pelo Jest ou manualmente.<\/p>\n<p>Por que devemos zombar? A zombaria reduz o número de dependências - ou seja, o número de arquivos relacionados que precisam ser carregados e analisados ​​quando um teste é executado. Portanto, o uso de muitas zombarias faz com que os testes sejam executados mais rapidamente.<\/p>\n<p>As funções simuladas também são conhecidas como &quot;espiões&quot;, porque permitem espionar o comportamento de uma função chamada diretamente por algum outro código, em vez de apenas testar a saída.<\/p>\n<p>Há duas maneiras de simular uma função: criando uma função de simulação para usá-la no código de teste ou escrevendo uma simulação manual para substituir uma dependência de módulo.<\/p>\n<p>As zombarias manuais **** são usadas para remover a funcionalidade com dados simulados. Por exemplo, em vez de acessar um recurso remoto, como um site ou um banco de dados, convém criar uma simulação manual que permita usar dados falsos.<\/p>\n<p>Usaremos uma função simulada na próxima seção.<\/p>\n<h4>Testando Componentes do React<\/h4>\n<p>A seção combinará todo o conhecimento que adquirimos até o momento para entender como testar os componentes do React. O teste envolve garantir que a saída de um componente não tenha sido alterada inesperadamente para outra coisa. Construir componentes da maneira correta é de longe a maneira mais eficaz de garantir testes bem-sucedidos.<\/p>\n<p>Uma coisa que podemos fazer é testar os adereços dos componentes - especificamente, testar se os adereços de um componente estão sendo passados ​​para outro. O Jest e a API Enzyme nos permitem criar uma função simulada para simular se objetos estão sendo transmitidos entre componentes.<\/p>\n<p>Temos que passar os props da conta de usuário do Appcomponente principal para o Accountcomponente. Precisamos fornecer detalhes da conta do usuário Accountpara renderizar a conta ativa dos usuários. É aqui que a zombaria é útil, permitindo testar nossos componentes com dados falsos.<\/p>\n<p>Vamos criar um mock para os useradereços:<\/p>\n<pre><code><span class=\"token keyword\">const<\/span> user <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span>\n  name<span class=\"token operator\">:<\/span> <span class=\"token string\">\"Adeneye David\"<\/span><span class=\"token punctuation\">,<\/span>\n  email<span class=\"token operator\">:<\/span> <span class=\"token string\">\"david@gmail.com\"<\/span><span class=\"token punctuation\">,<\/span>\n  username<span class=\"token operator\">:<\/span> <span class=\"token string\">\"Dave\"<\/span><span class=\"token punctuation\">,<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Criamos uma função de simulação manual em nosso arquivo de teste e a envolvemos nos componentes. Digamos que estamos testando um grande banco de dados de usuários. Não é aconselhável acessar o banco de dados diretamente de nosso arquivo de teste. Em vez disso, criamos uma função simulada, que nos permite usar dados falsos para testar nosso componente.<\/p>\n<pre><code><span class=\"token function\">describe<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"accepts user account props\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token keyword\">const<\/span> wrapper <span class=\"token operator\">=<\/span> <span class=\"token function\">mount<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">Account<\/span><\/span> <span class=\"token attr-name\">user<\/span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=<\/span><span class=\"token punctuation\">{<\/span>user<span class=\"token punctuation\">}<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>wrapper<span class=\"token punctuation\">.<\/span><span class=\"token function\">props<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span>user<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toEqual<\/span><span class=\"token punctuation\">(<\/span>user<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"contains users account email\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token keyword\">const<\/span> wrapper <span class=\"token operator\">=<\/span> <span class=\"token function\">mount<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">Account<\/span><\/span> <span class=\"token attr-name\">user<\/span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=<\/span><span class=\"token punctuation\">{<\/span>user<span class=\"token punctuation\">}<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">const<\/span> value <span class=\"token operator\">=<\/span> wrapper<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"p\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">text<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>value<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toEqual<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"david@gmail.com\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Temos dois testes acima e usamos uma describecamada que leva o componente a ser testado. Ao especificar os props e valores que esperamos que sejam aprovados no teste, podemos prosseguir.<\/p>\n<p>No primeiro teste, verificamos se os objetos que passamos para o componente montado são iguais aos objetos simulados que criamos acima.<\/p>\n<p>Para o segundo teste, passamos os acessórios do usuário para o Accountcomponente montado . Em seguida, verificamos se podemos encontrar o<\/p>\n<p>elemento que corresponde ao que temos no Accountcomponente. Quando executamos o conjunto de testes, você verá que o teste é executado com êxito.<\/p>\n<p>Também podemos testar o estado do nosso componente. Vamos verificar se o estado da mensagem de erro é igual a nulo:<\/p>\n<pre><code><span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders correctly with no error message\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> wrapper <span class=\"token operator\">=<\/span> <span class=\"token function\">mount<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>wrapper<span class=\"token punctuation\">.<\/span><span class=\"token function\">state<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"error\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toEqual<\/span><span class=\"token punctuation\">(<\/span><span class=\"token keyword\">null<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Neste teste, verificamos se o estado do erro de nosso componente é igual a nulo, usando um toEqual()correspondente. Se houver uma mensagem de erro em nosso aplicativo, o teste falhará quando executado.<\/p>\n<p>Na próxima seção, veremos como testar os componentes React com o teste de instantâneo, outra técnica incrível.<\/p>\n<h4>Teste Rápido<\/h4>\n<p>O teste de captura instantânea captura o código de um componente em um momento, a fim de compará-lo a um arquivo de referência instantâneo armazenado ao lado do teste. É usado para acompanhar as alterações na interface do usuário de um aplicativo.<\/p>\n<p>A representação de código real de uma captura instantânea é um arquivo JSON, e esse JSON contém um registro da aparência do componente quando a captura instantânea foi feita. Durante um teste, o Jest compara o conteúdo desse arquivo JSON com a saída do componente durante o teste. Se combinarem, o teste passa; caso contrário, o teste falha.<\/p>\n<p>Para converter um wrapper Enzyme em um formato compatível com o teste de captura instantânea Jest, precisamos instalar enzyme-to-json:<\/p>\n<pre><code>npm install <span class=\"token operator\">--<\/span>save<span class=\"token operator\">-<\/span>dev enzyme<span class=\"token operator\">-<\/span>to<span class=\"token operator\">-<\/span>json\n<\/code><\/pre>\n<p>Vamos criar nosso teste de instantâneo. Quando o executamos pela primeira vez, o instantâneo do código desse componente será composto e salvo em uma nova __snapshots__pasta no srcdiretório<\/p>\n<pre><code><span class=\"token function\">it<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"renders correctly\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> tree <span class=\"token operator\">=<\/span> <span class=\"token function\">shallow<\/span><span class=\"token punctuation\">(<\/span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span><span class=\"token class-name\">App<\/span><\/span> <span class=\"token punctuation\">/><\/span><\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span><span class=\"token function\">toJson<\/span><span class=\"token punctuation\">(<\/span>tree<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toMatchSnapshot<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>Quando o teste acima for executado com êxito, o componente atual da interface do usuário será comparado ao existente.<\/p>\n<p>Agora, vamos executar o teste:<\/p>\n<pre><code>npm run test\n<\/code><\/pre>\n<p>Quando o conjunto de testes for executado, um novo instantâneo será gerado e salvo na __snapshots__pasta. Quando executamos um teste posteriormente, o Jest verifica se os componentes correspondem ao instantâneo.<\/p>\n<p>Conforme explicado na seção anterior, esse shallowmétodo do pacote Enzyme é usado para renderizar um único componente e nada mais. Não renderiza componentes filhos. Em vez disso, fornece uma boa maneira de isolar o código e obter melhores informações durante a depuração. Outro método, denominado mount, é usado para renderizar o DOM completo, incluindo os componentes filhos do componente pai, nos quais estamos executando os testes.<\/p>\n<p>Também podemos atualizar nosso instantâneo. Vamos fazer algumas alterações em nosso componente para que nosso teste falhe, o que acontecerá porque o componente não corresponde mais ao que temos no arquivo de instantâneo. Para fazer isso, vamos alterar a<br>\ntag em nosso componente de<br>\nLoading…<br>\npara Fetching Users…<br>\n. Quando o teste for executado, é isso que obteremos no terminal:<\/p>\n<pre><code> <span class=\"token constant\">FAIL<\/span>  src<span class=\"token operator\">/<\/span>App<span class=\"token punctuation\">.<\/span>test<span class=\"token punctuation\">.<\/span><span class=\"token function\">js<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token number\">30.696<\/span>s<span class=\"token punctuation\">)<\/span>\n  × renders <span class=\"token function\">correctly<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token number\">44<\/span>ms<span class=\"token punctuation\">)<\/span>\n\n  ● renders correctly\n\n    <span class=\"token function\">expect<\/span><span class=\"token punctuation\">(<\/span>received<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toMatchSnapshot<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span>\n    Snapshot name<span class=\"token operator\">:<\/span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`<\/span><span class=\"token string\">renders correctly\n1\n\n    - Snapshot\n    + Received\n\n      \n        \n          Display Active Users Account Details\n        \n        \n    - Loading...\n    +     Fetching Users...\n        \n      \n\n       7 | it(\"renders correctly\", ()\n=> {\n       8 |   const wrapper = shallow();\n    >  9 |   expect(toJson(wrapper)).toMatchSnapshot();\n         |                           ^      10 | });\n      11 |\n      12 | /* it(\"renders without crashing\", () => {\n\n      at Object. (src/App.test.js:9:27)\n\n › 1 snapshot failed.\nSnapshot Summary\n › 1 snapshot failed from 1 test suite. Inspect your code changes or press <\/span><span class=\"token template-punctuation string\">`<\/span><\/span>u` to update them<span class=\"token punctuation\">.<\/span>\n\nTest Suites<span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> failed<span class=\"token punctuation\">,<\/span> <span class=\"token number\">1<\/span> total\nTests<span class=\"token operator\">:<\/span>       <span class=\"token number\">1<\/span> failed<span class=\"token punctuation\">,<\/span> <span class=\"token number\">1<\/span> total\nSnapshots<span class=\"token operator\">:<\/span>   <span class=\"token number\">1<\/span> failed<span class=\"token punctuation\">,<\/span> <span class=\"token number\">1<\/span> total\nTime<span class=\"token operator\">:<\/span>        <span class=\"token number\">92.274<\/span>s\nRan all test suites related to changed files<span class=\"token punctuation\">.<\/span>\n\nWatch Usage<span class=\"token operator\">:<\/span> Press w to show more<span class=\"token punctuation\">.<\/span>\n<\/code><\/pre>\n<p>Se queremos que nosso teste seja aprovado, alteramos o teste para o estado anterior ou atualizamos o arquivo de captura instantânea. Na linha de comando, o Jest fornece instruções sobre como atualizar o instantâneo. Primeiro, pressione wna linha de comando para mostrar mais e, em seguida, pressione upara atualizar o instantâneo.<\/p>\n<pre><code>› Press u to update failing snapshots<span class=\"token punctuation\">.<\/span>\n<\/code><\/pre>\n<p>Quando pressionamos upara atualizar o instantâneo, o teste será aprovado.<\/p>\n<h2>Conclusão<\/h2>\n<p>Espero que você tenha gostado de trabalhar neste tutorial. Aprendemos algumas técnicas de teste Jest usando a biblioteca de testes Enzyme. Também apresentei o processo de execução de um teste, teste de componentes do React, zombaria e teste de instantâneo. Se você tiver alguma dúvida, deixe-a na seção de comentários abaixo e teremos prazer em responder a todas e solucionar quaisquer problemas com você.<\/p>\n<h3>Recomendações<\/h3>\n","date":"2020-07-08T00:00:00.000Z","readingTime":18,"title":"React: Guia completo para testa suas aplicações","categories":["react"],"tags":["alisson-suassuna","componente-react","componentes","jest","react","react-dom","react-teste","tipscode"],"description":"Neste artigo, apresentarei uma ferramenta de teste do React chamada Jest, juntamente com a popular biblioteca Enzyme, projetada para testar os componentes do React. Apresentarei as técnicas de teste do Jest, incluindo execução de testes, teste de componentes do React, entre outros. Se você é novo no no mundo dos teste e quer saber como começar, este artigo lhe será muito útil porque começaremos com uma introdução ao teste. No final, você estará entendendo um pouco mais e testando aplicações escritas com React usando Jest e Enzyme.","imgArticle":"/thumbnail-article/react-guia-completo-teste.png","imgHome":"/thumbnail-home/react-guia-completo-teste.png"},"n-0-0-9-0-0":{"expanded":false},"n-0-0-9-0-0-0-0-0-0-1-0":{}};
      window.environment = {"client":false,"server":true,"development":false,"production":true,"mode":"ssg","key":"56c9477b3abd9a34a8a6fa956066208c9033ed3e"};
      window.settings = {};
      window.worker = {"enabled":true,"fetching":false,"preload":[],"headers":{},"api":"","cdn":"","protocol":"https","queues":{},"online":true,"responsive":true};
      window.params = {"slug":"react-guia-completo-para-testes"};
      window.project = {"domain":"tipscode.com.br","name":"TipsCode","color":"#D22365","type":"website","display":"standalone","orientation":"portrait","scope":"/","root":"/","sitemap":true,"favicon":"/favicon-96x96.png","disallow":[],"icons":{"72":"/icon-72x72.png","96":"/icon-96x96.png","128":"/icon-128x128.png","144":"/icon-144x144.png","152":"/icon-152x152.png","180":"/icon-180x180.png","192":"/icon-192x192.png","384":"/icon-384x384.png","512":"/icon-512x512.png"}};
      window.context = {};
      document.addEventListener('DOMContentLoaded', () => {
        const script = window.document.createElement('script');
        script.src = '/nullstack/56c9477b3abd9a34a8a6fa956066208c9033ed3e/client.js';
        script.integrity = '';
        script.crossOrigin = 'anonymous';
        document.body.append(script);
      });
    </script>
  </body>
</html>
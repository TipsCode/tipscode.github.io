<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Created with Nullstack - https://nullstack.app" />
    <title>10 Práticas Recomendadas em NodeJS: Guia para Iniciante - TipsCode</title>
    <meta property="og:image" content="https://tipscode.com.br/thumbnail-article/10-praticas-recomendads-em-node-js-guia-para-iniciantes.png">
    <meta property="og:description" content="Conheça ás 10 práticas recomendadas em NodeJS, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade.">
    <meta name="description" content="Conheça ás 10 práticas recomendadas em NodeJS, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade.">
    <meta property="og:title" content="10 Práticas Recomendadas em NodeJS: Guia para Iniciante - TipsCode">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="TipsCode">
    <meta property="og:url" content="https://tipscode.com.br/10-praticas-recomendadas-em-nodejs-guia-para-iniciante">
    <link rel="canonical" href="https://tipscode.com.br/10-praticas-recomendadas-em-nodejs-guia-para-iniciante">
    <meta property="og:locale" content="pt-BR">
    <link rel="shortcut icon" href="/favicon-96x96.png" type="image/png">
    <link rel="icon" href="/favicon-96x96.png" type="image/png">
    <link rel="manifest" href="/manifest.json" integrity="">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="TipsCode">
    <meta name="apple-mobile-web-app-title" content="TipsCode">
    
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/nullstack/60da8213d3ebd5e9d2d0009172a915340d93cebf/client.css" integrity="" crossorigin="anonymous">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">
    <meta name="msapplication-TileColor" content="#D22365">
    <link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  </head>
  <body>
    <div id="application"><main class="bg-tips-light"><div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120538403-3"></script><script async src="https://www.googletagmanager.com/gtag/js?id=AW-641358523"></script><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-T52VSHP"></script><!----></div><!-- --><!----><!----><!----><!----><!----><!----><!----><header class="fixed w-full bg-white top-0 left-0 z-50 h-20"><div class="max-w-screen-xl mx-auto px-4 flex justify-between items-center flex-wrap py-4"><div class="w-full sm:w-auto justify-between sm:justify-self-start sm:px-0 items-center flex"><a href="/"><img src="/tipscode-logo-1.svg" alt="TipsCode" width="155" height="44"/></a><span class="flex items-center sm:hidden"><svg height="20" class="text-tips-gray-dark text-opacity-60" viewBox="0 0 512 512"><!----><!----><rect x="10" y="10" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="411.5957" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="210.7979" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect></svg></span></div><nav class="flex items-center flex-wrap sm:px-0 mt-2 sm:mt-0 z-50 bg-white hidden sm:flex"><a href="/" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Home <!--#--></a><a href="/artigos" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Blog <!--#--></a><a href="/ebook-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> E-book Gratuito <!--#--></a><a href="/mini-curso-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Mini-Curso Gratuito <!--#--></a><a href="/curso-react-pro" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Curso ReactJS PRO <!--#--></a></nav><div class="flex w-full sm:w-auto mt-4 sm:mt-0 hidden sm:flex"><a href="/curso-fullstack-turbo" class="bg-tips-blue text-white px-3 py-2 border border-tips-blue rounded hover:bg-white hover:text-tips-blue w-full sm:w-auto">Full-Stack Turbo<!--#--></a></div></div></header><div class="h-20"></div><div class="max-w-screen-xl mx-auto sm:m-auto sm:text-justify px-4 py-16"><article><h1 class="font-bold text-4xl text-left sm:text-left"> <!--#-->10 Práticas Recomendadas em NodeJS: Guia para Iniciante<!--#--> <!--#--></h1><figure class="mt-10"><img width="1242" src="/thumbnail-article/10-praticas-recomendads-em-node-js-guia-para-iniciantes.png"/><ficaption><!----></ficaption></figure><div class="mt-10 prose max-w-none"><p>Conheça ás 10 <strong><em>práticas recomendadas em NodeJS</em></strong>, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade.</p>
<p>Vou lista um resumo de cada uma logo no inicio, para facilita sua leitura:</p>
<p>1 . <strong>Use scripts npm</strong>. Pare de escrever scripts bash quando puder organizá-los melhor com scripts npm e Node. Por exemplo, <strong><em>npm run</em></strong> <strong><em>build</em></strong>, <strong><em>start</em></strong> e <strong><em>test</em></strong>. Os scripts do <strong>npm</strong> são fonte confiáveis para nós desenvolvedores do Node em nossos projeto.</p>
<p>2 . Use env vars. Utilize <strong><em>process.env.NODE_ENV</em></strong> definindo como <strong><em>development</em></strong>, ou <strong><em>production</em></strong>. Alguns frameworks usarão essa variável também, portanto, siga a convenção.</p>
<p>3 . <strong><em><a href="/event-loop-em-node-guia-completo/">Entenda bem Event Loop</a></em></strong>: Veja bem as funções <strong><em>setImmediate()</em></strong> e <strong><em>nextTick()</em></strong>. Use sempre a função <strong><em>setImmediate()</em></strong> ou <strong><em>setTimeout()</em></strong> para descarregar tarefas intensivas de CPU para o próximo ciclo de loop de evento.</p>
<p>4 . <strong><em>Use a herança funcional</em></strong>: Evite entrar em debate e na armadilha exagerada de depuração e compreensão da herança prototípica ou classes apenas usando a herança funcional como fazem alguns dos contribuidores do Node.</p>
<p>5 . <strong><em>Nomeie as coisas apropriadamente</em></strong>: Dê nomes significativos que servirão como documentação. Além disso, sem nomes de arquivo com letras maiúsculas, procure sempre usa o ( - ) travessão se necessário. Letras maiúsculas em nomes de arquivo não apenas parecem estranhas, mas podem causar problemas de plataforma cruzada.</p>
<p>6 . <strong><em>Forneça código nativo</em></strong>: Ao usar transpiladores, acaba comprometendo um pouco o código JS nativo (resultado das compilações) para que seus projetos possam ser executados sem as compilações.</p>
<p>7 . Use gzip: <strong><em>npm i compression -S</em></strong> e registro lógico, nem muito nem pouco, dependendo do ambiente. <strong><em>npm i morgan -S</em></strong>.</p>
<p>8 . <strong><em>Expanda</em>.</strong> Comece a pensar em armazenamento em cluster e em serviços sem estado desde o primeiro dia de desenvolvimento do Node. Use <strong><em>pm2</em></strong> ou controle de cluster do <strong><em>Strongloop</em></strong></p>
<p>9 . <strong><em>Solicitações de cache</em></strong> - Obtenha o máximo dos seus servidores Node, ocultando-os atrás de um servidor de arquivo estático, como <strong><em>nginx</em></strong> e / ou cache de nível de solicitação, como <strong><em>Varnish</em></strong> Cache e cache CDN.</p>
<p>Visto esse resumo, agora vamos percorrer por cada um desses itens de forma mais detalhadas.</p>
<p><a href="/ebook-gratuito-html"><img src="/uploads/2020/09/ebook-guia-completo-html.png" alt="Ebook HTML"></a></p>
<p>Ebook HTML</p>
<h2>1 . Use scripts NPM</h2>
<p>A primeira práticas recomendadas em NodeJS é quase um padrão agora criar scripts npm para compilações, testes e, o mais importante, para iniciar uma aplicação. Este é o primeiro lugar que os desenvolvedores do Node olham quando encontram um novo projeto. Algumas pessoas ( 1 , 2 , 3 , 4 ) até trocaram Grunt, Gulp e outros pelo script npm de nível mais baixo, mas mais confiável. Eu posso entender totalmente o argumento deles. Considerando que os scripts npm têm ganchos pré e pós, você pode chegar a um nível muito sofisticado de automação:</p>
<pre><code><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"preinstall"</span><span class="token operator">:</span> <span class="token string">"node prepare.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"postintall"</span><span class="token operator">:</span> <span class="token string">"node clean.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"postbuild"</span><span class="token operator">:</span> <span class="token string">"node index.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"postversion"</span><span class="token operator">:</span> <span class="token string">"npm publish"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Muitas vezes, ao desenvolver para o front-end, você deseja executar dois ou mais processos de observação para reconstruir seu código. Por exemplo, um para <strong><em>webpack</em></strong> e outro para <strong><em>nodemon</em></strong>. Você pode fazer isso com <strong><em>&amp;&amp;</em></strong> uma vez que o primeiro comando não libera o <strong><em>prompt</em></strong>. No entanto, há um módulo útil chamado <a href="https://www.npmjs.com/package/concurrently" target="_blank" rel="noopener">concurrently</a> que pode gerar vários processos e executá-los ao mesmo tempo.</p>
<p>Além disso, instale ferramentas de linha de comando dev, como <strong><em>webpack</em></strong>, <strong><em>nodemon</em></strong>, <strong><em>gulp</em></strong>, etc. localmente para evitar conflitos. Você pode apontar, <strong><em>./node_modules/.bin/gulp</em></strong> por exemplo, ou adicionar esta linha ao seu perfil <strong><em>bash / zsh (PATH!)</em></strong>:</p>
<pre><code><span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span><span class="token string">"./node_modules/.bin:$PATH"</span>
</code></pre>
<h2>2 . Use Env Vars - Variáveis de Ambientes</h2>
<p>Utilize variáveis ​​de ambiente até mesmo para os estágios iniciais de um projeto para garantir que não haja vazamento de informações confidenciais e apenas para construir o código corretamente desde o início. Além disso, algumas bibliotecas e estruturas (eu sei que o Express faz isso com certeza) irão obter informações sobre como <strong><em>NODE_ENV</em></strong> modificar seu comportamento. Defina como <strong><em>production</em></strong>. Defina seus valores <strong><em>MONGO_URI</em></strong> e <strong><em>API_KEYtambém</em></strong>. Você pode criar um arquivo shell (por exemplo <strong><em>start.sh</em></strong>) e adicioná-lo a <strong><em>.gitignore:</em></strong></p>
<pre><code><span class="token constant">NODE_ENV</span><span class="token operator">=</span>production <span class="token constant">MONGO_URL</span><span class="token operator">=</span>mongo<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>accounts <span class="token constant">API_KEY</span><span class="token operator">=</span>lolz nodemon index<span class="token punctuation">.</span>js
</code></pre>
<p>O Nodemon também tem um arquivo de configuração onde você pode colocar seus env vars ( exemplo ):</p>
<pre><code><span class="token punctuation">{</span>
  <span class="token string-property property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"NODE_ENV"</span><span class="token operator">:</span> <span class="token string">"production"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"MONGO_URL"</span><span class="token operator">:</span> <span class="token string">"mongo://localhost:3000/accounts"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2>3 . Entenda o Event Loop</h2>
<p>Outras Práticas Recomendadas em NodeJS. É entender bem o poderoso e inteligente ciclo de eventos é o que torna o Node tão rápido e brilhante, utilizando todo o tempo que seria perdido esperando a conclusão das tarefas de entrada e saída. Portanto, o Node é ótimo para otimizar sistemas vinculados a E / S.</p>
<p>Se você precisa realizar algo que consome muita CPU (por exemplo, computação, hashing de senhas ou compactação), então, além de gerar novos processos para essas tarefas de CPU, você pode querer explorar o adiamento da tarefa com <strong><em>setImmediate()</em></strong> ou <strong><em>setTimeout()</em></strong> - o código em seus callbacks continuarão no próximo ciclo de loop de evento. <strong><em>nextTick()</em></strong> funciona no mesmo ciclo ao contrário do nome. Argh!</p>
<p>Aqui está um diagrama de Bert Belder, que trabalhou no loop de eventos. Ele sabe claramente como funciona o loop de eventos!</p>
<h2>4 . Use Herança Funcional</h2>
<p><a href="/orientacao-objetos-javascript-um-guia-para-iniciante/">JavaScript suporta herança prototípica</a> que ocorre quando os objetos herdam de outros objetos. O operador <strong><em>class</em></strong> foi adicionado à linguagem com na <a href="https://youtu.be/PlFlKxZbVqs" target="_blank" rel="noopener">versão ES6</a>. No entanto, é abertamente complexo em comparação com a herança funcional. A maioria dos gurus do Node prefere a simplicidade do último. É implementado por um padrão de fábrica de função simples e NÃO requer o uso de <strong>prototype</strong>, <strong>new</strong> ou <strong>this</strong>. Não há efeitos implícitos quando você atualiza o protótipo (fazendo com que todas as instâncias sejam alteradas também), pois na herança funcional cada objeto usa sua própria cópia de métodos.</p>
<p>Essas Práticas Recomendadas em NodeJS, vão com certeza fazer total diferença em seus projetos.</p>
<p>Veja esse código criado por <strong><em>TJ Holowaychuk</em></strong>, um dev muito experiência que está envolvido com o projeto, Express, Mocha, Connect, Superagent e dezenas de outros módulos do Node. O Express usa herança funcional ( <a href="https://github.com/expressjs/express/blob/master/lib/express.js" target="_blank" rel="noopener">código-fonte completo</a> ):</p>
<pre><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> createApplication<span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token keyword">function</span> <span class="token function">createApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">app</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">mixin</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">mixin</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> proto<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  app<span class="token punctuation">.</span>request <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">__proto__</span><span class="token operator">:</span> req<span class="token punctuation">,</span> <span class="token literal-property property">app</span><span class="token operator">:</span> app <span class="token punctuation">}</span><span class="token punctuation">;</span>
  app<span class="token punctuation">.</span>response <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">__proto__</span><span class="token operator">:</span> res<span class="token punctuation">,</span> <span class="token literal-property property">app</span><span class="token operator">:</span> app <span class="token punctuation">}</span><span class="token punctuation">;</span>
  app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> app<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Para ser objetivo, os módulos principais do Node usam muito a herança prototípica. Se você seguir esse padrão, certifique-se de saber como funciona.</p>
<h2>5 . Tenha cuidado com os nomes das coisas</h2>
<p>Este é óbvio. Bons nomes servem de documentação. Qual você prefere?</p>
<pre><code><span class="token keyword">const</span> dexter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'morgan'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">dexter</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span>
</code></pre>
<p>Não tenho ideia do que <strong>dexter</strong> está fazendo quando apenas olho <strong>app.use()</strong>. Que tal um nome diferente e mais significativo:</p>
<pre><code><span class="token keyword">const</span> logger <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'morgan'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">logger</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre>
<p>Da mesma forma, os nomes dos arquivos devem refletir corretamente qual é o propósito do código interno. Se você der uma olhada na lib pasta do Node ( <a href="https://github.com/nodejs/node/tree/master/lib" target="_blank" rel="noopener">link do GitHub</a> ) que tem todos os módulos principais empacotados com a plataforma, você verá uma nomenclatura clara dos arquivos / módulos (mesmo se você não estiver muito familiarizado com todos os módulos principais) :</p>
<pre><code>events<span class="token punctuation">.</span>js
fs<span class="token punctuation">.</span>js
http<span class="token punctuation">.</span>js
https<span class="token punctuation">.</span>js
module<span class="token punctuation">.</span>js
net<span class="token punctuation">.</span>js
os<span class="token punctuation">.</span>js
path<span class="token punctuation">.</span>js
process<span class="token punctuation">.</span>js
punycode<span class="token punctuation">.</span>js
querystring<span class="token punctuation">.</span>js
</code></pre>
<p>Os módulos internos são marcados com um sublinhado ( <strong><em>_debugger.js</em></strong>, <strong><em>_http_agent.js</em></strong>, <strong><em>_http_client.js</em></strong>), assim como métodos e variável no código. Isso ajuda a alertar os desenvolvedores de que esta é uma interface interna e, se você a estiver usando, estará por conta própria - não reclame se ela for refeita ou mesmo removida.</p>
<h2>7 .Conheça bem o Express</h2>
<p><img src="/uploads/2020/10/expressjs-1024x568.jpg" alt="Práticas Recomendadas em NodeJS - Express JS"></p>
<p>Express é um framework excelente e muito maduro. Assim, você precisa saber o middleware mais usado e como usá-lo. <a href="https://youtu.be/t4y9AFY9mmI" target="_blank" rel="noopener">Veja esse conteúdo que está lá em nosso canal do Youtube</a>. Tenho os principais módulos de middleware listados lá. Por exemplo, <strong><em>npm i compression -S</em></strong> irá reduzir a velocidade de download, esvaziando as respostas. <strong>logger('tiny')</strong> ou <strong>logger('common')</strong> fornecerá menos (dev) ou mais (prod) logs, respectivamente.</p>
<h2>8 . Aumentar a Escalabilidade</h2>
<p>O Node é ótimo em assíncrono devido a sua E / S sem bloqueio e mantém essa forma assíncrona de codificação simples porque há apenas um thread. Esta é uma oportunidade para começar a dimensionar logo no início, talvez até com as primeiras linhas de código. Existe o <strong>módulo cluster</strong> principal que permitirá que você dimensione verticalmente sem muitos problemas. No entanto, uma maneira ainda melhor seria usar uma ferramenta como o <a href="http://pm2.keymetrics.io/" target="_blank" rel="noopener">pm2</a>.</p>
<p>Sem dúvida essas Práticas Recomendadas em NodeJS, a escalabilidade é uma das mais impotantes.</p>
<p>Por exemplo, é assim que você pode começar com pm2:</p>
<pre><code>npm i <span class="token operator">-</span>g pm2
</code></pre>
<p>Então você pode iniciar quatro instâncias do mesmo servidor:</p>
<pre><code>pm2 start server<span class="token punctuation">.</span>js <span class="token operator">-</span>i <span class="token number">4</span>
</code></pre>
<p>Para Docker, o pm2 versão 2+ possui pm2-docker. Portanto, seu Dockerfile pode ter a seguinte aparência:</p>
<pre><code># <span class="token operator">...</span>

<span class="token constant">RUN</span> npm install pm2 <span class="token operator">-</span>g

<span class="token constant">CMD</span> <span class="token punctuation">[</span><span class="token string">"pm2-docker"</span><span class="token punctuation">,</span> <span class="token string">"app.js"</span><span class="token punctuation">]</span>
</code></pre>
<p>A imagem oficial do Alpine Linux pm2 está no <a href="https://hub.docker.com/r/keymetrics/pm2-docker-alpine/" target="_blank" rel="noopener">Docker Hub</a>.</p>
<h2>9 . Solicitações de cache</h2>
<p>Esta é uma prática recomendada de DevOps que permitirá que você obtenha mais energia de suas instâncias de Node (você obtém mais de uma com pm2 ou algo semelhante, veja acima). O caminho a seguir é permitir que os servidores Node façam coisas de aplicativos como fazer solicitações, processar dados e executar lógica de negócios e descarregar o tráfego para arquivos estáticos em outro servidor web, como Apache httpd ou Nginx. Novamente, você provavelmente deve usar o Docker para a configuração:</p>
<pre><code><span class="token constant">FROM</span> nginx

<span class="token constant">COPY</span> nginx<span class="token punctuation">.</span>conf <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf
</code></pre>
<p>Eu gosto de usar o Docker Compose para fazer vários contêineres (nginx, Node, Redis, MongoDB) funcionarem entre si. Por exemplo:</p>
<pre><code><span class="token literal-property property">web</span><span class="token operator">:</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>app
  <span class="token literal-property property">volumes</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">"./app:/src/app"</span>
  <span class="token literal-property property">ports</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">"3030:3000"</span>
  <span class="token literal-property property">links</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">"db:redis"</span>
  <span class="token literal-property property">command</span><span class="token operator">:</span> pm2<span class="token operator">-</span>docker app<span class="token operator">/</span>server<span class="token punctuation">.</span>js

<span class="token literal-property property">nginx</span><span class="token operator">:</span>
  <span class="token literal-property property">restart</span><span class="token operator">:</span> always
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>nginx<span class="token operator">/</span>
  <span class="token literal-property property">ports</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">"80:80"</span>
  <span class="token literal-property property">volumes</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token operator">/</span>www<span class="token operator">/</span><span class="token keyword">public</span>
  <span class="token literal-property property">volumes_from</span><span class="token operator">:</span>
    <span class="token operator">-</span> web
  <span class="token literal-property property">links</span><span class="token operator">:</span>
    <span class="token operator">-</span> web<span class="token operator">:</span>web

<span class="token literal-property property">db</span><span class="token operator">:</span>
  <span class="token literal-property property">image</span><span class="token operator">:</span> redis
</code></pre>
<h2>Conclusões</h2>
<p>Hoje em dia e na era do software de código aberto, não há desculpas para não aprender com o código testado e confiável que está disponível. Você não precisa estar no círculo interno para entrar. O aprendizado nunca para e tenho certeza que em breve teremos diferentes práticas recomendadas com base nos fracassos e sucessos que experimentaremos. Eles são garantidos.</p>
<p>Vejo como mais e mais pessoas perseguem a próxima nova estrutura ou linguagem. É a síndrome do objeto brilhante. Eles aprendem uma nova biblioteca a cada semana e uma nova estrutura a cada mês. Eles verificam compulsivamente o Twitter, Reddit, Hacker News e JS Weekly. Eles usam o nível esmagador de atividade do mundo JavaScript para procrastinar. Eles têm históricos GitHub públicos vazios.</p>
<p>Aprender coisas novas é bom, mas não confunda com realmente construir coisas. O que importa e o que paga seu salário é, na verdade, construir coisas. Pare de engenharia . Você não está construindo o próximo Facebook.</p>
<p>A melhor prática final é usar as melhores práticas e o melhor dos melhores é dominar os fundamentos.</p>
<h3>Recomendação de Treinamento FullStack JavaScript</h3>
</div></article></div><sectino class="px-4 sm:max-w-screen-xl sm:mx-auto sm:items-center flex sm:justify-between mt-10"><div class="flex flex-wrap shadow rounded-lg w-full bg-gradient-to-r from-tips-blue to-purple-500 focus:from-pink-500 focus:to-yellow-500 p-8"><div class="flex flex-wrap flex-col sm:flex-row items-center"><figure class="w-full sm:w-1/2"><img src="/banner-img.png" alt="Estudante TipsCode" width="440" height="454"/></figure><div class="w-full md:w-1/2"><h2 class="text-tips-light text-lg md:text-3xl font-semibold mb-3 leading-relaxed traking-wide">Vagas abertas para o melhor curso de programção <!--#--><strong>Fullstack<!--#--></strong> do Brasil. Clique no botão abaixo para conhecer.<!--#--></h2><div class="mt-2"><a href="https://bit.ly/2YivXeS" class="inline-block text-center w-full sm:w-auto lg:mx-0 bg-tips-green text-white font-bold rounded mt-4 lg:mt-0 py-2 px-8 shadow focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out">Conhecer Treinamento<!--#--></a></div></div></div></div></sectino><footer class="flex flex-col items-center py-16 sm:flex-row sm:justify-around"><figure class="flex-col sm:flex sm:justify-start"><a href="/"><img src="./tipscode-logo-1.svg" class="m-auto sm:m-0 md:m-0 lg:m-0" alt="TipsCode" width="186" height="66" loading="lazy"/></a><p class="text-center sm:text-center w-full text-tips-dark text-opacity-80">Todos os direitos reservados - TipsCode<!--#--><strong class="text-center sm:text-left w-full block">CNPJ:41.562.138/0001-61<!--#--></strong></p></figure><div class="flex flex-wrap justify-center my-8 sm:my-0"><div><a href="https://nullstack.app" target="_blank" rel="noopener noreferrer" class="flex justify-center flex-wrap" title="Desenvolvido com Nullstack"><span class="w-full block text-center text-tips-dark text-opacity-80"> Desenvolvido com <!--#--></span><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 511.5039 113.7368"><title> Nullstack <!--#--></title><path d="M13.2736,39.964H28.7009v9.8922a20.3919,20.3919,0,0,1,7.743-8.479,21.2792,21.2792,0,0,1,11.2172-3.0031q7.36,0,11.3349,4.1218t3.9745,11.6588a48.9655,48.9655,0,0,1-1.06,8.8913l-8.3025,42.8665H36.3556L44.187,65.7546a31.2306,31.2306,0,0,0,.5888-5.5939q0-7.6542-6.3593-7.6547a10.7348,10.7348,0,0,0-8.4791,4.3278q-3.5922,4.328-5.0639,12.0415l-7.1248,37.0372H.4961Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M81.4691,107.62q-7.2426,0-11.2466-4.1807t-4.004-11.8943a46.3965,46.3965,0,0,1,1.001-8.6557L75.64,39.964H92.7746L85.0609,80.24a29.8175,29.8175,0,0,0-.5888,5.5938q0,7.6551,6.4771,7.6548A10.3547,10.3547,0,0,0,99.2811,89.19q3.4446-4.2978,4.9756-12.0709L111.44,39.964h17.1348l-12.7775,65.9485H100.37V96.138a18.7565,18.7565,0,0,1-7.4781,8.3908A21.4849,21.4849,0,0,1,81.4691,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M150.2958,113.7368q-11.4821,0-16.7815-3.3563t-5.2995-10.5989a43.049,43.049,0,0,1,1.1188-8.3613l11.9532-56.6451H123.2687l2.532-13.2486h35.2118L146.2918,92.4213q-.1767.825-.3238,1.7371a10.5763,10.5763,0,0,0-.1473,1.6781q0,4.6521,8.2436,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M181.897,92.21q-11.4822,0-16.7816-3.3563T159.816,78.255a43.0455,43.0455,0,0,1,1.1187-8.3613l11.9532-56.6451H154.87L157.4018,0h35.2118L177.8929,70.8947q-.1765.8248-.3238,1.737a10.5766,10.5766,0,0,0-.1472,1.6782q0,4.6519,8.2435,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M228.3106,107.62a72.47,72.47,0,0,1-23.6119-4.1218l3.003-15.0739q10.5988,6.7717,21.6688,6.7715,6.4176,0,10.0983-2.2965a7.1387,7.1387,0,0,0,3.68-6.3593,4.4873,4.4873,0,0,0-1.8253-3.8273q-2.3556-1.884-9.5979-3.9452l-5.1817-1.4132q-13.8969-3.8271-13.8963-16.9582a18.9819,18.9819,0,0,1,8.0375-16.0455q8.0374-5.976,22.4637-5.9766a60.6829,60.6829,0,0,1,10.1573.8538,63.0434,63.0434,0,0,1,10.5105,2.797L260.8727,56.981a33.7,33.7,0,0,0-19.3724-6.3q-5.9478,0-9.3623,2.09a6.2659,6.2659,0,0,0-3.4152,5.5056,5.102,5.102,0,0,0,2.2375,4.2984q2.4731,1.7082,9.6568,3.7685l4.3573,1.2365q7.4775,2.12,10.9816,6.271t3.5035,10.805q0,10.7172-8.2436,16.84T228.3106,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M297.9546,106.2069q-11.3055,0-16.6932-3.3857t-5.3878-10.57a47.7847,47.7847,0,0,1,1.06-8.3613l5.9472-30.6778H265.9813l2.532-13.2486h16.8993l3.5918-18.7247h17.2527L302.6063,39.964h22.5521l-2.532,13.2486h-22.552l-6.1827,31.6788A20.2915,20.2915,0,0,0,293.48,88.13a3.9534,3.9534,0,0,0,1.9431,3.68q1.9433,1.1482,6.2416,1.1482h13.2486l-2.532,13.2486Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M338.2138,107.62q-9.4224,0-14.6029-5.1228-5.1828-5.1228-5.1816-14.25,0-12.2469,9.3034-18.99t26.2617-6.7421h11.3643l.4711-2.8852a3.6427,3.6427,0,0,1,.1177-.7066v-1.001A5.6271,5.6271,0,0,0,362.974,52.8q-2.9748-1.7666-8.5086-1.7665a41.5275,41.5275,0,0,0-10.8933,1.59,85.9338,85.9338,0,0,0-13.3074,5.0639l2.7675-14.7206a74.3941,74.3941,0,0,1,24.6129-4.5929q12.07,0,18.6363,4.6518,6.5643,4.652,6.5655,13.72a36.323,36.323,0,0,1-.4711,5.5939q-.4716,3.003-1.1188,5.9471l-7.2425,37.626H358.47v-7.36A26.3115,26.3115,0,0,1,338.2138,107.62Zm7.1837-11.8354q6.476,0,11.2466-5.6822t6.3-15.3978h-6.6537q-19.9029,0-19.9023,12.13a8.3352,8.3352,0,0,0,9.009,8.95Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M415.1828,107.62q-13.72,0-21.1683-7.4192t-7.4486-21.4333a42.63,42.63,0,0,1,5.005-20.8444,36.7663,36.7663,0,0,1,13.9257-14.338,40.3978,40.3978,0,0,1,20.7562-5.2111A39.0215,39.0215,0,0,1,445.8607,43.32l-3.1208,15.78a22.7112,22.7112,0,0,0-16.075-6.7126,21.2393,21.2393,0,0,0-11.8059,3.2974A22.52,22.52,0,0,0,406.88,64.783a29.416,29.416,0,0,0-2.8853,13.278q0,8.0083,3.4741,11.7765T417.95,93.606q8.8324,0,19.3724-6.1238l-3.2974,16.2516A45.998,45.998,0,0,1,415.1828,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M458.1224,14.2911H475.375l-8.95,46.0463L490.2134,39.964H512L482.2643,64.5769l18.43,41.3356H482.382L469.31,75.058l-6.83,5.6527-4.8284,25.2018H440.3987Z" transform="translate(-0.4961)" fill="#2d3748"></path></svg></a></div></div><ul><li class="inline-block ml-4"><a href="https://web.facebook.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://github.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M16 21.9999V18.1299C16.0375 17.6531 15.9731 17.1737 15.811 16.7237C15.6489 16.2737 15.3929 15.8634 15.06 15.5199C18.2 15.1699 21.5 13.9799 21.5 8.51994C21.4997 7.12376 20.9627 5.78114 20 4.76994C20.4559 3.54844 20.4236 2.19829 19.91 0.999938C19.91 0.999938 18.73 0.649938 16 2.47994C13.708 1.85876 11.292 1.85876 9 2.47994C6.27 0.649938 5.09 0.999938 5.09 0.999938C4.57638 2.19829 4.54414 3.54844 5 4.76994C4.03013 5.78864 3.49252 7.1434 3.5 8.54994C3.5 13.9699 6.8 15.1599 9.94 15.5499C9.611 15.8899 9.35726 16.2953 9.19531 16.7399C9.03335 17.1844 8.96681 17.658 9 18.1299V21.9999M9 18.9999C4 20.4999 4 16.4999 2 15.9999L9 18.9999Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.youtube.com/tipscode" title="tipscode" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1792 5.51057 21.8386 5.15941C21.498 4.80824 21.0707 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.11996 4 3.39996 4.46C2.92921 4.59318 2.50194 4.84824 2.16131 5.19941C1.82068 5.55057 1.57875 5.98541 1.45996 6.46C1.14518 8.20556 0.991197 9.97631 0.999961 11.75C0.988741 13.537 1.14273 15.3213 1.45996 17.08C1.59092 17.5398 1.83827 17.9581 2.17811 18.2945C2.51794 18.6308 2.93878 18.8738 3.39996 19C5.11996 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0707 18.8668 21.498 18.6118 21.8386 18.2606C22.1792 17.9094 22.4212 17.4746 22.54 17C22.8523 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8572 8.1787 22.54 6.42V6.42Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 15.02L15.5 11.75L9.75 8.47998V15.02Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.instagram.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M17 2H7C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 22 7 22H17C19.7614 22 22 19.7614 22 17V7C22 4.23858 19.7614 2 17 2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 11.3698C16.1234 12.2021 15.9812 13.052 15.5937 13.7988C15.2062 14.5456 14.5931 15.1512 13.8416 15.5295C13.0901 15.9077 12.2384 16.0394 11.4077 15.9057C10.5771 15.7721 9.80971 15.3799 9.21479 14.785C8.61987 14.1901 8.22768 13.4227 8.09402 12.592C7.96035 11.7614 8.09202 10.9097 8.47028 10.1582C8.84854 9.40667 9.45414 8.79355 10.2009 8.40605C10.9477 8.01856 11.7977 7.8764 12.63 7.99981C13.4789 8.1257 14.2648 8.52128 14.8716 9.12812C15.4785 9.73496 15.8741 10.5209 16 11.3698Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.5 6.5H17.51" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://twitter.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M23 2.9998C22.0424 3.67528 20.9821 4.19191 19.86 4.5298C19.2577 3.83731 18.4573 3.34649 17.567 3.12373C16.6767 2.90096 15.7395 2.957 14.8821 3.28426C14.0247 3.61151 13.2884 4.1942 12.773 4.95352C12.2575 5.71283 11.9877 6.61214 12 7.5298V8.5298C10.2426 8.57537 8.50127 8.18561 6.93101 7.39525C5.36074 6.60488 4.01032 5.43844 3 3.9998C3 3.9998 -1 12.9998 8 16.9998C5.94053 18.3978 3.48716 19.0987 1 18.9998C10 23.9998 21 18.9998 21 7.4998C20.9991 7.22126 20.9723 6.9434 20.92 6.6698C21.9406 5.6633 22.6608 4.39251 23 2.9998V2.9998Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li></ul></footer><span href="/curso-react-pro"></span></main></div>
    <script async>
      window.page = {"image":"/thumbnail-article/10-praticas-recomendads-em-node-js-guia-para-iniciantes.png","status":200,"locale":"pt-BR","title":"10 Práticas Recomendadas em NodeJS: Guia para Iniciante - TipsCode","description":"Conheça ás 10 práticas recomendadas em NodeJS, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade."};
      window.instances = {"application":{},"n-0-0-0-0":{},"n-0-0-0-1":{},"n-0-0-0-2":{},"n-0-0-0-3":{},"n-0-0-9/10-praticas-recomendadas-em-nodejs-guia-para-iniciante":{"slug":"10-praticas-recomendadas-em-nodejs-guia-para-iniciante","content":"<p>Conheça ás 10 <strong><em>práticas recomendadas em NodeJS<\/em><\/strong>, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade.<\/p>\n<p>Vou lista um resumo de cada uma logo no inicio, para facilita sua leitura:<\/p>\n<p>1 . <strong>Use scripts npm<\/strong>. Pare de escrever scripts bash quando puder organizá-los melhor com scripts npm e Node. Por exemplo, <strong><em>npm run<\/em><\/strong> <strong><em>build<\/em><\/strong>, <strong><em>start<\/em><\/strong> e <strong><em>test<\/em><\/strong>. Os scripts do <strong>npm<\/strong> são fonte confiáveis para nós desenvolvedores do Node em nossos projeto.<\/p>\n<p>2 . Use env vars. Utilize <strong><em>process.env.NODE_ENV<\/em><\/strong> definindo como <strong><em>development<\/em><\/strong>, ou <strong><em>production<\/em><\/strong>. Alguns frameworks usarão essa variável também, portanto, siga a convenção.<\/p>\n<p>3 . <strong><em><a href=\"/event-loop-em-node-guia-completo/\">Entenda bem Event Loop<\/a><\/em><\/strong>: Veja bem as funções <strong><em>setImmediate()<\/em><\/strong> e <strong><em>nextTick()<\/em><\/strong>. Use sempre a função <strong><em>setImmediate()<\/em><\/strong> ou <strong><em>setTimeout()<\/em><\/strong> para descarregar tarefas intensivas de CPU para o próximo ciclo de loop de evento.<\/p>\n<p>4 . <strong><em>Use a herança funcional<\/em><\/strong>: Evite entrar em debate e na armadilha exagerada de depuração e compreensão da herança prototípica ou classes apenas usando a herança funcional como fazem alguns dos contribuidores do Node.<\/p>\n<p>5 . <strong><em>Nomeie as coisas apropriadamente<\/em><\/strong>: Dê nomes significativos que servirão como documentação. Além disso, sem nomes de arquivo com letras maiúsculas, procure sempre usa o ( - ) travessão se necessário. Letras maiúsculas em nomes de arquivo não apenas parecem estranhas, mas podem causar problemas de plataforma cruzada.<\/p>\n<p>6 . <strong><em>Forneça código nativo<\/em><\/strong>: Ao usar transpiladores, acaba comprometendo um pouco o código JS nativo (resultado das compilações) para que seus projetos possam ser executados sem as compilações.<\/p>\n<p>7 . Use gzip: <strong><em>npm i compression -S<\/em><\/strong> e registro lógico, nem muito nem pouco, dependendo do ambiente. <strong><em>npm i morgan -S<\/em><\/strong>.<\/p>\n<p>8 . <strong><em>Expanda<\/em>.<\/strong> Comece a pensar em armazenamento em cluster e em serviços sem estado desde o primeiro dia de desenvolvimento do Node. Use <strong><em>pm2<\/em><\/strong> ou controle de cluster do <strong><em>Strongloop<\/em><\/strong><\/p>\n<p>9 . <strong><em>Solicitações de cache<\/em><\/strong> - Obtenha o máximo dos seus servidores Node, ocultando-os atrás de um servidor de arquivo estático, como <strong><em>nginx<\/em><\/strong> e / ou cache de nível de solicitação, como <strong><em>Varnish<\/em><\/strong> Cache e cache CDN.<\/p>\n<p>Visto esse resumo, agora vamos percorrer por cada um desses itens de forma mais detalhadas.<\/p>\n<p><a href=\"/ebook-gratuito-html\"><img src=\"/uploads/2020/09/ebook-guia-completo-html.png\" alt=\"Ebook HTML\"><\/a><\/p>\n<p>Ebook HTML<\/p>\n<h2>1 . Use scripts NPM<\/h2>\n<p>A primeira práticas recomendadas em NodeJS é quase um padrão agora criar scripts npm para compilações, testes e, o mais importante, para iniciar uma aplicação. Este é o primeiro lugar que os desenvolvedores do Node olham quando encontram um novo projeto. Algumas pessoas ( 1 , 2 , 3 , 4 ) até trocaram Grunt, Gulp e outros pelo script npm de nível mais baixo, mas mais confiável. Eu posso entender totalmente o argumento deles. Considerando que os scripts npm têm ganchos pré e pós, você pode chegar a um nível muito sofisticado de automação:<\/p>\n<pre><code><span class=\"token string-property property\">\"scripts\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"preinstall\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"node prepare.js\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"postintall\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"node clean.js\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"build\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"webpack\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"postbuild\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"node index.js\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"postversion\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"npm publish\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Muitas vezes, ao desenvolver para o front-end, você deseja executar dois ou mais processos de observação para reconstruir seu código. Por exemplo, um para <strong><em>webpack<\/em><\/strong> e outro para <strong><em>nodemon<\/em><\/strong>. Você pode fazer isso com <strong><em>&amp;&amp;<\/em><\/strong> uma vez que o primeiro comando não libera o <strong><em>prompt<\/em><\/strong>. No entanto, há um módulo útil chamado <a href=\"https://www.npmjs.com/package/concurrently\" target=\"_blank\" rel=\"noopener\">concurrently<\/a> que pode gerar vários processos e executá-los ao mesmo tempo.<\/p>\n<p>Além disso, instale ferramentas de linha de comando dev, como <strong><em>webpack<\/em><\/strong>, <strong><em>nodemon<\/em><\/strong>, <strong><em>gulp<\/em><\/strong>, etc. localmente para evitar conflitos. Você pode apontar, <strong><em>./node_modules/.bin/gulp<\/em><\/strong> por exemplo, ou adicionar esta linha ao seu perfil <strong><em>bash / zsh (PATH!)<\/em><\/strong>:<\/p>\n<pre><code><span class=\"token keyword\">export<\/span> <span class=\"token constant\">PATH<\/span><span class=\"token operator\">=<\/span><span class=\"token string\">\"./node_modules/.bin:$PATH\"<\/span>\n<\/code><\/pre>\n<h2>2 . Use Env Vars - Variáveis de Ambientes<\/h2>\n<p>Utilize variáveis ​​de ambiente até mesmo para os estágios iniciais de um projeto para garantir que não haja vazamento de informações confidenciais e apenas para construir o código corretamente desde o início. Além disso, algumas bibliotecas e estruturas (eu sei que o Express faz isso com certeza) irão obter informações sobre como <strong><em>NODE_ENV<\/em><\/strong> modificar seu comportamento. Defina como <strong><em>production<\/em><\/strong>. Defina seus valores <strong><em>MONGO_URI<\/em><\/strong> e <strong><em>API_KEYtambém<\/em><\/strong>. Você pode criar um arquivo shell (por exemplo <strong><em>start.sh<\/em><\/strong>) e adicioná-lo a <strong><em>.gitignore:<\/em><\/strong><\/p>\n<pre><code><span class=\"token constant\">NODE_ENV<\/span><span class=\"token operator\">=<\/span>production <span class=\"token constant\">MONGO_URL<\/span><span class=\"token operator\">=<\/span>mongo<span class=\"token operator\">:<\/span><span class=\"token operator\">/<\/span><span class=\"token operator\">/<\/span>localhost<span class=\"token operator\">:<\/span><span class=\"token number\">3000<\/span><span class=\"token operator\">/<\/span>accounts <span class=\"token constant\">API_KEY<\/span><span class=\"token operator\">=<\/span>lolz nodemon index<span class=\"token punctuation\">.<\/span>js\n<\/code><\/pre>\n<p>O Nodemon também tem um arquivo de configuração onde você pode colocar seus env vars ( exemplo ):<\/p>\n<pre><code><span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"env\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token string-property property\">\"NODE_ENV\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"production\"<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token string-property property\">\"MONGO_URL\"<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"mongo://localhost:3000/accounts\"<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<h2>3 . Entenda o Event Loop<\/h2>\n<p>Outras Práticas Recomendadas em NodeJS. É entender bem o poderoso e inteligente ciclo de eventos é o que torna o Node tão rápido e brilhante, utilizando todo o tempo que seria perdido esperando a conclusão das tarefas de entrada e saída. Portanto, o Node é ótimo para otimizar sistemas vinculados a E / S.<\/p>\n<p>Se você precisa realizar algo que consome muita CPU (por exemplo, computação, hashing de senhas ou compactação), então, além de gerar novos processos para essas tarefas de CPU, você pode querer explorar o adiamento da tarefa com <strong><em>setImmediate()<\/em><\/strong> ou <strong><em>setTimeout()<\/em><\/strong> - o código em seus callbacks continuarão no próximo ciclo de loop de evento. <strong><em>nextTick()<\/em><\/strong> funciona no mesmo ciclo ao contrário do nome. Argh!<\/p>\n<p>Aqui está um diagrama de Bert Belder, que trabalhou no loop de eventos. Ele sabe claramente como funciona o loop de eventos!<\/p>\n<h2>4 . Use Herança Funcional<\/h2>\n<p><a href=\"/orientacao-objetos-javascript-um-guia-para-iniciante/\">JavaScript suporta herança prototípica<\/a> que ocorre quando os objetos herdam de outros objetos. O operador <strong><em>class<\/em><\/strong> foi adicionado à linguagem com na <a href=\"https://youtu.be/PlFlKxZbVqs\" target=\"_blank\" rel=\"noopener\">versão ES6<\/a>. No entanto, é abertamente complexo em comparação com a herança funcional. A maioria dos gurus do Node prefere a simplicidade do último. É implementado por um padrão de fábrica de função simples e NÃO requer o uso de <strong>prototype<\/strong>, <strong>new<\/strong> ou <strong>this<\/strong>. Não há efeitos implícitos quando você atualiza o protótipo (fazendo com que todas as instâncias sejam alteradas também), pois na herança funcional cada objeto usa sua própria cópia de métodos.<\/p>\n<p>Essas Práticas Recomendadas em NodeJS, vão com certeza fazer total diferença em seus projetos.<\/p>\n<p>Veja esse código criado por <strong><em>TJ Holowaychuk<\/em><\/strong>, um dev muito experiência que está envolvido com o projeto, Express, Mocha, Connect, Superagent e dezenas de outros módulos do Node. O Express usa herança funcional ( <a href=\"https://github.com/expressjs/express/blob/master/lib/express.js\" target=\"_blank\" rel=\"noopener\">código-fonte completo<\/a> ):<\/p>\n<pre><code>exports <span class=\"token operator\">=<\/span> module<span class=\"token punctuation\">.<\/span>exports <span class=\"token operator\">=<\/span> createApplication<span class=\"token punctuation\">;<\/span>\n<span class=\"token comment\">// ...<\/span>\n<span class=\"token keyword\">function<\/span> <span class=\"token function\">createApplication<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">var<\/span> <span class=\"token function-variable function\">app<\/span> <span class=\"token operator\">=<\/span> <span class=\"token keyword\">function<\/span><span class=\"token punctuation\">(<\/span><span class=\"token parameter\">req<span class=\"token punctuation\">,<\/span> res<span class=\"token punctuation\">,<\/span> next<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    app<span class=\"token punctuation\">.<\/span><span class=\"token function\">handle<\/span><span class=\"token punctuation\">(<\/span>req<span class=\"token punctuation\">,<\/span> res<span class=\"token punctuation\">,<\/span> next<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">;<\/span>\n\n  <span class=\"token function\">mixin<\/span><span class=\"token punctuation\">(<\/span>app<span class=\"token punctuation\">,<\/span> <span class=\"token class-name\">EventEmitter<\/span><span class=\"token punctuation\">.<\/span>prototype<span class=\"token punctuation\">,<\/span> <span class=\"token boolean\">false<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token function\">mixin<\/span><span class=\"token punctuation\">(<\/span>app<span class=\"token punctuation\">,<\/span> proto<span class=\"token punctuation\">,<\/span> <span class=\"token boolean\">false<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n  app<span class=\"token punctuation\">.<\/span>request <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">__proto__<\/span><span class=\"token operator\">:<\/span> req<span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">app<\/span><span class=\"token operator\">:<\/span> app <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">;<\/span>\n  app<span class=\"token punctuation\">.<\/span>response <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">__proto__<\/span><span class=\"token operator\">:<\/span> res<span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">app<\/span><span class=\"token operator\">:<\/span> app <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">;<\/span>\n  app<span class=\"token punctuation\">.<\/span><span class=\"token function\">init<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> app<span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Para ser objetivo, os módulos principais do Node usam muito a herança prototípica. Se você seguir esse padrão, certifique-se de saber como funciona.<\/p>\n<h2>5 . Tenha cuidado com os nomes das coisas<\/h2>\n<p>Este é óbvio. Bons nomes servem de documentação. Qual você prefere?<\/p>\n<pre><code><span class=\"token keyword\">const<\/span> dexter <span class=\"token operator\">=<\/span> <span class=\"token function\">require<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'morgan'<\/span><span class=\"token punctuation\">)<\/span>\n\napp<span class=\"token punctuation\">.<\/span><span class=\"token function\">use<\/span><span class=\"token punctuation\">(<\/span><span class=\"token function\">dexter<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'dev'<\/span><span class=\"token punctuation\">)<\/span>\n<\/code><\/pre>\n<p>Não tenho ideia do que <strong>dexter<\/strong> está fazendo quando apenas olho <strong>app.use()<\/strong>. Que tal um nome diferente e mais significativo:<\/p>\n<pre><code><span class=\"token keyword\">const<\/span> logger <span class=\"token operator\">=<\/span> <span class=\"token function\">require<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'morgan'<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">.<\/span>\napp<span class=\"token punctuation\">.<\/span><span class=\"token function\">use<\/span><span class=\"token punctuation\">(<\/span><span class=\"token function\">logger<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'dev'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span> \n<\/code><\/pre>\n<p>Da mesma forma, os nomes dos arquivos devem refletir corretamente qual é o propósito do código interno. Se você der uma olhada na lib pasta do Node ( <a href=\"https://github.com/nodejs/node/tree/master/lib\" target=\"_blank\" rel=\"noopener\">link do GitHub<\/a> ) que tem todos os módulos principais empacotados com a plataforma, você verá uma nomenclatura clara dos arquivos / módulos (mesmo se você não estiver muito familiarizado com todos os módulos principais) :<\/p>\n<pre><code>events<span class=\"token punctuation\">.<\/span>js\nfs<span class=\"token punctuation\">.<\/span>js\nhttp<span class=\"token punctuation\">.<\/span>js\nhttps<span class=\"token punctuation\">.<\/span>js\nmodule<span class=\"token punctuation\">.<\/span>js\nnet<span class=\"token punctuation\">.<\/span>js\nos<span class=\"token punctuation\">.<\/span>js\npath<span class=\"token punctuation\">.<\/span>js\nprocess<span class=\"token punctuation\">.<\/span>js\npunycode<span class=\"token punctuation\">.<\/span>js\nquerystring<span class=\"token punctuation\">.<\/span>js\n<\/code><\/pre>\n<p>Os módulos internos são marcados com um sublinhado ( <strong><em>_debugger.js<\/em><\/strong>, <strong><em>_http_agent.js<\/em><\/strong>, <strong><em>_http_client.js<\/em><\/strong>), assim como métodos e variável no código. Isso ajuda a alertar os desenvolvedores de que esta é uma interface interna e, se você a estiver usando, estará por conta própria - não reclame se ela for refeita ou mesmo removida.<\/p>\n<h2>7 .Conheça bem o Express<\/h2>\n<p><img src=\"/uploads/2020/10/expressjs-1024x568.jpg\" alt=\"Práticas Recomendadas em NodeJS - Express JS\"><\/p>\n<p>Express é um framework excelente e muito maduro. Assim, você precisa saber o middleware mais usado e como usá-lo. <a href=\"https://youtu.be/t4y9AFY9mmI\" target=\"_blank\" rel=\"noopener\">Veja esse conteúdo que está lá em nosso canal do Youtube<\/a>. Tenho os principais módulos de middleware listados lá. Por exemplo, <strong><em>npm i compression -S<\/em><\/strong> irá reduzir a velocidade de download, esvaziando as respostas. <strong>logger('tiny')<\/strong> ou <strong>logger('common')<\/strong> fornecerá menos (dev) ou mais (prod) logs, respectivamente.<\/p>\n<h2>8 . Aumentar a Escalabilidade<\/h2>\n<p>O Node é ótimo em assíncrono devido a sua E / S sem bloqueio e mantém essa forma assíncrona de codificação simples porque há apenas um thread. Esta é uma oportunidade para começar a dimensionar logo no início, talvez até com as primeiras linhas de código. Existe o <strong>módulo cluster<\/strong> principal que permitirá que você dimensione verticalmente sem muitos problemas. No entanto, uma maneira ainda melhor seria usar uma ferramenta como o <a href=\"http://pm2.keymetrics.io/\" target=\"_blank\" rel=\"noopener\">pm2<\/a>.<\/p>\n<p>Sem dúvida essas Práticas Recomendadas em NodeJS, a escalabilidade é uma das mais impotantes.<\/p>\n<p>Por exemplo, é assim que você pode começar com pm2:<\/p>\n<pre><code>npm i <span class=\"token operator\">-<\/span>g pm2\n<\/code><\/pre>\n<p>Então você pode iniciar quatro instâncias do mesmo servidor:<\/p>\n<pre><code>pm2 start server<span class=\"token punctuation\">.<\/span>js <span class=\"token operator\">-<\/span>i <span class=\"token number\">4<\/span>\n<\/code><\/pre>\n<p>Para Docker, o pm2 versão 2+ possui pm2-docker. Portanto, seu Dockerfile pode ter a seguinte aparência:<\/p>\n<pre><code># <span class=\"token operator\">...<\/span>\n\n<span class=\"token constant\">RUN<\/span> npm install pm2 <span class=\"token operator\">-<\/span>g\n\n<span class=\"token constant\">CMD<\/span> <span class=\"token punctuation\">[<\/span><span class=\"token string\">\"pm2-docker\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">\"app.js\"<\/span><span class=\"token punctuation\">]<\/span>\n<\/code><\/pre>\n<p>A imagem oficial do Alpine Linux pm2 está no <a href=\"https://hub.docker.com/r/keymetrics/pm2-docker-alpine/\" target=\"_blank\" rel=\"noopener\">Docker Hub<\/a>.<\/p>\n<h2>9 . Solicitações de cache<\/h2>\n<p>Esta é uma prática recomendada de DevOps que permitirá que você obtenha mais energia de suas instâncias de Node (você obtém mais de uma com pm2 ou algo semelhante, veja acima). O caminho a seguir é permitir que os servidores Node façam coisas de aplicativos como fazer solicitações, processar dados e executar lógica de negócios e descarregar o tráfego para arquivos estáticos em outro servidor web, como Apache httpd ou Nginx. Novamente, você provavelmente deve usar o Docker para a configuração:<\/p>\n<pre><code><span class=\"token constant\">FROM<\/span> nginx\n\n<span class=\"token constant\">COPY<\/span> nginx<span class=\"token punctuation\">.<\/span>conf <span class=\"token operator\">/<\/span>etc<span class=\"token operator\">/<\/span>nginx<span class=\"token operator\">/<\/span>nginx<span class=\"token punctuation\">.<\/span>conf\n<\/code><\/pre>\n<p>Eu gosto de usar o Docker Compose para fazer vários contêineres (nginx, Node, Redis, MongoDB) funcionarem entre si. Por exemplo:<\/p>\n<pre><code><span class=\"token literal-property property\">web<\/span><span class=\"token operator\">:<\/span>\n  <span class=\"token literal-property property\">build<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">.<\/span><span class=\"token operator\">/<\/span>app\n  <span class=\"token literal-property property\">volumes<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> <span class=\"token string\">\"./app:/src/app\"<\/span>\n  <span class=\"token literal-property property\">ports<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> <span class=\"token string\">\"3030:3000\"<\/span>\n  <span class=\"token literal-property property\">links<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> <span class=\"token string\">\"db:redis\"<\/span>\n  <span class=\"token literal-property property\">command<\/span><span class=\"token operator\">:<\/span> pm2<span class=\"token operator\">-<\/span>docker app<span class=\"token operator\">/<\/span>server<span class=\"token punctuation\">.<\/span>js\n\n<span class=\"token literal-property property\">nginx<\/span><span class=\"token operator\">:<\/span>\n  <span class=\"token literal-property property\">restart<\/span><span class=\"token operator\">:<\/span> always\n  <span class=\"token literal-property property\">build<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">.<\/span><span class=\"token operator\">/<\/span>nginx<span class=\"token operator\">/<\/span>\n  <span class=\"token literal-property property\">ports<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> <span class=\"token string\">\"80:80\"<\/span>\n  <span class=\"token literal-property property\">volumes<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> <span class=\"token operator\">/<\/span>www<span class=\"token operator\">/<\/span><span class=\"token keyword\">public<\/span>\n  <span class=\"token literal-property property\">volumes_from<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> web\n  <span class=\"token literal-property property\">links<\/span><span class=\"token operator\">:<\/span>\n    <span class=\"token operator\">-<\/span> web<span class=\"token operator\">:<\/span>web\n\n<span class=\"token literal-property property\">db<\/span><span class=\"token operator\">:<\/span>\n  <span class=\"token literal-property property\">image<\/span><span class=\"token operator\">:<\/span> redis\n<\/code><\/pre>\n<h2>Conclusões<\/h2>\n<p>Hoje em dia e na era do software de código aberto, não há desculpas para não aprender com o código testado e confiável que está disponível. Você não precisa estar no círculo interno para entrar. O aprendizado nunca para e tenho certeza que em breve teremos diferentes práticas recomendadas com base nos fracassos e sucessos que experimentaremos. Eles são garantidos.<\/p>\n<p>Vejo como mais e mais pessoas perseguem a próxima nova estrutura ou linguagem. É a síndrome do objeto brilhante. Eles aprendem uma nova biblioteca a cada semana e uma nova estrutura a cada mês. Eles verificam compulsivamente o Twitter, Reddit, Hacker News e JS Weekly. Eles usam o nível esmagador de atividade do mundo JavaScript para procrastinar. Eles têm históricos GitHub públicos vazios.<\/p>\n<p>Aprender coisas novas é bom, mas não confunda com realmente construir coisas. O que importa e o que paga seu salário é, na verdade, construir coisas. Pare de engenharia . Você não está construindo o próximo Facebook.<\/p>\n<p>A melhor prática final é usar as melhores práticas e o melhor dos melhores é dominar os fundamentos.<\/p>\n<h3>Recomendação de Treinamento FullStack JavaScript<\/h3>\n","date":"2020-10-26T00:00:00.000Z","readingTime":11,"title":"10 Práticas Recomendadas em NodeJS: Guia para Iniciante","categories":["nodejs"],"description":"Conheça ás 10 práticas recomendadas em NodeJS, estas práticas são bem vistas por toda a comunidade de back-end e são de extrema importância você como estudando do Node conheça-las, foi por esse motivo da publicação desse artigo aqui no TipsCode, vejo poucos matérias nesse sentido em nossa comunidade.","imgArticle":"/thumbnail-article/10-praticas-recomendads-em-node-js-guia-para-iniciantes.png","imgHome":"/thumbnail-home/10-praticas-recomendads-em-node-js-guia-para-iniciantes.png"},"n-0-0-9-0-0":{"expanded":false},"n-0-0-9-0-0-0-0-0-0-1-0":{}};
      window.environment = {"client":false,"server":true,"development":false,"production":true,"mode":"ssg","key":"60da8213d3ebd5e9d2d0009172a915340d93cebf"};
      window.settings = {};
      window.worker = {"enabled":true,"fetching":false,"preload":[],"headers":{},"api":"","cdn":"","protocol":"https","queues":{},"online":true,"responsive":true};
      window.params = {"slug":"10-praticas-recomendadas-em-nodejs-guia-para-iniciante"};
      window.project = {"domain":"tipscode.com.br","name":"TipsCode","color":"#D22365","type":"website","display":"standalone","orientation":"portrait","scope":"/","root":"/","sitemap":true,"favicon":"/favicon-96x96.png","disallow":[],"icons":{"72":"/icon-72x72.png","96":"/icon-96x96.png","128":"/icon-128x128.png","144":"/icon-144x144.png","152":"/icon-152x152.png","180":"/icon-180x180.png","192":"/icon-192x192.png","384":"/icon-384x384.png","512":"/icon-512x512.png"}};
      window.context = {};
      document.addEventListener('DOMContentLoaded', () => {
        const script = window.document.createElement('script');
        script.src = '/nullstack/60da8213d3ebd5e9d2d0009172a915340d93cebf/client.js';
        script.integrity = '';
        script.crossOrigin = 'anonymous';
        document.body.append(script);
      });
    </script>
  </body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Created with Nullstack - https://nullstack.app" />
    <title>MongoDB – Guia para Iniciantes Passo a Passo - TipsCode</title>
    <meta property="og:image" content="https://tipscode.com.br/thumbnail-article/mongodb-para-iniciantes.png">
    <meta property="og:description" content="Eeste artigo é para iniciantes, vou demonstrar como instalar o Mongodb e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o MySQL) ao longo do artigo.">
    <meta name="description" content="Eeste artigo é para iniciantes, vou demonstrar como instalar o Mongodb e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o MySQL) ao longo do artigo.">
    <meta property="og:title" content="MongoDB – Guia para Iniciantes Passo a Passo - TipsCode">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="TipsCode">
    <meta property="og:url" content="https://tipscode.com.br/mongodb-guia-completo-para-iniciante">
    <link rel="canonical" href="https://tipscode.com.br/mongodb-guia-completo-para-iniciante">
    <meta property="og:locale" content="pt-BR">
    <link rel="shortcut icon" href="/favicon-96x96.png" type="image/png">
    <link rel="icon" href="/favicon-96x96.png" type="image/png">
    <link rel="manifest" href="/manifest.json" integrity="">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="TipsCode">
    <meta name="apple-mobile-web-app-title" content="TipsCode">
    
    <meta name="msapplication-starturl" content="/">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/nullstack/2888fbeda7229ecb9c66d3b37f8671275e2844bf/client.css" integrity="" crossorigin="anonymous">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">
    <meta name="msapplication-TileColor" content="#D22365">
    <link href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  </head>
  <body>
    <div id="application"><main class="bg-tips-light"><div><!----><!----><script async src="https://www.googletagmanager.com/gtag/js?id=AW-641358523"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120538403-3"></script></div><!-- --><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><header class="fixed w-full bg-white top-0 left-0 z-50 h-20"><div class="max-w-screen-xl mx-auto px-4 flex justify-between items-center flex-wrap py-4"><div class="w-full sm:w-auto justify-between sm:justify-self-start sm:px-0 items-center flex"><a href="/"><img src="/tipscode-logo-1.svg" alt="TipsCode" width="155" height="44"/></a><span class="flex items-center sm:hidden"><svg height="20" class="text-tips-gray-dark text-opacity-60" viewBox="0 0 512 512"><!----><!----><rect x="10" y="10" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="411.5957" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect><rect x="10" y="210.7979" width="492" height="90.4043" rx="17.383" stroke-width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"></rect></svg></span></div><nav class="flex items-center flex-wrap sm:px-0 mt-2 sm:mt-0 z-50 bg-white hidden sm:flex"><a href="/" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Home <!--#--></a><a href="/artigos" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Blog <!--#--></a><a href="/ebook-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> E-book Gratuito <!--#--></a><a href="/mini-curso-gratuito" class="w-full sm:w-auto text-tips-gray-dark border-b sm:border-0 border-gray-100 p-2 font-lg hover:text-tips-blue items-center flex"> Mini-Curso Gratuito <!--#--></a></nav><div class="flex w-full sm:w-auto mt-4 sm:mt-0 hidden sm:flex"><a href="/curso-fullstack-turbo" class="bg-tips-blue text-white px-3 py-2 border border-tips-blue rounded hover:bg-white hover:text-tips-blue w-full sm:w-auto">Full-Stack Turbo<!--#--></a></div></div></header><div class="h-20"></div><div class="max-w-screen-xl mx-auto sm:m-auto sm:text-justify px-4 py-16"><article><h1 class="font-bold text-4xl text-left sm:text-left"> <!--#-->MongoDB – Guia para Iniciantes Passo a Passo<!--#--> <!--#--></h1><figure class="mt-10"><img width="1242" src="/thumbnail-article/mongodb-para-iniciantes.png"/><ficaption><!----></ficaption></figure><div class="mt-10 prose max-w-none"><p>Eeste artigo é para <strong>iniciantes</strong>, vou demonstrar como instalar o <em><strong>Mongodb</strong></em> e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o <strong><em>MySQL</em></strong>) ao longo do artigo.</p>
<h2>O que é MongoDB?</h2>
<p><img src="/uploads/2020/05/problematica-png-1.png" alt="mongodb"></p>
<p>Figura 01: o que é mongodb</p>
<p>O MongoDB é um banco de dados orientado a documentos. Isso significa que ele não usa tabelas e linhas para armazenar seus dados, mas coleções de documentos semelhantes ao <strong><em>JSON</em></strong>. Esses documentos suportam campos incorporados, para que os dados relacionados possam ser armazenados dentro deles.</p>
<p>O <strong><em>MongoDB</em></strong> também é um banco de dados sem esquema, portanto, não precisamos especificar o número ou o tipo de coluna antes de inserir nossos dados.</p>
<p>Aqui está um exemplo de como pode ser um documento do MongoDB:</p>
<pre><code><span class="token punctuation">{</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span>3da252d3902a<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"Artigo-blog"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"MongoDB - Guia para Iniciantes Passo a Passo"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">"Alisson Suassuna"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"mongodb"</span><span class="token punctuation">,</span> <span class="token string">"javascript"</span><span class="token punctuation">,</span> <span class="token string">"node"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">categories</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"javascript"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">"Artigo focando em iniciantes "</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"databases"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">"Tutorial para aqueles que querem aprender"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"O MongoDB é um banco de dados NoSQL multiplataforma, de código aberto"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Como você pode ver, o documento possui vários campos ( <strong><em>type, title</em></strong> etc.), que armazenam valores (“<strong><em>MongoDB</em></strong> – Guia para Iniciantes Passo a Passo” etc.). Esses valores podem conter cadeias, números, matrizes, matrizes de sub-documentos (por exemplo, o <strong><em>categories</em></strong> campo), coordenadas geográficas e muito mais.</p>
<p>O <strong>_id</strong> nome do campo está reservado para uso como chave primária. Seu valor deve ser único na coleção, e é imutável e pode ser de qualquer tipo que não seja uma matriz.</p>
<p>Dica: para aqueles que querem saber o que significa “<strong><em>JSON</em></strong>”, o Mongodb usa internamente algo chamado <strong><em>BSON</em></strong> (abreviação de <strong><em>JSON binário</em></strong>). Na prática, você realmente não precisa saber muito sobre o <strong><em>BSON</em></strong> ao trabalhar com o <strong><em>MongoDB</em></strong>.</p>
<p>Como você pode imaginar, um documento em um banco de dados <strong><em>NoSQL</em></strong> corresponde a uma linha em um banco de dados <strong><em>SQL</em></strong>. Um grupo de documentos juntos é conhecido como uma coleção, que é aproximadamente sinônimo de uma tabela em um banco de dados relacional.</p>
<p>Aqui está uma tabela que resume os diferentes termos:</p>
<p><img src="/uploads/2020/06/diferenças-sql-mongodb.png" alt="mongodb"></p>
<p>Se você está iniciando um novo projeto e está buscando aprender mais sobre o <strong><em>mongodb</em></strong>, te recomendo esse <a href="/programador-fullstack-8-semanas">treinamento completo</a> nele você vai aprender toda a base sobre todo o ecossistema JavaScript. <a href="/programador-fullstack-8-semanas">Clique aqui para ver</a></p>
<h2>Instalando o MongoDB</h2>
<p><img src="/uploads/2020/06/instalando-no-pc-1.jpg" alt=""></p>
<p>Nota: se você não quiser instalar nada no seu pc neste momento não tem problema, existem alguns serviços online que você pode usar. O Mongo playground, por exemplo, é um <strong><em>sandbox</em></strong> simples para testar e compartilhar consultas do <strong><em>MongoDB</em></strong> online.</p>
<p>O <strong><em>MongoDB</em></strong> vem em várias edições. O que nos interessa é a <strong><em>MongoDB Community Edition.</em></strong></p>
<p>A página inicial do projeto possui excelente documentação sobre a instalação do Mongo, e não tentarei replicá-la aqui. Em vez disso, vou mostrar os links para instruções para cada um dos principais sistemas operacionais:</p>
<ul>
<li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/" target="_blank" rel="noopener">Instalar no Windows.</a></li>
<li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/" target="_blank" rel="noopener">Instalar no MacOS.</a></li>
<li><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener">Instalar no Ubuntu</a></li>
</ul>
<p>Se você usa uma versão do Linux não baseada no Ubuntu, pode verificar <a href="https://docs.mongodb.com/manual/installation/#mongodb-community-edition-installation-tutorials" target="_blank" rel="noopener">esta página</a> para obter instruções de instalação para outras distribuições. O MongoDB também está normalmente disponível nos canais oficiais de software Linux, mas às vezes isso gera uma versão desatualizada.</p>
<h3>Configurações pós-instalação</h3>
<p>Depois de instalar o MongoDB para o seu sistema, você poderá encontrar este erro:</p>
<pre><code><span class="token function">dbpath</span> <span class="token punctuation">(</span><span class="token operator">/</span>data<span class="token operator">/</span>db<span class="token punctuation">)</span> does not exist<span class="token punctuation">.</span>
 Create <span class="token keyword">this</span> directory or give existing directory <span class="token keyword">in</span> <span class="token operator">--</span>dbpath<span class="token punctuation">.</span>
 See http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>dochub<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>org<span class="token operator">/</span>core<span class="token operator">/</span>startingandstoppingmongo
</code></pre>
<p>Isso significa que o Mongodb não pode encontrar (ou acessar) o diretório usado para armazenar seus bancos de dados. Para resolve esse pequeno problema faça o seguinte:</p>
<pre><code>sudo mkdir <span class="token operator">-</span>p <span class="token operator">/</span>data<span class="token operator">/</span>db
sudo chown <span class="token operator">-</span><span class="token constant">R</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">id -un</span><span class="token template-punctuation string">`</span></span> <span class="token operator">/</span>data<span class="token operator">/</span>db
</code></pre>
<p><a href="/mini-curso-construindo-seu-jogo-em-javascript/"><img src="/uploads/2020/06/MiniCurso-CTA-blog.png" alt="Criando Jogo"></a></p>
<p>Curso Grátis</p>
<p>O primeiro comando cria o diretório data/db O segundo define permissões para que o Mongodb possa gravar nesse diretório.</p>
<h3>Instalando a Interface Gráfica</h3>
<p>Usaremos a linha de comando neste artigo, mas o MongoDB também oferece uma ferramenta chamada Compass para conectar e gerenciar seus bancos de dados usando uma GUI.</p>
<p>Se você estiver no Windows, o Compass pode ser instalado como parte da instalação principal do Mongo (basta selecionar a opção apropriada no assistente). <a href="https://docs.mongodb.com/compass/master/install/" target="_blank" rel="noopener">Caso contrário, você pode baixar o Compass para o seu respectivo sistema operacional aqui.</a></p>
<p>Veja como ele é:</p>
<p><img src="/uploads/2020/06/Connections-tvttrij9h5-1024x706.png" alt="mongodb"></p>
<h3>Mongodb - Shell</h3>
<p>Para fazer o teste da instalação, abra abrindo o terminal. Você pode fazer isso abrindo uma janela do terminal e digitando o comando mongo.</p>
<p>Nota: assumindo que o mongodb está instalado no diretório /bin. Se, por algum motivo, não for esse o caso, mude para o diretório /bin e execute o comando novamente.</p>
<p>Se você receber um Error: couldn’t connect to server erro, você vai precisar parar e iniciar o servidor Mongo (em uma segunda janela de terminal) com o mesmo comando mongod.</p>
<p>Quando estiver no terminal, digite db.version() para ver a versão do MongoDB em execução.</p>
<p>Observe que você pode sair do terminal executando quit() o daemon Mongo pressionando Ctrl+ C a qualquer momento.</p>
<p>Agora vamos nos familiarizar com alguns conceitos básicos do MongoDB.</p>
<h3>Operações básicas</h3>
<p>Digite no terminal se você ainda não o fez (digitando mongo em um terminal):</p>
<pre><code><span class="token punctuation">[</span>mj@localhost <span class="token operator">~</span><span class="token punctuation">]</span>$ mongo
MongoDB shell version v4<span class="token punctuation">.</span><span class="token number">2.2</span>
connecting to<span class="token operator">:</span> mongodb<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">27017</span><span class="token operator">/</span><span class="token operator">?</span>compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span>gssapiServiceName<span class="token operator">=</span>mongodb
Implicit session<span class="token operator">:</span> session <span class="token punctuation">{</span> <span class="token string-property property">"id"</span> <span class="token operator">:</span> <span class="token constant">UUID</span><span class="token punctuation">(</span><span class="token string">"08a624a0-b330-4233-b56b-1d5b15a48fea"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version<span class="token operator">:</span> <span class="token number">4.2</span><span class="token number">.2</span>
</code></pre>
<p>Vamos começar criando um banco de dados para trabalhar. Para criar um banco de dados, o MongoDB possui comando use DATABASE_NAME</p>
<pre><code><span class="token operator">></span> use exampledb
switched to db exampledb
</code></pre>
<p>Para exibir todos os bancos de dados existentes, use o comando show dbs:</p>
<pre><code><span class="token operator">></span> show dbs

admin          <span class="token number">0</span><span class="token punctuation">.</span>000GB
config         <span class="token number">0</span><span class="token punctuation">.</span>000GB
local          <span class="token number">0</span><span class="token punctuation">.</span>000GB
</code></pre>
<p>O exampledb não está na lista porque precisamos inserir pelo menos um documento no banco de dados. Para inserir um documento, você pode usar o comando db.COLLECTION_NAME.insertOne({“key”:”value”}). Aqui está um exemplo:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Suassuma"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token string-property property">"insertedId"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5a53Ds43b223034Ds238daaec"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>O MongoDB cria automaticamente uma nova coleção users e insere um documento com o par chave-valor ‘name’:’Suassuna’. O ObjectId retornado é o ID do documento inserido. O MongoDB cria um Object Id exclusivo para cada documento na criação e se torna o valor padrão do campo _id.</p>
<p>Agora poderemos ver nosso banco de dados:</p>
<pre><code><span class="token operator">></span>show dbs
admin          <span class="token number">0</span><span class="token punctuation">.</span>000GB
config         <span class="token number">0</span><span class="token punctuation">.</span>000GB
exampledb      <span class="token number">0</span><span class="token punctuation">.</span>000GB
local          <span class="token number">0</span><span class="token punctuation">.</span>000GB
</code></pre>
<p>Da mesma forma, você pode confirmar que a coleção foi criada usando o comando show collections:</p>
<pre><code><span class="token operator">></span> show collections
users
</code></pre>
<p>Criamos um banco de dados, adicionamos uma coleção com o nome user se inserimos um documento nele. Agora vamos apagar. Para descartar um banco de dados existente, use o comando dropDatabase(), como exemplificado abaixo:</p>
<pre><code><span class="token operator">></span>db<span class="token punctuation">.</span><span class="token function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">"dropped"</span> <span class="token operator">:</span> <span class="token string">"exampledb"</span><span class="token punctuation">,</span> <span class="token string-property property">"ok"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre>
<p><strong><em>show dbs</em></strong> confirma que o banco de dados foi realmente deletado use o comando <strong><em>show dbs</em></strong></p>
<pre><code><span class="token operator">></span> show dbs
admin          <span class="token number">0</span><span class="token punctuation">.</span>000GB
config         <span class="token number">0</span><span class="token punctuation">.</span>000GB
local          <span class="token number">0</span><span class="token punctuation">.</span>000GB
</code></pre>
<p>Para mais operações de banco de dados, consulte a página da documentação do MongoDB nos comandos do banco de dados. E caso você queira fazer um treinamento completo com bem mais detalhes clique aqui</p>
<h2>Gerenciamento de Usuários</h2>
<p>Até agora você já deve ter notado que o MongoDB não vem com nenhum tipo de controle de acesso ativado.</p>
<p>Embora não seja necessário fornecer um nome de usuário e senha para o desenvolvimento, é algo que você deve alterar ao usar o Mongodb na produção.</p>
<p>Aqui estão as etapas para criar um usuário de banco de dados com privilégios completos de leitura / gravação:</p>
<ul>
<li>Verifique se você iniciou o servidor Mongo sem nenhum tipo de controle de acesso (geralmente digitando mongod);</li>
<li>Abra um shell digitando mongo.</li>
<li>No shell, adicione um usuário com a readWritefunção ao exampledbbanco de dados. Isso solicitará que você digite uma senha. Obviamente, substitua “manjunath” pelo seu nome de usuário desejado:</li>
</ul>
<pre><code>use exampledb
   db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">"alissonsuassuna"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token function">passwordPrompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">"readWrite"</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre>
<ul>
<li>Saia do shell Mongo.</li>
<li>Desligue o servidor Mongo e reinicie-o usando mongod –auth. Os clientes que se conectam a esta instância agora devem se autenticar.</li>
<li>Reabra o shel e rode o comando: mongo –authenticationDatabase “exampledb” -u “manjunath” -p. Agora você será solicitado a fornecer sua senha.</li>
</ul>
<p>Para mais informações, consulte a <a href="https://docs.mongodb.com/manual/tutorial/enable-authentication/" target="_blank" rel="noopener">documentação</a>.</p>
<h2>MongoDB - CRUD</h2>
<p>Como você já deve saber, a sigla <strong><em>CRUD</em></strong> significa a letra C é Create(criar), R read(Leitura), U update(Atualizar), e D delete(apagar). Estas são as quatro operações básicas do banco de dados que você não pode evitar ao criar qualquer aplicação. Por exemplo, qualquer aplicação moderno terá a capacidade de criar um novo usuário, ler os dados do usuário, atualizar as informações do usuário e, se necessário, excluir a conta do usuário. Vamos fazer isso no nível do banco de dados usando o MongoDB.</p>
<h3>Criar</h3>
<p>Criação é o mesmo que inserir um documento em uma coleção. Na seção anterior, inserimos um único documento usando a comando db.collection.insertOne(). Existe outro comando chamado db.collection.insertMany() que permite inserir vários documentos ao mesmo tempo. Veja o exemplo:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>document</span> <span class="token attr-name">1</span><span class="token punctuation">></span></span> <span class="token punctuation">,</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>document</span> <span class="token attr-name">2</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p>Vamos criar uma coleção users e preenchê-la com alguns usuários reais:</p>
<pre><code><span class="token operator">></span> use exampledb
<span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Alisson"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">"alisson@example.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Ana"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token string">"ana@example.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Dani"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">"dani@example.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Hecto"</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token string">"hecto@example.com"</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
   <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token string-property property">"insertedIds"</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa56ff"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5700"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5701"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5702"</span><span class="token punctuation">)</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>O método insertMany aceita um array de objetos e, em troca, obtemos um array de ObjectId s.</p>
<h3>Leitura</h3>
<p>Uma operação de leitura é usada para recuperar um documento ou vários documentos de uma coleção. A sintaxe para a operação de leitura é a seguinte:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> projection<span class="token punctuation">)</span>
</code></pre>
<p>Para recuperar todos os documentos do usuário, você pode fazer o seguinte:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa56ff"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Alisson"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"alisson@example.com"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5700"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Ana"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"ana@example.com"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5701"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Dani"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"dani@example.com"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5702"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Hecto"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"hecto@example.com"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Isso corresponde à um SELECT * FROM USERS consulta para um banco de dados SQL.</p>
<p>O método pretty é um método de cursor, e existem muitos outros também. Você pode encadear esses métodos para modificar sua consulta e os documentos retornados pela consulta.</p>
<p>Talvez você precise filtrar consultas para retornar um subconjunto da coleção – como encontrar todos os usuários abaixo de 30. Você pode modificar a consulta desta forma:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa56ff"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Alisson"</span><span class="token punctuation">,</span> <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"alisson@example.com"</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e25bb58ba0cf16476aa5701"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Ana"</span><span class="token punctuation">,</span> <span class="token string-property property">"age"</span> <span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"ana@example.com"</span> <span class="token punctuation">}</span>
</code></pre>
<p>Neste exemplo, $lt é um operador de filtro de consulta que seleciona documentos cujo o valor age do campo é menor que 30. Existem muitos filtros de comparação e de consulta lógica disponíveis. Você pode ver a lista inteira na documentação do seletor de consultas .</p>
<p>Nota: No Mongo, você pode replicar o comando like muito usado no SQL usando um regex. Por exemplo, SELECT * FROM users WHERE name LIKE ‘Ana%’ traduz para db.users.find({ name: /Ana.*/ }). Caso não saiba o que são regex, temos um artigo completo</p>
<h3>Atualizar</h3>
<p>Uma operação de atualização modifica documentos em uma coleção. Semelhante à operação de criação, o MongoDB oferece vários métodos para atualizar um documento. Por exemplo:</p>
<ul>
<li>db.collection.updateOne(,&lt;filter&gt;, &lt;update&gt;, &lt;options&gt; )</li>
<li>db.collection.updateMany(,&lt;filter&gt;, &lt;update&gt;, &lt;options&gt; )</li>
</ul>
<p>Se você precisar adicionar um campo extra – por exemplo registration – a todos os documentos existentes em uma coleção, poderá fazer algo assim:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">registration</span><span class="token operator">:</span> <span class="token string">"incomplete"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-property property">"matchedCount"</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string-property property">"modifiedCount"</span> <span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
</code></pre>
<p>O primeiro argumento é um objeto vazio, porque queremos atualizar todos os documentos da coleção. O $set é um operador de atualização que define o valor de um campo com o valor especificado. Você pode verificar se o campo extra foi adicionado usando db.users.find().</p>
<p>Para atualizar o valor dos documentos que correspondem a determinados critérios, o comando updateMany() aceita um objeto de filtro como seu primeiro argumento. Por exemplo, você pode querer substituir o valor registration para complete para todos os usuários que são 18+ idade. Aqui está o que você pode fazer:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token literal-property property">$gt</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">registration</span><span class="token operator">:</span> <span class="token string">"complete"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span> <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-property property">"matchedCount"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string-property property">"modifiedCount"</span> <span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
</code></pre>
<p>Para atualizar os detalhes do registro de um único usuário, você pode fazer o seguinte:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>
 <span class="token punctuation">{</span><span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">"tom@example.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">registration</span><span class="token operator">:</span> <span class="token string">"complete"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span> <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-property property">"matchedCount"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">"modifiedCount"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre>
<h3>Deletar</h3>
<p>Para excluir um documento, você pode usar o método db.collection.deleteOne(, ) e, para excluir vários documentos, você pode usar o método db.collection.deleteMany(, ).</p>
<p>Para excluir documentos com base em determinados critérios, você pode usar os operadores de filtro que usamos para a operação de leitura e atualização:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>
 <span class="token punctuation">{</span><span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">"alisson@example.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">"dormant"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span> <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-property property">"matchedCount"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">"modifiedCount"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>

<span class="token operator">></span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"dormant"</span><span class="token punctuation">,</span> <span class="token string">"inactive"</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>

<span class="token punctuation">{</span> <span class="token string-property property">"acknowledged"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-property property">"deletedCount"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre>
<pre><code>Isso exclui todos os documentos com status “inativo” ou “inativo”<span class="token punctuation">.</span>
</code></pre>
<h2>Validação</h2>
<p>No início deste artigo, quando eu disse que o Mongo é um banco de dados sem esquema, eu estava simplificando um pouco.</p>
<p>Ele é sem esquema, na medida em que não é necessário especificar o número ou tipo de colunas antes de inserir os nossos dados. No entanto, também é possível definir um esquema JSON e usá-lo para impor regras de validação para nossos dados.</p>
<p>Vamos criar uma coleção validatedUsers, onde podemos usar a validator construção para especificar que a name é obrigatório e que um email campo corresponde a um determinado padrão:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">"validatedUsers"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">validator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$jsonSchema</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"email"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">"must be a string and is required"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token string">"^.+\@.+$"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">"must be a valid email and is required"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span> <span class="token string-property property">"ok"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre>
<p>Agora, se tentarmos inserir dados incorretos, receberemos um erro de validação:</p>
<pre><code><span class="token operator">></span> db<span class="token punctuation">.</span>validatedUsers<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"duce"</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">"not-an-email"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token number">2020</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>22T09<span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">56.918</span><span class="token operator">+</span><span class="token number">0100</span> <span class="token constant">E</span>  <span class="token constant">QUERY</span>    <span class="token entity named-entity" title="&lsqb;">&amp;lsqb;</span>js<span class="token punctuation">]</span> uncaught exception<span class="token operator">:</span> <span class="token function">WriteError</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">"index"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string-property property">"code"</span> <span class="token operator">:</span> <span class="token number">121</span><span class="token punctuation">,</span>
  <span class="token string-property property">"errmsg"</span> <span class="token operator">:</span> <span class="token string">"Document failed validation"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"op"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e280e5847eb18010666530c"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Jim"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"not-an-email"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
<span class="token function">WriteError</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">"index"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string-property property">"code"</span> <span class="token operator">:</span> <span class="token number">121</span><span class="token punctuation">,</span>
  <span class="token string-property property">"errmsg"</span> <span class="token operator">:</span> <span class="token string">"Document failed validation"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"op"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"_id"</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">"5e280e5847eb18010666530c"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Jim"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"not-an-email"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteError@src<span class="token operator">/</span>mongo<span class="token operator">/</span>shell<span class="token operator">/</span>bulk_api<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">458</span><span class="token operator">:</span><span class="token number">48</span>
mergeBatchResults@src<span class="token operator">/</span>mongo<span class="token operator">/</span>shell<span class="token operator">/</span>bulk_api<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">855</span><span class="token operator">:</span><span class="token number">49</span>
executeBatch@src<span class="token operator">/</span>mongo<span class="token operator">/</span>shell<span class="token operator">/</span>bulk_api<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">919</span><span class="token operator">:</span><span class="token number">13</span>
Bulk<span class="token operator">/</span><span class="token keyword">this</span><span class="token punctuation">.</span>execute@src<span class="token operator">/</span>mongo<span class="token operator">/</span>shell<span class="token operator">/</span>bulk_api<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">1163</span><span class="token operator">:</span><span class="token number">21</span>
<span class="token class-name">DBCollection</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insertOne@src<span class="token operator">/</span>mongo<span class="token operator">/</span>shell<span class="token operator">/</span>crud_api<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">264</span><span class="token operator">:</span><span class="token number">9</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span>
</code></pre>
<p>Você pode ler mais sobre a validação de esquema na <a href="https://docs.mongodb.com/manual/core/schema-validation/" target="_blank" rel="noopener">documentação</a> do projeto.</p>
<p>Nota de recomendação: As vezes a documentação é confussa para qualquer iniciante, eu mesmo no inicio não entendia nada rsrs, por esse motivo e outros vou te recomenda um treinamento completo programador fullStack nele você vai aprender MondoDB e muito mais, <a href="/programador-fullstack-8-semanas">clique aqui para da uma olha nos detalhes</a></p>
<h2>Drivers MongoDB</h2>
<p><img src="/uploads/2020/06/instalando-no-pc-1.jpg" alt=""></p>
<p>Para que uma aplicação se comunique com o servidor MongoDB, é necessário usar uma biblioteca do lado do cliente chamada driver. O driver fica em cima do servidor de banco de dados e permite que você interaja com o banco de dados usando a API do driver. O MongoDB possui drivers oficiais e de terceiros para todas as linguagens ambientes populares.</p>
<p>Os drivers mais populares para o Node.js incluem o <a href="https://docs.mongodb.com/ecosystem/drivers/node/" target="_blank" rel="noopener">driver nativo do MongoDB</a> e o Mongoose. Vamos ver um pouco sobre.</p>
<h3>Driver MongoDB Node.js</h3>
<p>Este é o driver oficial MongoDB para Node.js . O driver pode interagir com o banco de dados usando retornos de chamada, promessas ou async … await.</p>
<p>Você pode instalá-lo assim:</p>
<pre><code>npm install mongod
</code></pre>
<p>O exemplo abaixo demonstra como conectar o driver ao servidor e listar todos os documentos da coleção users.</p>
<p>Nota: se você se conectou ao servidor Mongo usando um nome e uma senha, precisará especificar esses detalhes no seu código.</p>
<p><a href="/mini-curso-construindo-seu-jogo-em-javascript/"><img src="/uploads/2020/06/MiniCurso-CTA-blog.png" alt="criando jogo"></a></p>
<pre><code><span class="token keyword">const</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'mongodb://localhost:27017/exampledb'</span><span class="token punctuation">;</span>

<span class="token comment">// Com autenticação:</span>
<span class="token comment">// const url = 'mongodb://&lt;userName>:&lt;passWord>@localhost:27017/exampledb';</span>
<span class="token comment">// Further reading: https://docs.mongodb.com/manual/reference/connection-string/</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> client<span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    client <span class="token operator">=</span> <span class="token keyword">await</span> MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">'exampledb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>O MongoClient.connect retorno é uma <a href="/promise-javascript-guia-completo/">promise</a>. Qualquer erro é capturado pelo blocl catch e qualquer ação do banco de dados entra no bloco try. Se você examinar a <a href="https://mongodb.github.io/node-mongodb-native/3.5/" target="_blank" rel="noopener">documentação</a> do driver Mong, verá que a API é bastante semelhante à que estamos usando no shell.</p>
<h3>Driver Mongoose</h3>
<p>Outro driver Node.js popular para o MongoDB é o <a href="http://mongoosejs.com/docs/index.html" target="_blank" rel="noopener">Mongoose</a>. O Mongoose é construído sobre o driver oficial do MongoDB. Quando o Mongoose foi lançado, havia muitos recursos que o driver nativo do MongoDB não possuía. Um recurso importante foi a capacidade de definir uma estrutura de esquema que seria mapeada na coleção do banco de dados. No entanto, as versões mais recentes do MongoDB adotaram alguns desses recursos na forma de esquema JSON e validação de esquema.</p>
<p>Além do esquema, outros recursos sofisticados do Mongoose incluem <a href="https://mongoosejs.com/docs/models.html" target="_blank" rel="noopener">modelos</a>, <a href="https://mongoosejs.com/docs/validation.html" target="_blank" rel="noopener">validadores</a> e <a href="https://mongoosejs.com/docs/middleware.html" target="_blank" rel="noopener">middlewar</a>, o <a href="https://mongoosejs.com/docs/populate.html" target="_blank" rel="noopener">método populate</a>, <a href="https://mongoosejs.com/docs/plugins.html" target="_blank" rel="noopener">plugins</a> e assim por diante. Você pode ler mais sobre isso nos documentos do Mongoose.</p>
<p>Você pode instalar o Mongoose assim:</p>
<pre><code>npm install mongoose
</code></pre>
<p>Código usando o Mongoose:</p>
<pre><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/exampledb'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> userSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> User <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2>Conclusão</h2>
<p>O MongoDB é uma solução popular de banco de dados NoSQL que se adapta aos requisitos modernos de desenvolvimento. Neste artigo, abordamos o básico do MongoDB, o shell Mongo e alguns dos drivers populares disponíveis. Também exploramos as operações comuns do banco de dados e as ações CRUD no shell Mongo. Agora é hora de você sair e experimentar o que abordamos aqui e muito mais. Se você quiser saber mais, recomendo criar uma API REST com MongoDB e Node para se familiarizar com as operações e métodos comuns do banco de dados clique aqui para ver um <a href="/programador-fullstack-8-semanas">treinamento completo onde você vera tudo criará uma API REST e muito mais</a>.</p>
<h3>Recomendações</h3>
<h4>Artigos</h4>
<ul>
<li><a href="/acessibilidade-web-um-programador-diferente/">Acessibilidade Web: Seja um Programador Diferente</a></li>
<li><a href="/5-geradores-css-grid/">5 Geradores de CSS Grid Tenha Layout Prontos para seu projeto</a></li>
<li><a href="/promise-javascript-guia-completo/">Promise JavaScript: Guia completo Passo a Passo</a></li>
</ul>
<h4>Canal Youtube</h4>
<p>&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cBZn4dDcMrM&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;</p>
<h4>Programador FullStack JavaScript - Esse eu recomendo</h4>
<p><a href="/programador-fullstack-8-semanas"><img src="/uploads/2020/06/just-start-red-OFD-FB-1024x536.jpg" alt=""></a></p>
</div></article></div><sectino class="px-4 sm:max-w-screen-xl sm:mx-auto sm:items-center flex sm:justify-between mt-10"><div class="flex flex-wrap shadow rounded-lg w-full bg-gradient-to-r from-tips-blue to-purple-500 focus:from-pink-500 focus:to-yellow-500 p-8"><div class="flex flex-wrap flex-col sm:flex-row items-center"><figure class="w-full sm:w-1/2"><img src="/banner-img.png" alt="Estudante TipsCode" width="440" height="454"/></figure><div class="w-full md:w-1/2"><h2 class="text-tips-light text-lg md:text-3xl font-semibold mb-3 leading-relaxed traking-wide">Vagas abertas para o melhor curso de programção <!--#--><strong>Fullstack<!--#--></strong> do Brasil. Clique no botão abaixo para conhecer.<!--#--></h2><div class="mt-2"><a href="https://bit.ly/2YivXeS" class="inline-block text-center w-full sm:w-auto lg:mx-0 bg-tips-green text-white font-bold rounded mt-4 lg:mt-0 py-2 px-8 shadow focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out">Conhecer Treinamento<!--#--></a></div></div></div></div></sectino><footer class="flex flex-col items-center py-16 sm:flex-row sm:justify-around"><figure class="flex-col sm:flex sm:justify-start"><a href="/"><img src="./tipscode-logo-1.svg" class="m-auto sm:m-0 md:m-0 lg:m-0" alt="TipsCode" width="186" height="66" loading="lazy"/></a><p class="text-center sm:text-center w-full text-tips-dark text-opacity-80">Todos os direitos reservados - TipsCode<!--#--><strong class="text-center sm:text-left w-full block">CNPJ:41.562.138/0001-61<!--#--></strong></p></figure><div class="flex flex-wrap justify-center my-8 sm:my-0"><div><a href="https://nullstack.app" target="_blank" rel="noopener noreferrer" class="flex justify-center flex-wrap" title="Desenvolvido com Nullstack"><span class="w-full block text-center text-tips-dark text-opacity-80"> Desenvolvido com <!--#--></span><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 511.5039 113.7368"><title> Nullstack <!--#--></title><path d="M13.2736,39.964H28.7009v9.8922a20.3919,20.3919,0,0,1,7.743-8.479,21.2792,21.2792,0,0,1,11.2172-3.0031q7.36,0,11.3349,4.1218t3.9745,11.6588a48.9655,48.9655,0,0,1-1.06,8.8913l-8.3025,42.8665H36.3556L44.187,65.7546a31.2306,31.2306,0,0,0,.5888-5.5939q0-7.6542-6.3593-7.6547a10.7348,10.7348,0,0,0-8.4791,4.3278q-3.5922,4.328-5.0639,12.0415l-7.1248,37.0372H.4961Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M81.4691,107.62q-7.2426,0-11.2466-4.1807t-4.004-11.8943a46.3965,46.3965,0,0,1,1.001-8.6557L75.64,39.964H92.7746L85.0609,80.24a29.8175,29.8175,0,0,0-.5888,5.5938q0,7.6551,6.4771,7.6548A10.3547,10.3547,0,0,0,99.2811,89.19q3.4446-4.2978,4.9756-12.0709L111.44,39.964h17.1348l-12.7775,65.9485H100.37V96.138a18.7565,18.7565,0,0,1-7.4781,8.3908A21.4849,21.4849,0,0,1,81.4691,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M150.2958,113.7368q-11.4821,0-16.7815-3.3563t-5.2995-10.5989a43.049,43.049,0,0,1,1.1188-8.3613l11.9532-56.6451H123.2687l2.532-13.2486h35.2118L146.2918,92.4213q-.1767.825-.3238,1.7371a10.5763,10.5763,0,0,0-.1473,1.6781q0,4.6521,8.2436,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M181.897,92.21q-11.4822,0-16.7816-3.3563T159.816,78.255a43.0455,43.0455,0,0,1,1.1187-8.3613l11.9532-56.6451H154.87L157.4018,0h35.2118L177.8929,70.8947q-.1765.8248-.3238,1.737a10.5766,10.5766,0,0,0-.1472,1.6782q0,4.6519,8.2435,4.6517h16.3694l-2.65,13.2486Z" transform="translate(-0.4961)" fill="#d22365"></path><path d="M228.3106,107.62a72.47,72.47,0,0,1-23.6119-4.1218l3.003-15.0739q10.5988,6.7717,21.6688,6.7715,6.4176,0,10.0983-2.2965a7.1387,7.1387,0,0,0,3.68-6.3593,4.4873,4.4873,0,0,0-1.8253-3.8273q-2.3556-1.884-9.5979-3.9452l-5.1817-1.4132q-13.8969-3.8271-13.8963-16.9582a18.9819,18.9819,0,0,1,8.0375-16.0455q8.0374-5.976,22.4637-5.9766a60.6829,60.6829,0,0,1,10.1573.8538,63.0434,63.0434,0,0,1,10.5105,2.797L260.8727,56.981a33.7,33.7,0,0,0-19.3724-6.3q-5.9478,0-9.3623,2.09a6.2659,6.2659,0,0,0-3.4152,5.5056,5.102,5.102,0,0,0,2.2375,4.2984q2.4731,1.7082,9.6568,3.7685l4.3573,1.2365q7.4775,2.12,10.9816,6.271t3.5035,10.805q0,10.7172-8.2436,16.84T228.3106,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M297.9546,106.2069q-11.3055,0-16.6932-3.3857t-5.3878-10.57a47.7847,47.7847,0,0,1,1.06-8.3613l5.9472-30.6778H265.9813l2.532-13.2486h16.8993l3.5918-18.7247h17.2527L302.6063,39.964h22.5521l-2.532,13.2486h-22.552l-6.1827,31.6788A20.2915,20.2915,0,0,0,293.48,88.13a3.9534,3.9534,0,0,0,1.9431,3.68q1.9433,1.1482,6.2416,1.1482h13.2486l-2.532,13.2486Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M338.2138,107.62q-9.4224,0-14.6029-5.1228-5.1828-5.1228-5.1816-14.25,0-12.2469,9.3034-18.99t26.2617-6.7421h11.3643l.4711-2.8852a3.6427,3.6427,0,0,1,.1177-.7066v-1.001A5.6271,5.6271,0,0,0,362.974,52.8q-2.9748-1.7666-8.5086-1.7665a41.5275,41.5275,0,0,0-10.8933,1.59,85.9338,85.9338,0,0,0-13.3074,5.0639l2.7675-14.7206a74.3941,74.3941,0,0,1,24.6129-4.5929q12.07,0,18.6363,4.6518,6.5643,4.652,6.5655,13.72a36.323,36.323,0,0,1-.4711,5.5939q-.4716,3.003-1.1188,5.9471l-7.2425,37.626H358.47v-7.36A26.3115,26.3115,0,0,1,338.2138,107.62Zm7.1837-11.8354q6.476,0,11.2466-5.6822t6.3-15.3978h-6.6537q-19.9029,0-19.9023,12.13a8.3352,8.3352,0,0,0,9.009,8.95Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M415.1828,107.62q-13.72,0-21.1683-7.4192t-7.4486-21.4333a42.63,42.63,0,0,1,5.005-20.8444,36.7663,36.7663,0,0,1,13.9257-14.338,40.3978,40.3978,0,0,1,20.7562-5.2111A39.0215,39.0215,0,0,1,445.8607,43.32l-3.1208,15.78a22.7112,22.7112,0,0,0-16.075-6.7126,21.2393,21.2393,0,0,0-11.8059,3.2974A22.52,22.52,0,0,0,406.88,64.783a29.416,29.416,0,0,0-2.8853,13.278q0,8.0083,3.4741,11.7765T417.95,93.606q8.8324,0,19.3724-6.1238l-3.2974,16.2516A45.998,45.998,0,0,1,415.1828,107.62Z" transform="translate(-0.4961)" fill="#2d3748"></path><path d="M458.1224,14.2911H475.375l-8.95,46.0463L490.2134,39.964H512L482.2643,64.5769l18.43,41.3356H482.382L469.31,75.058l-6.83,5.6527-4.8284,25.2018H440.3987Z" transform="translate(-0.4961)" fill="#2d3748"></path></svg></a></div></div><ul><li class="inline-block ml-4"><a href="https://web.facebook.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://github.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M16 21.9999V18.1299C16.0375 17.6531 15.9731 17.1737 15.811 16.7237C15.6489 16.2737 15.3929 15.8634 15.06 15.5199C18.2 15.1699 21.5 13.9799 21.5 8.51994C21.4997 7.12376 20.9627 5.78114 20 4.76994C20.4559 3.54844 20.4236 2.19829 19.91 0.999938C19.91 0.999938 18.73 0.649938 16 2.47994C13.708 1.85876 11.292 1.85876 9 2.47994C6.27 0.649938 5.09 0.999938 5.09 0.999938C4.57638 2.19829 4.54414 3.54844 5 4.76994C4.03013 5.78864 3.49252 7.1434 3.5 8.54994C3.5 13.9699 6.8 15.1599 9.94 15.5499C9.611 15.8899 9.35726 16.2953 9.19531 16.7399C9.03335 17.1844 8.96681 17.658 9 18.1299V21.9999M9 18.9999C4 20.4999 4 16.4999 2 15.9999L9 18.9999Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.youtube.com/tipscode" title="tipscode" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1792 5.51057 21.8386 5.15941C21.498 4.80824 21.0707 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.11996 4 3.39996 4.46C2.92921 4.59318 2.50194 4.84824 2.16131 5.19941C1.82068 5.55057 1.57875 5.98541 1.45996 6.46C1.14518 8.20556 0.991197 9.97631 0.999961 11.75C0.988741 13.537 1.14273 15.3213 1.45996 17.08C1.59092 17.5398 1.83827 17.9581 2.17811 18.2945C2.51794 18.6308 2.93878 18.8738 3.39996 19C5.11996 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0707 18.8668 21.498 18.6118 21.8386 18.2606C22.1792 17.9094 22.4212 17.4746 22.54 17C22.8523 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8572 8.1787 22.54 6.42V6.42Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 15.02L15.5 11.75L9.75 8.47998V15.02Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://www.instagram.com/tipscodeoficial" title="tipscodeoficial" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" viewBox="0 0 24 24" fill="#F5F5FF" xmlns="http://www.w3.org/2000/svg"><path d="M17 2H7C4.23858 2 2 4.23858 2 7V17C2 19.7614 4.23858 22 7 22H17C19.7614 22 22 19.7614 22 17V7C22 4.23858 19.7614 2 17 2Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 11.3698C16.1234 12.2021 15.9812 13.052 15.5937 13.7988C15.2062 14.5456 14.5931 15.1512 13.8416 15.5295C13.0901 15.9077 12.2384 16.0394 11.4077 15.9057C10.5771 15.7721 9.80971 15.3799 9.21479 14.785C8.61987 14.1901 8.22768 13.4227 8.09402 12.592C7.96035 11.7614 8.09202 10.9097 8.47028 10.1582C8.84854 9.40667 9.45414 8.79355 10.2009 8.40605C10.9477 8.01856 11.7977 7.8764 12.63 7.99981C13.4789 8.1257 14.2648 8.52128 14.8716 9.12812C15.4785 9.73496 15.8741 10.5209 16 11.3698Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.5 6.5H17.51" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li class="inline-block ml-4"><a href="https://twitter.com/alissonsuassuna" title="alissonsuassuna" target="_blank" rel="noreferrer" class="text-tips-blue hover:text-tips-green"><svg width="24" height="24" fill="#F5F5FF" viewBox="0 0 24 24"><path d="M23 2.9998C22.0424 3.67528 20.9821 4.19191 19.86 4.5298C19.2577 3.83731 18.4573 3.34649 17.567 3.12373C16.6767 2.90096 15.7395 2.957 14.8821 3.28426C14.0247 3.61151 13.2884 4.1942 12.773 4.95352C12.2575 5.71283 11.9877 6.61214 12 7.5298V8.5298C10.2426 8.57537 8.50127 8.18561 6.93101 7.39525C5.36074 6.60488 4.01032 5.43844 3 3.9998C3 3.9998 -1 12.9998 8 16.9998C5.94053 18.3978 3.48716 19.0987 1 18.9998C10 23.9998 21 18.9998 21 7.4998C20.9991 7.22126 20.9723 6.9434 20.92 6.6698C21.9406 5.6633 22.6608 4.39251 23 2.9998V2.9998Z" stroke="#2B293F" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li></ul></footer><span href="/curso-react-pro"> <!--#--></span><span href="/obrigado-por-entrar-no-mini-curso"> <!--#--></span><span href="/aulas-do-mini-curso"> <!--#--></span><span href="/entrevista-com-aluno"> <!--#--></span></main></div>
    <script async>
      window.page = {"image":"/thumbnail-article/mongodb-para-iniciantes.png","status":200,"locale":"pt-BR","title":"MongoDB – Guia para Iniciantes Passo a Passo - TipsCode","description":"Eeste artigo é para iniciantes, vou demonstrar como instalar o Mongodb e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o MySQL) ao longo do artigo."};
      window.instances = {"application":{},"n-0-0-0-0":{},"n-0-0-0-1":{},"n-0-0-0-2":{},"n-0-0-0-3":{},"n-0-0-12/mongodb-guia-completo-para-iniciante":{"slug":"mongodb-guia-completo-para-iniciante","content":"<p>Eeste artigo é para <strong>iniciantes<\/strong>, vou demonstrar como instalar o <em><strong>Mongodb<\/strong><\/em> e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o <strong><em>MySQL<\/em><\/strong>) ao longo do artigo.<\/p>\n<h2>O que é MongoDB?<\/h2>\n<p><img src=\"/uploads/2020/05/problematica-png-1.png\" alt=\"mongodb\"><\/p>\n<p>Figura 01: o que é mongodb<\/p>\n<p>O MongoDB é um banco de dados orientado a documentos. Isso significa que ele não usa tabelas e linhas para armazenar seus dados, mas coleções de documentos semelhantes ao <strong><em>JSON<\/em><\/strong>. Esses documentos suportam campos incorporados, para que os dados relacionados possam ser armazenados dentro deles.<\/p>\n<p>O <strong><em>MongoDB<\/em><\/strong> também é um banco de dados sem esquema, portanto, não precisamos especificar o número ou o tipo de coluna antes de inserir nossos dados.<\/p>\n<p>Aqui está um exemplo de como pode ser um documento do MongoDB:<\/p>\n<pre><code><span class=\"token punctuation\">{<\/span>\n  <span class=\"token literal-property property\">_id<\/span><span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span>3da252d3902a<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">type<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Artigo-blog\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">title<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"MongoDB - Guia para Iniciantes Passo a Passo\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">author<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Alisson Suassuna\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">tags<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span> <span class=\"token string\">\"mongodb\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">\"javascript\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">\"node\"<\/span> <span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">categories<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span>\n    <span class=\"token punctuation\">{<\/span>\n      <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"javascript\"<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">description<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Artigo focando em iniciantes \"<\/span>\n    <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token punctuation\">{<\/span>\n      <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"databases\"<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">description<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Tutorial para aqueles que querem aprender\"<\/span>\n    <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token literal-property property\">content<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"O MongoDB é um banco de dados NoSQL multiplataforma, de código aberto\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Como você pode ver, o documento possui vários campos ( <strong><em>type, title<\/em><\/strong> etc.), que armazenam valores (“<strong><em>MongoDB<\/em><\/strong> – Guia para Iniciantes Passo a Passo” etc.). Esses valores podem conter cadeias, números, matrizes, matrizes de sub-documentos (por exemplo, o <strong><em>categories<\/em><\/strong> campo), coordenadas geográficas e muito mais.<\/p>\n<p>O <strong>_id<\/strong> nome do campo está reservado para uso como chave primária. Seu valor deve ser único na coleção, e é imutável e pode ser de qualquer tipo que não seja uma matriz.<\/p>\n<p>Dica: para aqueles que querem saber o que significa “<strong><em>JSON<\/em><\/strong>”, o Mongodb usa internamente algo chamado <strong><em>BSON<\/em><\/strong> (abreviação de <strong><em>JSON binário<\/em><\/strong>). Na prática, você realmente não precisa saber muito sobre o <strong><em>BSON<\/em><\/strong> ao trabalhar com o <strong><em>MongoDB<\/em><\/strong>.<\/p>\n<p>Como você pode imaginar, um documento em um banco de dados <strong><em>NoSQL<\/em><\/strong> corresponde a uma linha em um banco de dados <strong><em>SQL<\/em><\/strong>. Um grupo de documentos juntos é conhecido como uma coleção, que é aproximadamente sinônimo de uma tabela em um banco de dados relacional.<\/p>\n<p>Aqui está uma tabela que resume os diferentes termos:<\/p>\n<p><img src=\"/uploads/2020/06/diferenças-sql-mongodb.png\" alt=\"mongodb\"><\/p>\n<p>Se você está iniciando um novo projeto e está buscando aprender mais sobre o <strong><em>mongodb<\/em><\/strong>, te recomendo esse <a href=\"/programador-fullstack-8-semanas\">treinamento completo<\/a> nele você vai aprender toda a base sobre todo o ecossistema JavaScript. <a href=\"/programador-fullstack-8-semanas\">Clique aqui para ver<\/a><\/p>\n<h2>Instalando o MongoDB<\/h2>\n<p><img src=\"/uploads/2020/06/instalando-no-pc-1.jpg\" alt=\"\"><\/p>\n<p>Nota: se você não quiser instalar nada no seu pc neste momento não tem problema, existem alguns serviços online que você pode usar. O Mongo playground, por exemplo, é um <strong><em>sandbox<\/em><\/strong> simples para testar e compartilhar consultas do <strong><em>MongoDB<\/em><\/strong> online.<\/p>\n<p>O <strong><em>MongoDB<\/em><\/strong> vem em várias edições. O que nos interessa é a <strong><em>MongoDB Community Edition.<\/em><\/strong><\/p>\n<p>A página inicial do projeto possui excelente documentação sobre a instalação do Mongo, e não tentarei replicá-la aqui. Em vez disso, vou mostrar os links para instruções para cada um dos principais sistemas operacionais:<\/p>\n<ul>\n<li><a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/\" target=\"_blank\" rel=\"noopener\">Instalar no Windows.<\/a><\/li>\n<li><a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/\" target=\"_blank\" rel=\"noopener\">Instalar no MacOS.<\/a><\/li>\n<li><a href=\"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/\" target=\"_blank\" rel=\"noopener\">Instalar no Ubuntu<\/a><\/li>\n<\/ul>\n<p>Se você usa uma versão do Linux não baseada no Ubuntu, pode verificar <a href=\"https://docs.mongodb.com/manual/installation/#mongodb-community-edition-installation-tutorials\" target=\"_blank\" rel=\"noopener\">esta página<\/a> para obter instruções de instalação para outras distribuições. O MongoDB também está normalmente disponível nos canais oficiais de software Linux, mas às vezes isso gera uma versão desatualizada.<\/p>\n<h3>Configurações pós-instalação<\/h3>\n<p>Depois de instalar o MongoDB para o seu sistema, você poderá encontrar este erro:<\/p>\n<pre><code><span class=\"token function\">dbpath<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token operator\">/<\/span>data<span class=\"token operator\">/<\/span>db<span class=\"token punctuation\">)<\/span> does not exist<span class=\"token punctuation\">.<\/span>\n Create <span class=\"token keyword\">this<\/span> directory or give existing directory <span class=\"token keyword\">in<\/span> <span class=\"token operator\">--<\/span>dbpath<span class=\"token punctuation\">.<\/span>\n See http<span class=\"token operator\">:<\/span><span class=\"token operator\">/<\/span><span class=\"token operator\">/<\/span>dochub<span class=\"token punctuation\">.<\/span>mongodb<span class=\"token punctuation\">.<\/span>org<span class=\"token operator\">/<\/span>core<span class=\"token operator\">/<\/span>startingandstoppingmongo\n<\/code><\/pre>\n<p>Isso significa que o Mongodb não pode encontrar (ou acessar) o diretório usado para armazenar seus bancos de dados. Para resolve esse pequeno problema faça o seguinte:<\/p>\n<pre><code>sudo mkdir <span class=\"token operator\">-<\/span>p <span class=\"token operator\">/<\/span>data<span class=\"token operator\">/<\/span>db\nsudo chown <span class=\"token operator\">-<\/span><span class=\"token constant\">R<\/span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`<\/span><span class=\"token string\">id -un<\/span><span class=\"token template-punctuation string\">`<\/span><\/span> <span class=\"token operator\">/<\/span>data<span class=\"token operator\">/<\/span>db\n<\/code><\/pre>\n<p><a href=\"/mini-curso-construindo-seu-jogo-em-javascript/\"><img src=\"/uploads/2020/06/MiniCurso-CTA-blog.png\" alt=\"Criando Jogo\"><\/a><\/p>\n<p>Curso Grátis<\/p>\n<p>O primeiro comando cria o diretório data/db O segundo define permissões para que o Mongodb possa gravar nesse diretório.<\/p>\n<h3>Instalando a Interface Gráfica<\/h3>\n<p>Usaremos a linha de comando neste artigo, mas o MongoDB também oferece uma ferramenta chamada Compass para conectar e gerenciar seus bancos de dados usando uma GUI.<\/p>\n<p>Se você estiver no Windows, o Compass pode ser instalado como parte da instalação principal do Mongo (basta selecionar a opção apropriada no assistente). <a href=\"https://docs.mongodb.com/compass/master/install/\" target=\"_blank\" rel=\"noopener\">Caso contrário, você pode baixar o Compass para o seu respectivo sistema operacional aqui.<\/a><\/p>\n<p>Veja como ele é:<\/p>\n<p><img src=\"/uploads/2020/06/Connections-tvttrij9h5-1024x706.png\" alt=\"mongodb\"><\/p>\n<h3>Mongodb - Shell<\/h3>\n<p>Para fazer o teste da instalação, abra abrindo o terminal. Você pode fazer isso abrindo uma janela do terminal e digitando o comando mongo.<\/p>\n<p>Nota: assumindo que o mongodb está instalado no diretório /bin. Se, por algum motivo, não for esse o caso, mude para o diretório /bin e execute o comando novamente.<\/p>\n<p>Se você receber um Error: couldn’t connect to server erro, você vai precisar parar e iniciar o servidor Mongo (em uma segunda janela de terminal) com o mesmo comando mongod.<\/p>\n<p>Quando estiver no terminal, digite db.version() para ver a versão do MongoDB em execução.<\/p>\n<p>Observe que você pode sair do terminal executando quit() o daemon Mongo pressionando Ctrl+ C a qualquer momento.<\/p>\n<p>Agora vamos nos familiarizar com alguns conceitos básicos do MongoDB.<\/p>\n<h3>Operações básicas<\/h3>\n<p>Digite no terminal se você ainda não o fez (digitando mongo em um terminal):<\/p>\n<pre><code><span class=\"token punctuation\">[<\/span>mj@localhost <span class=\"token operator\">~<\/span><span class=\"token punctuation\">]<\/span>$ mongo\nMongoDB shell version v4<span class=\"token punctuation\">.<\/span><span class=\"token number\">2.2<\/span>\nconnecting to<span class=\"token operator\">:<\/span> mongodb<span class=\"token operator\">:<\/span><span class=\"token operator\">/<\/span><span class=\"token operator\">/<\/span><span class=\"token number\">127.0<\/span><span class=\"token number\">.0<\/span><span class=\"token number\">.1<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">27017<\/span><span class=\"token operator\">/<\/span><span class=\"token operator\">?<\/span>compressors<span class=\"token operator\">=<\/span>disabled<span class=\"token operator\">&amp;<\/span>gssapiServiceName<span class=\"token operator\">=<\/span>mongodb\nImplicit session<span class=\"token operator\">:<\/span> session <span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token constant\">UUID<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"08a624a0-b330-4233-b56b-1d5b15a48fea\"<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">}<\/span>\nMongoDB server version<span class=\"token operator\">:<\/span> <span class=\"token number\">4.2<\/span><span class=\"token number\">.2<\/span>\n<\/code><\/pre>\n<p>Vamos começar criando um banco de dados para trabalhar. Para criar um banco de dados, o MongoDB possui comando use DATABASE_NAME<\/p>\n<pre><code><span class=\"token operator\">><\/span> use exampledb\nswitched to db exampledb\n<\/code><\/pre>\n<p>Para exibir todos os bancos de dados existentes, use o comando show dbs:<\/p>\n<pre><code><span class=\"token operator\">><\/span> show dbs\n\nadmin          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nconfig         <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nlocal          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\n<\/code><\/pre>\n<p>O exampledb não está na lista porque precisamos inserir pelo menos um documento no banco de dados. Para inserir um documento, você pode usar o comando db.COLLECTION_NAME.insertOne({“key”:”value”}). Aqui está um exemplo:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">insertOne<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Suassuma\"<\/span><span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">{<\/span>\n   <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span>\n   <span class=\"token string-property property\">\"insertedId\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5a53Ds43b223034Ds238daaec\"<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>O MongoDB cria automaticamente uma nova coleção users e insere um documento com o par chave-valor ‘name’:’Suassuna’. O ObjectId retornado é o ID do documento inserido. O MongoDB cria um Object Id exclusivo para cada documento na criação e se torna o valor padrão do campo _id.<\/p>\n<p>Agora poderemos ver nosso banco de dados:<\/p>\n<pre><code><span class=\"token operator\">><\/span>show dbs\nadmin          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nconfig         <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nexampledb      <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nlocal          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\n<\/code><\/pre>\n<p>Da mesma forma, você pode confirmar que a coleção foi criada usando o comando show collections:<\/p>\n<pre><code><span class=\"token operator\">><\/span> show collections\nusers\n<\/code><\/pre>\n<p>Criamos um banco de dados, adicionamos uma coleção com o nome user se inserimos um documento nele. Agora vamos apagar. Para descartar um banco de dados existente, use o comando dropDatabase(), como exemplificado abaixo:<\/p>\n<pre><code><span class=\"token operator\">><\/span>db<span class=\"token punctuation\">.<\/span><span class=\"token function\">dropDatabase<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"dropped\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"exampledb\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"ok\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p><strong><em>show dbs<\/em><\/strong> confirma que o banco de dados foi realmente deletado use o comando <strong><em>show dbs<\/em><\/strong><\/p>\n<pre><code><span class=\"token operator\">><\/span> show dbs\nadmin          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nconfig         <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\nlocal          <span class=\"token number\">0<\/span><span class=\"token punctuation\">.<\/span>000GB\n<\/code><\/pre>\n<p>Para mais operações de banco de dados, consulte a página da documentação do MongoDB nos comandos do banco de dados. E caso você queira fazer um treinamento completo com bem mais detalhes clique aqui<\/p>\n<h2>Gerenciamento de Usuários<\/h2>\n<p>Até agora você já deve ter notado que o MongoDB não vem com nenhum tipo de controle de acesso ativado.<\/p>\n<p>Embora não seja necessário fornecer um nome de usuário e senha para o desenvolvimento, é algo que você deve alterar ao usar o Mongodb na produção.<\/p>\n<p>Aqui estão as etapas para criar um usuário de banco de dados com privilégios completos de leitura / gravação:<\/p>\n<ul>\n<li>Verifique se você iniciou o servidor Mongo sem nenhum tipo de controle de acesso (geralmente digitando mongod);<\/li>\n<li>Abra um shell digitando mongo.<\/li>\n<li>No shell, adicione um usuário com a readWritefunção ao exampledbbanco de dados. Isso solicitará que você digite uma senha. Obviamente, substitua “manjunath” pelo seu nome de usuário desejado:<\/li>\n<\/ul>\n<pre><code>use exampledb\n   db<span class=\"token punctuation\">.<\/span><span class=\"token function\">createUser<\/span><span class=\"token punctuation\">(<\/span>\n    <span class=\"token punctuation\">{<\/span>\n      <span class=\"token literal-property property\">user<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"alissonsuassuna\"<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">pwd<\/span><span class=\"token operator\">:<\/span> <span class=\"token function\">passwordPrompt<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">roles<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">role<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"readWrite\"<\/span> <span class=\"token punctuation\">]<\/span>\n    <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">)<\/span>\n<\/code><\/pre>\n<ul>\n<li>Saia do shell Mongo.<\/li>\n<li>Desligue o servidor Mongo e reinicie-o usando mongod –auth. Os clientes que se conectam a esta instância agora devem se autenticar.<\/li>\n<li>Reabra o shel e rode o comando: mongo –authenticationDatabase “exampledb” -u “manjunath” -p. Agora você será solicitado a fornecer sua senha.<\/li>\n<\/ul>\n<p>Para mais informações, consulte a <a href=\"https://docs.mongodb.com/manual/tutorial/enable-authentication/\" target=\"_blank\" rel=\"noopener\">documentação<\/a>.<\/p>\n<h2>MongoDB - CRUD<\/h2>\n<p>Como você já deve saber, a sigla <strong><em>CRUD<\/em><\/strong> significa a letra C é Create(criar), R read(Leitura), U update(Atualizar), e D delete(apagar). Estas são as quatro operações básicas do banco de dados que você não pode evitar ao criar qualquer aplicação. Por exemplo, qualquer aplicação moderno terá a capacidade de criar um novo usuário, ler os dados do usuário, atualizar as informações do usuário e, se necessário, excluir a conta do usuário. Vamos fazer isso no nível do banco de dados usando o MongoDB.<\/p>\n<h3>Criar<\/h3>\n<p>Criação é o mesmo que inserir um documento em uma coleção. Na seção anterior, inserimos um único documento usando a comando db.collection.insertOne(). Existe outro comando chamado db.collection.insertMany() que permite inserir vários documentos ao mesmo tempo. Veja o exemplo:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>collection<span class=\"token punctuation\">.<\/span><span class=\"token function\">insertMany<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">[<\/span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span>document<\/span> <span class=\"token attr-name\">1<\/span><span class=\"token punctuation\">><\/span><\/span> <span class=\"token punctuation\">,<\/span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;<\/span>document<\/span> <span class=\"token attr-name\">2<\/span><span class=\"token punctuation\">><\/span><\/span><span class=\"token punctuation\">,<\/span> <span class=\"token operator\">...<\/span> <span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">)<\/span>\n<\/code><\/pre>\n<p>Vamos criar uma coleção users e preenchê-la com alguns usuários reais:<\/p>\n<pre><code><span class=\"token operator\">><\/span> use exampledb\n<span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">insertMany<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">[<\/span>\n   <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Alisson\"<\/span><span class=\"token punctuation\">,<\/span><span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">23<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"alisson@example.com\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n   <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Ana\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">20<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span><span class=\"token string\">\"ana@example.com\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n   <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Dani\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span> <span class=\"token number\">27<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"dani@example.com\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n   <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"Hecto\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">14<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span><span class=\"token string\">\"hecto@example.com\"<\/span><span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span>\n   <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span>\n   <span class=\"token string-property property\">\"insertedIds\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span>\n      <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa56ff\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5700\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5701\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5702\"<\/span><span class=\"token punctuation\">)<\/span>\n   <span class=\"token punctuation\">]<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>O método insertMany aceita um array de objetos e, em troca, obtemos um array de ObjectId s.<\/p>\n<h3>Leitura<\/h3>\n<p>Uma operação de leitura é usada para recuperar um documento ou vários documentos de uma coleção. A sintaxe para a operação de leitura é a seguinte:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>collection<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span>query<span class=\"token punctuation\">,<\/span> projection<span class=\"token punctuation\">)<\/span>\n<\/code><\/pre>\n<p>Para recuperar todos os documentos do usuário, você pode fazer o seguinte:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">pretty<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa56ff\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Alisson\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">20<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"alisson@example.com\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5700\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Ana\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">20<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"ana@example.com\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5701\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Dani\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">27<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"dani@example.com\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5702\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Hecto\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">14<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"hecto@example.com\"<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Isso corresponde à um SELECT * FROM USERS consulta para um banco de dados SQL.<\/p>\n<p>O método pretty é um método de cursor, e existem muitos outros também. Você pode encadear esses métodos para modificar sua consulta e os documentos retornados pela consulta.<\/p>\n<p>Talvez você precise filtrar consultas para retornar um subconjunto da coleção – como encontrar todos os usuários abaixo de 30. Você pode modificar a consulta desta forma:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span><span class=\"token parameter\"><span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">$lt<\/span><span class=\"token operator\">:<\/span> <span class=\"token number\">30<\/span> <span class=\"token punctuation\">}<\/span> <span class=\"token punctuation\">}<\/span><\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa56ff\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Alisson\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">23<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"alisson@example.com\"<\/span> <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e25bb58ba0cf16476aa5701\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Ana\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"age\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">27<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"ana@example.com\"<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Neste exemplo, $lt é um operador de filtro de consulta que seleciona documentos cujo o valor age do campo é menor que 30. Existem muitos filtros de comparação e de consulta lógica disponíveis. Você pode ver a lista inteira na documentação do seletor de consultas .<\/p>\n<p>Nota: No Mongo, você pode replicar o comando like muito usado no SQL usando um regex. Por exemplo, SELECT * FROM users WHERE name LIKE ‘Ana%’ traduz para db.users.find({ name: /Ana.*/ }). Caso não saiba o que são regex, temos um artigo completo<\/p>\n<h3>Atualizar<\/h3>\n<p>Uma operação de atualização modifica documentos em uma coleção. Semelhante à operação de criação, o MongoDB oferece vários métodos para atualizar um documento. Por exemplo:<\/p>\n<ul>\n<li>db.collection.updateOne(,&lt;filter&gt;, &lt;update&gt;, &lt;options&gt; )<\/li>\n<li>db.collection.updateMany(,&lt;filter&gt;, &lt;update&gt;, &lt;options&gt; )<\/li>\n<\/ul>\n<p>Se você precisar adicionar um campo extra – por exemplo registration – a todos os documentos existentes em uma coleção, poderá fazer algo assim:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">updateMany<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">$set<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">registration<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"incomplete\"<\/span><span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"matchedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">4<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"modifiedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">4<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>O primeiro argumento é um objeto vazio, porque queremos atualizar todos os documentos da coleção. O $set é um operador de atualização que define o valor de um campo com o valor especificado. Você pode verificar se o campo extra foi adicionado usando db.users.find().<\/p>\n<p>Para atualizar o valor dos documentos que correspondem a determinados critérios, o comando updateMany() aceita um objeto de filtro como seu primeiro argumento. Por exemplo, você pode querer substituir o valor registration para complete para todos os usuários que são 18+ idade. Aqui está o que você pode fazer:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">updateMany<\/span><span class=\"token punctuation\">(<\/span>\n  <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span><span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">$gt<\/span><span class=\"token operator\">:<\/span> <span class=\"token number\">18<\/span><span class=\"token punctuation\">}<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">$set<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">registration<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"complete\"<\/span><span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"matchedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">3<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"modifiedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">3<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Para atualizar os detalhes do registro de um único usuário, você pode fazer o seguinte:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">updateOne<\/span><span class=\"token punctuation\">(<\/span>\n <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"tom@example.com\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">$set<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">registration<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"complete\"<\/span><span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"matchedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"modifiedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<h3>Deletar<\/h3>\n<p>Para excluir um documento, você pode usar o método db.collection.deleteOne(, ) e, para excluir vários documentos, você pode usar o método db.collection.deleteMany(, ).<\/p>\n<p>Para excluir documentos com base em determinados critérios, você pode usar os operadores de filtro que usamos para a operação de leitura e atualização:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">updateOne<\/span><span class=\"token punctuation\">(<\/span>\n <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"alisson@example.com\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n <span class=\"token punctuation\">{<\/span><span class=\"token literal-property property\">$set<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">status<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"dormant\"<\/span><span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"matchedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"modifiedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> <span class=\"token punctuation\">}<\/span>\n\n<span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>users<span class=\"token punctuation\">.<\/span><span class=\"token function\">deleteMany<\/span><span class=\"token punctuation\">(<\/span> <span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">status<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span> $<span class=\"token keyword\">in<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span> <span class=\"token string\">\"dormant\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">\"inactive\"<\/span> <span class=\"token punctuation\">]<\/span> <span class=\"token punctuation\">}<\/span> <span class=\"token punctuation\">}<\/span> <span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"acknowledged\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string-property property\">\"deletedCount\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<pre><code>Isso exclui todos os documentos com status “inativo” ou “inativo”<span class=\"token punctuation\">.<\/span>\n<\/code><\/pre>\n<h2>Validação<\/h2>\n<p>No início deste artigo, quando eu disse que o Mongo é um banco de dados sem esquema, eu estava simplificando um pouco.<\/p>\n<p>Ele é sem esquema, na medida em que não é necessário especificar o número ou tipo de colunas antes de inserir os nossos dados. No entanto, também é possível definir um esquema JSON e usá-lo para impor regras de validação para nossos dados.<\/p>\n<p>Vamos criar uma coleção validatedUsers, onde podemos usar a validator construção para especificar que a name é obrigatório e que um email campo corresponde a um determinado padrão:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span><span class=\"token function\">createCollection<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"validatedUsers\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token literal-property property\">validator<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token literal-property property\">$jsonSchema<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n      <span class=\"token literal-property property\">required<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">[<\/span> <span class=\"token string\">\"name\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">\"email\"<\/span> <span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">properties<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n        <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n          <span class=\"token literal-property property\">bsonType<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"string\"<\/span><span class=\"token punctuation\">,<\/span>\n          <span class=\"token literal-property property\">description<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"must be a string and is required\"<\/span>\n        <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span>\n        <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n          <span class=\"token literal-property property\">bsonType<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"string\"<\/span><span class=\"token punctuation\">,<\/span>\n          <span class=\"token literal-property property\">pattern<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"^.+\\@.+$\"<\/span><span class=\"token punctuation\">,<\/span>\n          <span class=\"token literal-property property\">description<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"must be a valid email and is required\"<\/span>\n        <span class=\"token punctuation\">}<\/span>\n      <span class=\"token punctuation\">}<\/span>\n    <span class=\"token punctuation\">}<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token punctuation\">{<\/span> <span class=\"token string-property property\">\"ok\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">1<\/span> <span class=\"token punctuation\">}<\/span>\n<\/code><\/pre>\n<p>Agora, se tentarmos inserir dados incorretos, receberemos um erro de validação:<\/p>\n<pre><code><span class=\"token operator\">><\/span> db<span class=\"token punctuation\">.<\/span>validatedUsers<span class=\"token punctuation\">.<\/span><span class=\"token function\">insertOne<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"duce\"<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> <span class=\"token string\">\"not-an-email\"<\/span> <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\n\n<span class=\"token number\">2020<\/span><span class=\"token operator\">-<\/span><span class=\"token number\">01<\/span><span class=\"token operator\">-<\/span>22T09<span class=\"token operator\">:<\/span><span class=\"token number\">56<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">56.918<\/span><span class=\"token operator\">+<\/span><span class=\"token number\">0100<\/span> <span class=\"token constant\">E<\/span>  <span class=\"token constant\">QUERY<\/span>    <span class=\"token entity named-entity\" title=\"&lsqb;\">&amp;lsqb;<\/span>js<span class=\"token punctuation\">]<\/span> uncaught exception<span class=\"token operator\">:<\/span> <span class=\"token function\">WriteError<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"index\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">0<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"code\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">121<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"errmsg\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Document failed validation\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"op\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e280e5847eb18010666530c\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Jim\"<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"not-an-email\"<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">:<\/span>\n<span class=\"token function\">WriteError<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span>\n  <span class=\"token string-property property\">\"index\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">0<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"code\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token number\">121<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"errmsg\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Document failed validation\"<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token string-property property\">\"op\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token string-property property\">\"_id\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token function\">ObjectId<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"5e280e5847eb18010666530c\"<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token string-property property\">\"name\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"Jim\"<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token string-property property\">\"email\"<\/span> <span class=\"token operator\">:<\/span> <span class=\"token string\">\"not-an-email\"<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span>\nWriteError@src<span class=\"token operator\">/<\/span>mongo<span class=\"token operator\">/<\/span>shell<span class=\"token operator\">/<\/span>bulk_api<span class=\"token punctuation\">.<\/span>js<span class=\"token operator\">:<\/span><span class=\"token number\">458<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">48<\/span>\nmergeBatchResults@src<span class=\"token operator\">/<\/span>mongo<span class=\"token operator\">/<\/span>shell<span class=\"token operator\">/<\/span>bulk_api<span class=\"token punctuation\">.<\/span>js<span class=\"token operator\">:<\/span><span class=\"token number\">855<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">49<\/span>\nexecuteBatch@src<span class=\"token operator\">/<\/span>mongo<span class=\"token operator\">/<\/span>shell<span class=\"token operator\">/<\/span>bulk_api<span class=\"token punctuation\">.<\/span>js<span class=\"token operator\">:<\/span><span class=\"token number\">919<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">13<\/span>\nBulk<span class=\"token operator\">/<\/span><span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span>execute@src<span class=\"token operator\">/<\/span>mongo<span class=\"token operator\">/<\/span>shell<span class=\"token operator\">/<\/span>bulk_api<span class=\"token punctuation\">.<\/span>js<span class=\"token operator\">:<\/span><span class=\"token number\">1163<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">21<\/span>\n<span class=\"token class-name\">DBCollection<\/span><span class=\"token punctuation\">.<\/span>prototype<span class=\"token punctuation\">.<\/span>insertOne@src<span class=\"token operator\">/<\/span>mongo<span class=\"token operator\">/<\/span>shell<span class=\"token operator\">/<\/span>crud_api<span class=\"token punctuation\">.<\/span>js<span class=\"token operator\">:<\/span><span class=\"token number\">264<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">9<\/span>\n@<span class=\"token punctuation\">(<\/span>shell<span class=\"token punctuation\">)<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">1<\/span><span class=\"token operator\">:<\/span><span class=\"token number\">1<\/span>\n<\/code><\/pre>\n<p>Você pode ler mais sobre a validação de esquema na <a href=\"https://docs.mongodb.com/manual/core/schema-validation/\" target=\"_blank\" rel=\"noopener\">documentação<\/a> do projeto.<\/p>\n<p>Nota de recomendação: As vezes a documentação é confussa para qualquer iniciante, eu mesmo no inicio não entendia nada rsrs, por esse motivo e outros vou te recomenda um treinamento completo programador fullStack nele você vai aprender MondoDB e muito mais, <a href=\"/programador-fullstack-8-semanas\">clique aqui para da uma olha nos detalhes<\/a><\/p>\n<h2>Drivers MongoDB<\/h2>\n<p><img src=\"/uploads/2020/06/instalando-no-pc-1.jpg\" alt=\"\"><\/p>\n<p>Para que uma aplicação se comunique com o servidor MongoDB, é necessário usar uma biblioteca do lado do cliente chamada driver. O driver fica em cima do servidor de banco de dados e permite que você interaja com o banco de dados usando a API do driver. O MongoDB possui drivers oficiais e de terceiros para todas as linguagens ambientes populares.<\/p>\n<p>Os drivers mais populares para o Node.js incluem o <a href=\"https://docs.mongodb.com/ecosystem/drivers/node/\" target=\"_blank\" rel=\"noopener\">driver nativo do MongoDB<\/a> e o Mongoose. Vamos ver um pouco sobre.<\/p>\n<h3>Driver MongoDB Node.js<\/h3>\n<p>Este é o driver oficial MongoDB para Node.js . O driver pode interagir com o banco de dados usando retornos de chamada, promessas ou async … await.<\/p>\n<p>Você pode instalá-lo assim:<\/p>\n<pre><code>npm install mongod\n<\/code><\/pre>\n<p>O exemplo abaixo demonstra como conectar o driver ao servidor e listar todos os documentos da coleção users.<\/p>\n<p>Nota: se você se conectou ao servidor Mongo usando um nome e uma senha, precisará especificar esses detalhes no seu código.<\/p>\n<p><a href=\"/mini-curso-construindo-seu-jogo-em-javascript/\"><img src=\"/uploads/2020/06/MiniCurso-CTA-blog.png\" alt=\"criando jogo\"><\/a><\/p>\n<pre><code><span class=\"token keyword\">const<\/span> MongoClient <span class=\"token operator\">=<\/span> <span class=\"token function\">require<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'mongodb'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span>MongoClient<span class=\"token punctuation\">;<\/span>\n<span class=\"token keyword\">const<\/span> url <span class=\"token operator\">=<\/span> <span class=\"token string\">'mongodb://localhost:27017/exampledb'<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token comment\">// Com autenticação:<\/span>\n<span class=\"token comment\">// const url = 'mongodb://&lt;userName>:&lt;passWord>@localhost:27017/exampledb';<\/span>\n<span class=\"token comment\">// Further reading: https://docs.mongodb.com/manual/reference/connection-string/<\/span>\n\n<span class=\"token punctuation\">(<\/span><span class=\"token keyword\">async<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=><\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">let<\/span> client<span class=\"token punctuation\">;<\/span>\n\n  <span class=\"token keyword\">try<\/span> <span class=\"token punctuation\">{<\/span>\n    client <span class=\"token operator\">=<\/span> <span class=\"token keyword\">await<\/span> MongoClient<span class=\"token punctuation\">.<\/span><span class=\"token function\">connect<\/span><span class=\"token punctuation\">(<\/span>url<span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">{<\/span>\n      <span class=\"token literal-property property\">useNewUrlParser<\/span><span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span>\n      <span class=\"token literal-property property\">useUnifiedTopology<\/span><span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span>\n    <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n    <span class=\"token keyword\">const<\/span> db <span class=\"token operator\">=<\/span> client<span class=\"token punctuation\">.<\/span><span class=\"token function\">db<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'exampledb'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">const<\/span> collection <span class=\"token operator\">=<\/span> db<span class=\"token punctuation\">.<\/span><span class=\"token function\">collection<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'users'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">const<\/span> users <span class=\"token operator\">=<\/span> <span class=\"token keyword\">await<\/span> collection<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">toArray<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span>users<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span> <span class=\"token keyword\">catch<\/span> <span class=\"token punctuation\">(<\/span>err<span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span>err<span class=\"token punctuation\">.<\/span>stack<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span>\n\n  <span class=\"token keyword\">if<\/span> <span class=\"token punctuation\">(<\/span>client<span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    client<span class=\"token punctuation\">.<\/span><span class=\"token function\">close<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<p>O MongoClient.connect retorno é uma <a href=\"/promise-javascript-guia-completo/\">promise<\/a>. Qualquer erro é capturado pelo blocl catch e qualquer ação do banco de dados entra no bloco try. Se você examinar a <a href=\"https://mongodb.github.io/node-mongodb-native/3.5/\" target=\"_blank\" rel=\"noopener\">documentação<\/a> do driver Mong, verá que a API é bastante semelhante à que estamos usando no shell.<\/p>\n<h3>Driver Mongoose<\/h3>\n<p>Outro driver Node.js popular para o MongoDB é o <a href=\"http://mongoosejs.com/docs/index.html\" target=\"_blank\" rel=\"noopener\">Mongoose<\/a>. O Mongoose é construído sobre o driver oficial do MongoDB. Quando o Mongoose foi lançado, havia muitos recursos que o driver nativo do MongoDB não possuía. Um recurso importante foi a capacidade de definir uma estrutura de esquema que seria mapeada na coleção do banco de dados. No entanto, as versões mais recentes do MongoDB adotaram alguns desses recursos na forma de esquema JSON e validação de esquema.<\/p>\n<p>Além do esquema, outros recursos sofisticados do Mongoose incluem <a href=\"https://mongoosejs.com/docs/models.html\" target=\"_blank\" rel=\"noopener\">modelos<\/a>, <a href=\"https://mongoosejs.com/docs/validation.html\" target=\"_blank\" rel=\"noopener\">validadores<\/a> e <a href=\"https://mongoosejs.com/docs/middleware.html\" target=\"_blank\" rel=\"noopener\">middlewar<\/a>, o <a href=\"https://mongoosejs.com/docs/populate.html\" target=\"_blank\" rel=\"noopener\">método populate<\/a>, <a href=\"https://mongoosejs.com/docs/plugins.html\" target=\"_blank\" rel=\"noopener\">plugins<\/a> e assim por diante. Você pode ler mais sobre isso nos documentos do Mongoose.<\/p>\n<p>Você pode instalar o Mongoose assim:<\/p>\n<pre><code>npm install mongoose\n<\/code><\/pre>\n<p>Código usando o Mongoose:<\/p>\n<pre><code><span class=\"token keyword\">const<\/span> mongoose <span class=\"token operator\">=<\/span> <span class=\"token function\">require<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'mongoose'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token keyword\">async<\/span> <span class=\"token keyword\">function<\/span> <span class=\"token function\">run<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">await<\/span> mongoose<span class=\"token punctuation\">.<\/span><span class=\"token function\">connect<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'mongodb://localhost:27017/exampledb'<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token literal-property property\">useNewUrlParser<\/span><span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">,<\/span>\n    <span class=\"token literal-property property\">useUnifiedTopology<\/span><span class=\"token operator\">:<\/span> <span class=\"token boolean\">true<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n  <span class=\"token keyword\">const<\/span> userSchema <span class=\"token operator\">=<\/span> <span class=\"token keyword\">new<\/span> <span class=\"token class-name\">mongoose<span class=\"token punctuation\">.<\/span>Schema<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span> <span class=\"token literal-property property\">name<\/span><span class=\"token operator\">:<\/span> String<span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">age<\/span><span class=\"token operator\">:<\/span> String<span class=\"token punctuation\">,<\/span> <span class=\"token literal-property property\">email<\/span><span class=\"token operator\">:<\/span> String <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> User <span class=\"token operator\">=<\/span> mongoose<span class=\"token punctuation\">.<\/span><span class=\"token function\">model<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'User'<\/span><span class=\"token punctuation\">,<\/span> userSchema<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n  <span class=\"token keyword\">const<\/span> users <span class=\"token operator\">=<\/span> <span class=\"token keyword\">await<\/span> User<span class=\"token punctuation\">.<\/span><span class=\"token function\">find<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span>users<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  mongoose<span class=\"token punctuation\">.<\/span>connection<span class=\"token punctuation\">.<\/span><span class=\"token function\">close<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span>\n\n<span class=\"token function\">run<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">catch<\/span><span class=\"token punctuation\">(<\/span><span class=\"token parameter\">error<\/span> <span class=\"token operator\">=><\/span> console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span>error<span class=\"token punctuation\">.<\/span>stack<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre>\n<h2>Conclusão<\/h2>\n<p>O MongoDB é uma solução popular de banco de dados NoSQL que se adapta aos requisitos modernos de desenvolvimento. Neste artigo, abordamos o básico do MongoDB, o shell Mongo e alguns dos drivers populares disponíveis. Também exploramos as operações comuns do banco de dados e as ações CRUD no shell Mongo. Agora é hora de você sair e experimentar o que abordamos aqui e muito mais. Se você quiser saber mais, recomendo criar uma API REST com MongoDB e Node para se familiarizar com as operações e métodos comuns do banco de dados clique aqui para ver um <a href=\"/programador-fullstack-8-semanas\">treinamento completo onde você vera tudo criará uma API REST e muito mais<\/a>.<\/p>\n<h3>Recomendações<\/h3>\n<h4>Artigos<\/h4>\n<ul>\n<li><a href=\"/acessibilidade-web-um-programador-diferente/\">Acessibilidade Web: Seja um Programador Diferente<\/a><\/li>\n<li><a href=\"/5-geradores-css-grid/\">5 Geradores de CSS Grid Tenha Layout Prontos para seu projeto<\/a><\/li>\n<li><a href=\"/promise-javascript-guia-completo/\">Promise JavaScript: Guia completo Passo a Passo<\/a><\/li>\n<\/ul>\n<h4>Canal Youtube<\/h4>\n<p>&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cBZn4dDcMrM&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;<\/p>\n<h4>Programador FullStack JavaScript - Esse eu recomendo<\/h4>\n<p><a href=\"/programador-fullstack-8-semanas\"><img src=\"/uploads/2020/06/just-start-red-OFD-FB-1024x536.jpg\" alt=\"\"><\/a><\/p>\n","date":"2020-06-18T00:00:00.000Z","readingTime":27,"title":"MongoDB – Guia para Iniciantes Passo a Passo","tags":["alisson-suassuna","aprender-a-programar","guia-para-iniciante","iniciante","introducao-mongodb","javascript","json","mongo","mongodb","mongodb-compass","mongodb-tutorial","nodejs","nosql","tipscode"],"description":"Eeste artigo é para iniciantes, vou demonstrar como instalar o Mongodb e começar a usá-lo para armazenar e consultar dados. Também mostro como interagir com um banco de dados Mongo de dentro de um programa Node e também destacarei algumas das diferenças entre o Mongo e um banco de dados relacional tradicional (como o MySQL) ao longo do artigo.","imgArticle":"/thumbnail-article/mongodb-para-iniciantes.png","imgHome":"/thumbnail-home/mongodb-para-iniciantes.png"},"n-0-0-12-0-0":{"expanded":false},"n-0-0-12-0-0-0-0-0-0-1-0":{}};
      window.environment = {"client":false,"server":true,"development":false,"production":true,"mode":"ssg","key":"2888fbeda7229ecb9c66d3b37f8671275e2844bf"};
      window.settings = {};
      window.worker = {"enabled":true,"fetching":false,"preload":[],"headers":{},"api":"","cdn":"","protocol":"https","queues":{},"online":true,"responsive":true};
      window.params = {"slug":"mongodb-guia-completo-para-iniciante"};
      window.project = {"domain":"tipscode.com.br","name":"TipsCode","color":"#D22365","type":"website","display":"standalone","orientation":"portrait","scope":"/","root":"/","sitemap":true,"favicon":"/favicon-96x96.png","disallow":[],"icons":{"72":"/icon-72x72.png","96":"/icon-96x96.png","128":"/icon-128x128.png","144":"/icon-144x144.png","152":"/icon-152x152.png","180":"/icon-180x180.png","192":"/icon-192x192.png","384":"/icon-384x384.png","512":"/icon-512x512.png"}};
      window.context = {};
      document.addEventListener('DOMContentLoaded', () => {
        const script = window.document.createElement('script');
        script.src = '/nullstack/2888fbeda7229ecb9c66d3b37f8671275e2844bf/client.js';
        script.integrity = '';
        script.crossOrigin = 'anonymous';
        document.body.append(script);
      });
    </script>
  </body>
</html>